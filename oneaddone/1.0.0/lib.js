function __extends(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}this.DEBUG=!0,this.RELEASE=!1,function(s){s.getString=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return s.sys.tr.apply(s.sys,arguments)},s.$error=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=s.sys.tr.apply(null,arguments);throw DEBUG&&s.sys.$logToFPS("Error #"+t+": "+n),new Error("#"+t+": "+n)},s.$warn=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=s.sys.tr.apply(null,arguments);DEBUG&&s.sys.$logToFPS("Warning #"+t+": "+n),s.warn("Warning #"+t+": "+n)},s.$markReadOnly=function(e,i,n){void 0===n&&(n=!0);var t=Object.getOwnPropertyDescriptor(n?e.prototype:e,i);null!=t?(t.set=function(t){n?s.$warn(1010,s.getQualifiedClassName(e),i):s.$warn(1014,s.getQualifiedClassName(e),i)},Object.defineProperty(e.prototype,i,t)):console.log(e)},s.$markCannotUse=function(e,i,t){Object.defineProperty(e.prototype,i,{get:function(){return s.$warn(1009,s.getQualifiedClassName(e),i),t},set:function(t){s.$error(1009,s.getQualifiedClassName(e),i)},enumerable:!0,configurable:!0})}}(egret||(egret={})),function(l){l.registerClass=function(t,e,i){DEBUG&&(t||l.$error(1003,"classDefinition"),t.prototype||l.$error(1012,"classDefinition"),void 0===e&&l.$error(1003,"className"));var n=t.prototype,s=[n.__class__=e];i&&(s=s.concat(i));var r=n.__types__;if(n.__types__)for(var a=r.length,o=0;o<a;o++){var h=r[o];-1==s.indexOf(h)&&s.push(h)}n.__types__=s}}(egret||(egret={}));var __define=this.__define||function(t,e,i,n){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:i,set:n})};if(function(e){e.$hashCount=1;var t=function(){function t(){this.$hashCode=e.$hashCount++}return __define(t.prototype,"hashCode",function(){return this.$hashCode}),t}();e.HashObject=t,e.registerClass(t,"egret.HashObject",["egret.IHashObject"]),DEBUG&&e.$markReadOnly(t,"hashCode")}(egret||(egret={})),function(l){var h=[],t=function(e){function t(t){void 0===t&&(t=null),e.call(this),this.$EventDispatcher={0:t||this,1:{},2:{},3:0}}__extends(t,e);var i=t.prototype;return i.$getEventMap=function(t){var e=this.$EventDispatcher;return t?e[2]:e[1]},i.addEventListener=function(t,e,i,n,s){this.$addListener(t,e,i,n,s)},i.once=function(t,e,i,n,s){this.$addListener(t,e,i,n,s,!0)},i.$addListener=function(t,e,i,n,s,r){DEBUG&&!e&&l.$error(1003,"listener");var a=this.$EventDispatcher,o=n?a[2]:a[1],h=o[t];h?0!==a[3]&&(o[t]=h=h.concat()):h=o[t]=[],this.$insertEventBin(h,t,e,i,n,s,r)},i.$insertEventBin=function(t,e,i,n,s,r,a){r=0|+r;for(var o=-1,h=t.length,l=0;l<h;l++){var c=t[l];if(c.listener==i&&c.thisObject==n&&c.target==this)return!1;-1==o&&c.priority<r&&(o=l)}var u={type:e,listener:i,thisObject:n,priority:r,target:this,useCapture:s,dispatchOnce:!!a};return-1!==o?t.splice(o,0,u):t.push(u),!0},i.removeEventListener=function(t,e,i,n){var s=this.$EventDispatcher,r=n?s[2]:s[1],a=r[t];a&&(0!==s[3]&&(r[t]=a=a.concat()),this.$removeEventBin(a,e,i),0==a.length&&(r[t]=null))},i.$removeEventBin=function(t,e,i){for(var n=t.length,s=0;s<n;s++){var r=t[s];if(r.listener==e&&r.thisObject==i&&r.target==this)return t.splice(s,1),!0}return!1},i.hasEventListener=function(t){var e=this.$EventDispatcher;return!(!e[1][t]&&!e[2][t])},i.willTrigger=function(t){return this.hasEventListener(t)},i.dispatchEvent=function(t){return t.$currentTarget=this.$EventDispatcher[0],t.$setTarget(t.$currentTarget),this.$notifyListener(t,!1)},i.$notifyListener=function(t,e){var i=this.$EventDispatcher,n=(e?i[2]:i[1])[t.$type];if(!n)return!0;var s=n.length;if(0==s)return!0;var r=h;i[3]++;for(var a=0;a<s;a++){var o=n[a];if(o.listener.call(o.thisObject,t),o.dispatchOnce&&r.push(o),t.$isPropagationImmediateStopped)break}for(i[3]--;r.length;)(o=r.pop()).target.removeEventListener(o.type,o.listener,o.thisObject,o.useCapture);return!t.$isDefaultPrevented},i.dispatchEventWith=function(t,e,i){if(e||this.hasEventListener(t)){var n=l.Event.create(l.Event,t,e);n.data=i;var s=this.dispatchEvent(n);return l.Event.release(n),s}return!0},t}(l.HashObject);l.EventDispatcher=t,l.registerClass(t,"egret.EventDispatcher",["egret.IEventDispatcher"])}(egret||(egret={})),function(f){function s(t){return 180<(t%=360)?t-=360:t<-180&&(t+=360),t}var t=function(h){function l(){h.call(this),this.$children=null,this.$parent=null,this.$stage=null,this.$nestLevel=0,this.$visible=!0,this.$displayList=null,this.$alpha=1,this.$touchEnabled=l.defaultTouchEnabled,this.$scrollRect=null,this.$blendMode=0,this.$maskedObject=null,this.$mask=null,this.$maskRect=null,this.$parentDisplayList=null,this.$renderNode=null,this.$displayFlags=2032,this.$DisplayObject={0:1,1:1,2:0,3:0,4:0,5:"",6:new f.Matrix,7:new f.Matrix,8:new f.Matrix,9:new f.Rectangle,10:new f.Rectangle,11:!1,12:0,13:0,14:NaN,15:NaN,16:0,17:0,18:0}}__extends(l,h);var t=__define,e=l.prototype;return e.$setFlags=function(t){this.$displayFlags|=t},e.$removeFlags=function(t){this.$displayFlags&=~t},e.$removeFlagsUp=function(t){if(this.$hasAnyFlags(t)){this.$removeFlags(t);var e=this.$parent;e&&e.$removeFlagsUp(t)}},e.$hasFlags=function(t){return(this.$displayFlags&t)==t},e.$propagateFlagsUp=function(t){if(!this.$hasFlags(t)){this.$setFlags(t);var e=this.$parent;e&&e.$propagateFlagsUp(t)}},e.$propagateFlagsDown=function(t){this.$setFlags(t)},e.$hasAnyFlags=function(t){return!!(this.$displayFlags&t)},e.invalidateMatrix=function(){this.$setFlags(8),this.invalidatePosition()},e.invalidatePosition=function(){this.$invalidateTransform(),this.$propagateFlagsDown(48),this.$parent&&this.$parent.$propagateFlagsUp(4)},t(e,"name",function(){return this.$DisplayObject[5]},function(t){this.$DisplayObject[5]=t}),t(e,"parent",function(){return this.$parent}),e.$setParent=function(t){return this.$parent!=t&&(this.$parent=t,!0)},e.$onAddToStage=function(t,e){this.$stage=t,this.$nestLevel=e,f.Sprite.$EVENT_ADD_TO_STAGE_LIST.push(this)},e.$onRemoveFromStage=function(){this.$nestLevel=0,f.Sprite.$EVENT_REMOVE_FROM_STAGE_LIST.push(this)},t(e,"stage",function(){return this.$stage}),t(e,"matrix",function(){return this.$getMatrix().clone()},function(t){this.$setMatrix(t)}),e.$getMatrix=function(){var t=this.$DisplayObject;return this.$hasFlags(8)&&(t[6].$updateScaleAndRotation(t[0],t[1],t[2],t[3]),this.$removeFlags(8)),t[6]},e.$setMatrix=function(t,e){void 0===e&&(e=!0);var i=this.$DisplayObject,n=i[6];return!n.equals(t)&&(n.copyFrom(t),e&&(i[0]=n.$getScaleX(),i[1]=n.$getScaleY(),i[2]=t.$getSkewX(),i[3]=t.$getSkewY(),i[16]=s(180*i[2]/Math.PI),i[17]=s(180*i[3]/Math.PI),i[4]=s(180*i[3]/Math.PI)),this.$removeFlags(8),this.invalidatePosition(),!0)},e.$getConcatenatedMatrix=function(){var t=this.$DisplayObject[7];if(this.$hasFlags(16)){this.$parent?this.$parent.$getConcatenatedMatrix().$preMultiplyInto(this.$getMatrix(),t):t.copyFrom(this.$getMatrix());var e=this.$DisplayObject,i=e[12],n=e[13],s=this.$scrollRect;s?t.$preMultiplyInto(f.$TempMatrix.setTo(1,0,0,1,-s.x-i,-s.y-n),t):0==i&&0==n||t.$preMultiplyInto(f.$TempMatrix.setTo(1,0,0,1,-i,-n),t),this.$displayList&&(this.$displayList.$renderNode.moved=!0),this.$renderNode&&(this.$renderNode.moved=!0),this.$removeFlags(16)}return t},e.$getInvertedConcatenatedMatrix=function(){var t=this.$DisplayObject;return this.$hasFlags(32)&&(this.$getConcatenatedMatrix().$invertInto(t[8]),this.$removeFlags(32)),t[8]},t(e,"x",function(){return this.$getX()},function(t){this.$setX(t)}),e.$getX=function(){return this.$DisplayObject[6].tx},e.$setX=function(t){t=+t||0;var e=this.$DisplayObject[6];return t!=e.tx&&(e.tx=t,this.invalidatePosition(),!0)},t(e,"y",function(){return this.$getY()},function(t){this.$setY(t)}),e.$getY=function(){return this.$DisplayObject[6].ty},e.$setY=function(t){t=+t||0;var e=this.$DisplayObject[6];return t!=e.ty&&(e.ty=t,this.invalidatePosition(),!0)},t(e,"scaleX",function(){return this.$getScaleX()},function(t){this.$setScaleX(t)}),e.$getScaleX=function(){return this.$DisplayObject[0]},e.$setScaleX=function(t){t=+t||0;var e=this.$DisplayObject;return t!=e[0]&&(e[0]=t,this.invalidateMatrix(),!0)},t(e,"scaleY",function(){return this.$getScaleY()},function(t){this.$setScaleY(t)}),e.$getScaleY=function(){return this.$DisplayObject[1]},e.$setScaleY=function(t){return(t=+t||0)!=this.$DisplayObject[1]&&(this.$DisplayObject[1]=t,this.invalidateMatrix(),!0)},t(e,"rotation",function(){return this.$getRotation()},function(t){this.$setRotation(t)}),e.$getRotation=function(){return this.$DisplayObject[4]},e.$setRotation=function(t){t=s(t=+t||0);var e=this.$DisplayObject;if(t==e[4])return!1;var i=(t-e[4])/180*Math.PI;return e[2]+=i,e[3]+=i,e[4]=t,this.invalidateMatrix(),!0},t(e,"skewX",function(){return this.$DisplayObject[16]},function(t){this.$setSkewX(t)}),e.$setSkewX=function(t){t=+t||0;var e=this.$DisplayObject;return t!=e[16]&&(t=(t=s(e[16]=t))/180*Math.PI,e[2]=t,this.invalidateMatrix(),!0)},t(e,"skewY",function(){return this.$DisplayObject[17]},function(t){this.$setSkewY(t)}),e.$setSkewY=function(t){t=+t||0;var e=this.$DisplayObject;return t!=e[17]&&(t=(t=s(e[17]=t))/180*Math.PI,e[3]=t,this.invalidateMatrix(),!0)},t(e,"width",function(){return this.$getWidth()},function(t){this.$setWidth(t)}),e.$getWidth=function(){return isNaN(this.$getExplicitWidth())?this.$getOriginalBounds().width:this.$getExplicitWidth()},e.$getExplicitWidth=function(){return this.$DisplayObject[14]},e.$setWidth=function(t){return this.$DisplayObject[14]=isNaN(t)?NaN:t,!((t=+t)<0)&&(this.invalidateMatrix(),!0)},t(e,"height",function(){return this.$getHeight()},function(t){this.$setHeight(t)}),e.$getHeight=function(){return isNaN(this.$getExplicitHeight())?this.$getOriginalBounds().height:this.$getExplicitHeight()},e.$getExplicitHeight=function(){return this.$DisplayObject[15]},e.$setHeight=function(t){return this.$DisplayObject[15]=isNaN(t)?NaN:t,!((t=+t)<0)&&(this.invalidateMatrix(),!0)},t(e,"measuredWidth",function(){return this.$getOriginalBounds().width}),t(e,"measuredHeight",function(){return this.$getOriginalBounds().height}),t(e,"anchorOffsetX",function(){return this.$DisplayObject[12]},function(t){this.$setAnchorOffsetX(t)}),e.$getAnchorOffsetX=function(){return this.$DisplayObject[12]},e.$setAnchorOffsetX=function(t){return(t=+t||0)!=this.$DisplayObject[12]&&(this.$DisplayObject[12]=t,this.invalidatePosition(),!0)},t(e,"anchorOffsetY",function(){return this.$DisplayObject[13]},function(t){this.$setAnchorOffsetY(t)}),e.$getAnchorOffsetY=function(){return this.$DisplayObject[13]},e.$setAnchorOffsetY=function(t){return(t=+t||0)!=this.$DisplayObject[13]&&(this.$DisplayObject[13]=t,this.invalidatePosition(),!0)},t(e,"visible",function(){return this.$visible},function(t){this.$setVisible(t)}),e.$setVisible=function(t){return(t=!!t)!=this.$visible&&(this.$visible=t,this.$propagateFlagsDown(1024),this.$invalidateTransform(),!0)},e.$getConcatenatedVisible=function(){var t=this.$DisplayObject;if(this.$hasFlags(1024)){if(this.$parent){var e=this.$parent.$getConcatenatedVisible();t[19]=e&&this.$visible}else t[19]=this.$visible;this.$removeFlags(1024)}return t[19]},t(e,"cacheAsBitmap",function(){return this.$DisplayObject[11]},function(t){t=!!t,this.$DisplayObject[11]=t,this.$setHasDisplayList(t)}),e.$setHasDisplayList=function(t){if(!!this.$displayList!=t)if(t){var e=f.sys.DisplayList.create(this);e&&(this.$displayList=e,this.$parentDisplayList&&this.$parentDisplayList.markDirty(e),this.$cacheAsBitmapChanged())}else this.$displayList=null,this.$cacheAsBitmapChanged()},e.$cacheAsBitmapChanged=function(){var t=this.$displayList||this.$parentDisplayList;this.$renderNode&&t.markDirty(this),this.$propagateFlagsDown(48)},t(e,"alpha",function(){return this.$alpha},function(t){this.$setAlpha(t)}),e.$setAlpha=function(t){return(t=+t||0)!=this.$alpha&&(this.$alpha=t,this.$propagateFlagsDown(64),this.$invalidate(),!0)},e.$getConcatenatedAlpha=function(){var t=this.$DisplayObject;if(this.$hasFlags(64)){if(this.$parent){var e=this.$parent.$getConcatenatedAlpha();t[18]=e*this.$alpha}else t[18]=this.$alpha;this.$removeFlags(64)}return t[18]},t(e,"touchEnabled",function(){return this.$getTouchEnabled()},function(t){this.$setTouchEnabled(t)}),e.$getTouchEnabled=function(){return this.$touchEnabled},e.$setTouchEnabled=function(t){return this.$touchEnabled!=t&&(this.$touchEnabled=t,!0)},t(e,"scrollRect",function(){return this.$scrollRect},function(t){this.$setScrollRect(t)}),e.$setScrollRect=function(t){return!(!t&&!this.$scrollRect)&&(t?(this.$scrollRect||(this.$scrollRect=new f.Rectangle),this.$scrollRect.copyFrom(t)):this.$scrollRect=null,this.invalidatePosition(),!0)},t(e,"blendMode",function(){return f.sys.numberToBlendMode(this.$blendMode)},function(t){var e=f.sys.blendModeToNumber(t);e!=this.$blendMode&&(this.$blendMode=e,this.$invalidateTransform())}),t(e,"mask",function(){return this.$mask?this.$mask:this.$maskRect},function(t){if(t!==this){if(t)if(t instanceof l){if(t==this.$mask)return;t.$maskedObject&&(t.$maskedObject.mask=null),t.$maskedObject=this,t.$invalidateTransform(),this.$mask=t,this.$maskRect=null}else this.$setMaskRect(t),this.$mask&&(this.$mask.$maskedObject=null,this.$mask.$invalidateTransform()),this.$mask=null;else this.$mask&&(this.$mask.$maskedObject=null,this.$mask.$invalidateTransform()),this.$mask=null,this.$maskRect=null;this.$invalidateTransform()}}),e.$setMaskRect=function(t){return!(!t&&!this.$maskRect)&&(t?(this.$maskRect||(this.$maskRect=new f.Rectangle),this.$maskRect.copyFrom(t)):this.$maskRect=null,this.invalidatePosition(),!0)},e.getTransformedBounds=function(t,e){return t=t||this,this.$getTransformedBounds(t,e)},e.getBounds=function(t,e){if(void 0===e&&(e=!0),t=this.$getTransformedBounds(this,t),e){var i=this.$DisplayObject;0==i[12]&&0==i[13]||(t.x-=i[12],t.y-=i[13])}return t},e.$getTransformedBounds=function(t,e){var i,n=this.$getOriginalBounds();if(e||(e=new f.Rectangle),e.copyFrom(n),t==this||e.isEmpty())return e;t?(i=f.$TempMatrix,t.$getInvertedConcatenatedMatrix().$preMultiplyInto(this.$getConcatenatedMatrix(),i)):i=this.$getConcatenatedMatrix();return i.$transformBounds(e),e},e.globalToLocal=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),this.$getInvertedConcatenatedMatrix().transformPoint(t,e,i)},e.localToGlobal=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),this.$getConcatenatedMatrix().transformPoint(t,e,i)},e.$invalidateContentBounds=function(){this.$invalidate(),this.$setFlags(2),this.$propagateFlagsUp(4)},e.$getOriginalBounds=function(){var t=this.$DisplayObject[9];return this.$hasFlags(4)&&(t.copyFrom(this.$getContentBounds()),this.$measureChildBounds(t),this.$removeFlags(4),this.$displayList&&(this.$displayList.$renderNode.moved=!0)),t},e.$measureChildBounds=function(t){},e.$getContentBounds=function(){var t=this.$DisplayObject[10];return this.$hasFlags(2)&&(this.$measureContentBounds(t),this.$renderNode&&(this.$renderNode.moved=!0),this.$removeFlags(2)),t},e.$measureContentBounds=function(t){},e.$invalidate=function(t){if(this.$renderNode&&!this.$hasFlags(256)){this.$setFlags(384);var e=this.$displayList?this.$displayList:this.$parentDisplayList;e&&e.markDirty(this)}},e.$invalidateTransform=function(){if(!this.$hasFlags(512)){this.$setFlags(512);var t=this.$displayList;(t||this.$renderNode)&&this.$parentDisplayList&&this.$parentDisplayList.markDirty(t||this)}},e.$getRenderNode=function(){var t=this.$renderNode;return t?(128&this.$displayFlags&&(t.cleanBeforeRender(),this.$render(),this.$removeFlags(128),t=this.$renderNode),t):null},e.$update=function(t){this.$removeFlagsUp(768);var e=this.$renderNode,i=this.$getConcatenatedMatrix(),n=t||this.$getContentBounds();e.renderAlpha=this.$getConcatenatedAlpha(),e.renderVisible=this.$getConcatenatedVisible();var s=this.$displayList||this.$parentDisplayList,r=e.renderRegion;if(!s)return r.setTo(0,0,0,0),e.moved=!1;if(!e.moved)return!1;e.moved=!1;var a=e.renderMatrix;a.copyFrom(i);var o=s.root;return o!==this.$stage&&this.$getConcatenatedMatrixAt(o,a),r.updateRegion(n,a),!0},e.$getConcatenatedMatrixAt=function(t,e){var i=t.$getInvertedConcatenatedMatrix();if(0===i.a||0===i.d){var n=this,s=t.$nestLevel;for(e.identity();n.$nestLevel>s;){var r=n.$scrollRect;r&&e.concat(f.$TempMatrix.setTo(1,0,0,1,-r.x,-r.y)),e.concat(n.$getMatrix()),n=n.$parent}}else i.$preMultiplyInto(e,e)},e.$getConcatenatedAlphaAt=function(t,e){var i=t.$getConcatenatedAlpha();if(0===i){e=1;for(var n=this,s=t.$nestLevel;n.$nestLevel>s;)e*=n.$alpha,n=n.$parent}else e/=i;return e},e.$render=function(){},e.$hitTest=function(t,e){var i=this.$DisplayObject;if(!this.$renderNode||!this.$visible||0==i[0]||0==i[1])return null;var n=this.$getInvertedConcatenatedMatrix();if(0==n.a&&0==n.b&&0==n.c&&0==n.d)return null;var s=this.$getContentBounds(),r=n.a*t+n.c*e+n.tx,a=n.b*t+n.d*e+n.ty;if(s.contains(r,a)){if(!this.$children){var o=this.$scrollRect?this.$scrollRect:this.$maskRect;if(o&&!o.contains(r,a))return null;if(this.$mask&&!this.$mask.$hitTest(t,e))return null}return this}return null},e.hitTestPoint=function(t,e,i){if(i){c=(h=this.$getInvertedConcatenatedMatrix()).a*t+h.c*e+h.tx,u=h.b*t+h.d*e+h.ty;var n,s=this.$displayList;if(s){var r=s.renderBuffer;try{n=r.getPixel(c-s.offsetX,u-s.offsetY)}catch(t){throw new Error(f.sys.tr(1039))}}else{(r=f.sys.hitTestBuffer).resize(3,3);var a=f.Matrix.create();a.identity(),a.translate(1-c,1-u),f.sys.systemRenderer.render(this,r,a,null,!0),f.Matrix.release(a);try{n=r.getPixel(1,1)}catch(t){throw new Error(f.sys.tr(1039))}}return 0!==n[3]}var o=this.$DisplayObject;if(0==o[0]||0==o[1])return!1;var h=this.$getInvertedConcatenatedMatrix(),l=this.getBounds(null,!1),c=h.a*t+h.c*e+h.tx,u=h.b*t+h.d*e+h.ty;if(l.contains(c,u)){var d=this.$scrollRect?this.$scrollRect:this.$maskRect;return!(d&&!d.contains(c,u))}return!1},e.$addListener=function(t,e,i,n,s,r){h.prototype.$addListener.call(this,t,e,i,n,s,r);var a=t==f.Event.ENTER_FRAME;if(a||t==f.Event.RENDER){var o=a?l.$enterFrameCallBackList:l.$renderCallBackList;-1==o.indexOf(this)&&o.push(this)}},e.removeEventListener=function(t,e,i,n){h.prototype.removeEventListener.call(this,t,e,i,n);var s=t==f.Event.ENTER_FRAME;if((s||t==f.Event.RENDER)&&!this.hasEventListener(t)){var r=s?l.$enterFrameCallBackList:l.$renderCallBackList,a=r.indexOf(this);-1!==a&&r.splice(a,1)}},e.dispatchEvent=function(t){if(!t.$bubbles)return h.prototype.dispatchEvent.call(this,t);var e=this.$getPropagationList(this),i=.5*e.length;return t.$setTarget(this),this.$dispatchPropagationEvent(t,e,i),!t.$isDefaultPrevented},e.$getPropagationList=function(t){for(var e=[];t;)e.push(t),t=t.$parent;var i=e.concat();return i.reverse(),e=i.concat(e)},e.$dispatchPropagationEvent=function(t,e,i){for(var n=e.length,s=i-1,r=0;r<n;r++){var a=e[r];if(t.$currentTarget=a,t.$eventPhase=r<s?1:r==i||r==s?2:3,a.$notifyListener(t,r<i),t.$isPropagationStopped||t.$isPropagationImmediateStopped)return}},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.$parent}return!1},l.defaultTouchEnabled=!1,l.$enterFrameCallBackList=[],l.$renderCallBackList=[],l}(f.EventDispatcher);f.DisplayObject=t,f.registerClass(t,"egret.DisplayObject",["egret.sys.Renderable"]),DEBUG&&(f.$markReadOnly(t,"parent"),f.$markReadOnly(t,"stage"))}(egret||(egret={})),function(P){var t=function(n){function E(t){n.call(this),this.$scale9Grid=null,this.$fillMode="scale",this._pixelHitTest=!1,this.$renderNode=new P.sys.BitmapNode,this.$Bitmap={0:null,1:null,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:E.defaultSmoothing,11:NaN,12:NaN},this.$setBitmapData(t)}__extends(E,n);var t=__define,e=E.prototype;return e.$onAddToStage=function(t,e){n.prototype.$onAddToStage.call(this,t,e);var i=this.$Bitmap[0];i&&P.Texture.$addDisplayObject(this,i)},e.$onRemoveFromStage=function(){n.prototype.$onRemoveFromStage.call(this);var t=this.$Bitmap[0];t&&P.Texture.$removeDisplayObject(this,t)},t(e,"bitmapData",function(){var t=this.$Bitmap[0];return t instanceof P.Texture?null:t},function(t){this.$setBitmapData(t)}),t(e,"texture",function(){var t=this.$Bitmap[0];return t instanceof P.Texture?t:null},function(t){this.$setBitmapData(t)}),e.$setBitmapData=function(t){var e=this.$Bitmap,i=e[0];if(t==i)return!1;if(!(e[0]=t))return this.setImageData(null,0,0,0,0,0,0,0,0,0,0),this.$invalidateContentBounds(),!0;if(this.$refreshImageData(),this.$stage){if(i){if((i._bitmapData&&i._bitmapData.hashCode?i._bitmapData.hashCode:i.hashCode)==(t._bitmapData&&t._bitmapData.hashCode?t._bitmapData.hashCode:t.hashCode))return this.$invalidateContentBounds(),!0;P.Texture.$removeDisplayObject(this,i)}P.Texture.$addDisplayObject(this,t)}return this.$invalidateContentBounds(),!0},e.$refreshImageData=function(){var t=this.$Bitmap[0];if(t)if(t instanceof P.Texture){var e=t;this.setImageData(e._bitmapData,e._bitmapX,e._bitmapY,e._bitmapWidth,e._bitmapHeight,e._offsetX,e._offsetY,e.$getTextureWidth(),e.$getTextureHeight(),e._sourceWidth,e._sourceHeight)}else{var i=t.width,n=t.height;this.setImageData(t,0,0,i,n,0,0,i,n,i,n)}},e.setImageData=function(t,e,i,n,s,r,a,o,h,l,c){var u=this.$Bitmap;u[1]=t,u[2]=e,u[3]=i,u[4]=n,u[5]=s,u[6]=r,u[7]=a,u[8]=o,u[9]=h,u[13]=l,u[14]=c},t(e,"scale9Grid",function(){return this.$scale9Grid},function(t){this.$scale9Grid=t,this.$invalidateContentBounds()}),t(e,"fillMode",function(){return this.$fillMode},function(t){this.$setFillMode(t)}),e.$setFillMode=function(t){return t!=this.$fillMode&&(this.$fillMode=t,!0)},t(e,"smoothing",function(){return this.$Bitmap[10]},function(t){t=!!t;var e=this.$Bitmap;t!=e[10]&&(e[10]=t,this.$invalidate())}),e.$setWidth=function(t){var e=this.$Bitmap;return!(t<0||t==e[11])&&(e[11]=t,this.$invalidateContentBounds(),!0)},e.$setHeight=function(t){var e=this.$Bitmap;return!(t<0||t==e[12])&&(e[12]=t,this.$invalidateContentBounds(),!0)},e.$getWidth=function(){var t=this.$Bitmap;return isNaN(t[11])?this.$getContentBounds().width:t[11]},e.$getHeight=function(){var t=this.$Bitmap;return isNaN(t[12])?this.$getContentBounds().height:t[12]},e.$measureContentBounds=function(t){if((e=this.$Bitmap)[1]){var e=this.$Bitmap,i=isNaN(e[11])?e[8]:e[11],n=isNaN(e[12])?e[9]:e[12];t.setTo(0,0,i,n)}else i=isNaN(e[11])?0:e[11],n=isNaN(e[12])?0:e[12],t.setTo(0,0,i,n)},e.$render=function(){var t=this.$Bitmap;if(t[1]){var e=isNaN(t[11])?t[8]:t[11],i=isNaN(t[12])?t[9]:t[12];E.$drawImage(this.$renderNode,t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],e,i,t[13],t[14],this.scale9Grid||t[0].scale9Grid,this.fillMode,t[10])}},t(e,"pixelHitTest",function(){return this._pixelHitTest},function(t){this._pixelHitTest=!!t}),e.$hitTest=function(t,e){var i=n.prototype.$hitTest.call(this,t,e);return i&&this._pixelHitTest&&(i=this.hitTestPixel(t,e)),i},e.hitTestPixel=function(t,e){var i,n=this.$getInvertedConcatenatedMatrix(),s=n.a*t+n.c*e+n.tx,r=n.b*t+n.d*e+n.ty,a=this.$displayList;if(a){var o=a.renderBuffer;try{i=o.getPixel(s-a.offsetX,r-a.offsetY)}catch(t){throw console.log(this.$Bitmap[0]),new Error(P.sys.tr(1039))}}else{(o=P.sys.hitTestBuffer).resize(3,3);var h=this.$getRenderNode(),l=P.Matrix.create();l.identity(),l.translate(1-s,1-r),P.sys.systemRenderer.drawNodeToBuffer(h,o,l,!0),P.Matrix.release(l);try{i=o.getPixel(1,1)}catch(t){throw console.log(this.$Bitmap[0]),new Error(P.sys.tr(1039))}}return 0===i[3]?null:this},E.$drawImage=function(t,e,i,n,s,r,a,o,h,l,c,u,d,f,g,p,$){if(e){var v=P.$TextureScaleFactor;if(t.smoothing=$,t.image=e,t.imageWidth=d,t.imageHeight=f,g)E.drawScale9GridImage(t,g,i,n,s,r,a,o,h,l,c,u);else if(p==P.BitmapFillMode.SCALE){var y=c/h,m=u/l;t.drawImage(i,n,s,r,a*y,o*m,y*s,m*r)}else if(p==P.BitmapFillMode.CLIP){C(t,v,i,n,T=s*v,x=r*v,a,o,Math.min(h,c),Math.min(l,u))}else for(var T=s*v,x=r*v,_=0;_<c;_+=h)for(var b=0;b<u;b+=l){C(t,v,i,n,T,x,a,o,Math.min(c-_,h),Math.min(u-b,l),_,b)}}},E.drawScale9GridImage=function(t,e,i,n,s,r,a,o,h,l,c,u){var d=s,f=r;c-=h-s*P.$TextureScaleFactor,u-=l-r*P.$TextureScaleFactor;var g=e.x-a,p=e.y-o,$=g/P.$TextureScaleFactor,v=p/P.$TextureScaleFactor,y=e.width/P.$TextureScaleFactor,m=e.height/P.$TextureScaleFactor;0==m&&(m=1,f<=v&&v--),0==y&&(y=1,d<=$&&$--);var T=i,x=T+$,_=x+y,b=d-$-y,E=n,C=E+v,F=C+m,w=f-v-m,R=b*P.$TextureScaleFactor,D=w*P.$TextureScaleFactor;if(($+b)*P.$TextureScaleFactor>c||(v+w)*P.$TextureScaleFactor>u)t.drawImage(i,n,s,r,a,o,c,u);else{var O=a,S=O+g,L=O+(c-R),N=c-g-R,B=o,A=B+p,M=B+u-D,I=u-p-D;0<v&&(0<$&&t.drawImage(T,E,$,v,O,B,g,p),0<y&&t.drawImage(x,E,y,v,S,B,N,p),0<b&&t.drawImage(_,E,b,v,L,B,R,p)),0<m&&(0<$&&t.drawImage(T,C,$,m,O,A,g,I),0<y&&t.drawImage(x,C,y,m,S,A,N,I),0<b&&t.drawImage(_,C,b,m,L,A,R,I)),0<w&&(0<$&&t.drawImage(T,F,$,w,O,M,g,D),0<y&&t.drawImage(x,F,y,w,S,M,N,D),0<b&&t.drawImage(_,F,b,w,L,M,R,D))}},E.defaultSmoothing=!0,E}(P.DisplayObject);function C(t,e,i,n,s,r,a,o,h,l,c,u){void 0===c&&(c=0),void 0===u&&(u=0);var d=a+s-h;0<d&&(s-=d),0<(d=o+r-l)&&(r-=d),t.drawImage(i,n,s/e,r/e,c+a,u+o,s,r)}P.Bitmap=t,P.registerClass(t,"egret.Bitmap")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.REPEAT="repeat",t.SCALE="scale",t.CLIP="clip",t}();t.BitmapFillMode=e,t.registerClass(e,"egret.BitmapFillMode")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.NORMAL="normal",t.ADD="add",t.ERASE="erase",t}();t.BlendMode=e,t.registerClass(e,"egret.BlendMode")}(egret||(egret={})),function(t){!function(t){for(var i=["normal","add","erase"],n={},e=i.length,s=0;s<e;s++){var r=i[s];n[r]=s}t.blendModeToNumber=function(t){var e=n[t];return void 0===e?0:e},t.numberToBlendMode=function(t){var e=i[t];return void 0===e?"normal":e}}(t.sys||(t.sys={}))}(egret||(egret={})),function(t){var e=function(){function t(){}return t.NONE="none",t.ROUND="round",t.SQUARE="square",t}();t.CapsStyle=e,t.registerClass(e,"egret.CapsStyle")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.OFF="off",t.ON="on",t}();t.DirtyRegionPolicy=e,t.registerClass(e,"egret.DirtyRegionPolicy")}(egret||(egret={})),function(c){var t=function(u){function h(){u.call(this),this.$touchChildren=!0,this.$children=[]}__extends(h,u);var t=__define,e=h.prototype;return e.$propagateFlagsDown=function(t){if(!this.$hasFlags(t)){this.$setFlags(t);for(var e=this.$children,i=0;i<e.length;i++)e[i].$propagateFlagsDown(t)}},t(e,"numChildren",function(){return this.$children.length}),e.addChild=function(t){var e=this.$children.length;return t.$parent==this&&e--,this.$doAddChild(t,e)},e.addChildAt=function(t,e){return((e=0|+e)<0||e>=this.$children.length)&&(e=this.$children.length,t.$parent==this&&e--),this.$doAddChild(t,e)},e.$doAddChild=function(t,e,i){void 0===i&&(i=!0),DEBUG&&(t==this?c.$error(1005):t instanceof c.DisplayObjectContainer&&t.contains(this)&&c.$error(1004));var n=t.$parent;if(n==this)return this.doSetChildIndex(t,e),t;n&&n.removeChild(t),this.$children.splice(e,0,t),t.$setParent(this);var s=this.$stage;if(s&&t.$onAddToStage(s,this.$nestLevel+1),i&&t.dispatchEventWith(c.Event.ADDED,!0),s)for(var r=h.$EVENT_ADD_TO_STAGE_LIST;r.length;){var a=r.shift();a.$stage&&i&&a.dispatchEventWith(c.Event.ADDED_TO_STAGE)}var o=this.$displayList||this.$parentDisplayList;return this.assignParentDisplayList(t,o,o),t.$propagateFlagsDown(1648),this.$propagateFlagsUp(4),this.$childAdded(t,e),t},e.contains=function(t){for(;t;){if(t==this)return!0;t=t.$parent}return!1},e.getChildAt=function(t){return 0<=(t=0|+t)&&t<this.$children.length?this.$children[t]:(DEBUG&&c.$error(1007),null)},e.getChildIndex=function(t){return this.$children.indexOf(t)},e.getChildByName=function(t){for(var e,i=this.$children,n=i.length,s=0;s<n;s++)if((e=i[s]).name==t)return e;return null},e.removeChild=function(t){var e=this.$children.indexOf(t);return 0<=e?this.$doRemoveChild(e):(DEBUG&&c.$error(1006),null)},e.removeChildAt=function(t){return 0<=(t=0|+t)&&t<this.$children.length?this.$doRemoveChild(t):(DEBUG&&c.$error(1007),null)},e.$doRemoveChild=function(t,e){void 0===e&&(e=!0),t=0|+t;var i=this.$children,n=i[t];if(this.$childRemoved(n,t),e&&n.dispatchEventWith(c.Event.REMOVED,!0),this.$stage){n.$onRemoveFromStage();for(var s=h.$EVENT_REMOVE_FROM_STAGE_LIST;0<s.length;){var r=s.shift();e&&r.dispatchEventWith(c.Event.REMOVED_FROM_STAGE),r.$stage=null}}var a=this.$displayList||this.$parentDisplayList;this.assignParentDisplayList(n,a,null),n.$propagateFlagsDown(1648),n.$setParent(null);var o=i.indexOf(n);return i.splice(o,1),this.$propagateFlagsUp(4),n},e.setChildIndex=function(t,e){((e=0|+e)<0||e>=this.$children.length)&&(e=this.$children.length-1),this.doSetChildIndex(t,e)},e.doSetChildIndex=function(t,e){var i=this.$children.indexOf(t);i<0&&DEBUG&&c.$error(1006),i!=e&&(this.$childRemoved(t,i),this.$children.splice(i,1),this.$children.splice(e,0,t),this.$childAdded(t,e),t.$invalidateTransform(),this.$propagateFlagsUp(4))},e.swapChildrenAt=function(t,e){e=0|+e,0<=(t=0|+t)&&t<this.$children.length&&0<=e&&e<this.$children.length?this.doSwapChildrenAt(t,e):DEBUG&&c.$error(1007)},e.swapChildren=function(t,e){var i=this.$children.indexOf(t),n=this.$children.indexOf(e);-1==i||-1==n?DEBUG&&c.$error(1006):this.doSwapChildrenAt(i,n)},e.doSwapChildrenAt=function(t,e){if(e<t){var i=e;e=t,t=i}else if(t==e)return;var n=this.$children,s=n[t],r=n[e];this.$childRemoved(s,t),this.$childRemoved(r,e),n[t]=r,n[e]=s,this.$childAdded(r,t),this.$childAdded(s,e),s.$invalidateTransform(),r.$invalidateTransform(),this.$propagateFlagsUp(4)},e.removeChildren=function(){for(var t=this.$children.length-1;0<=t;t--)this.$doRemoveChild(t)},e.$childAdded=function(t,e){},e.$childRemoved=function(t,e){},e.$onAddToStage=function(t,e){u.prototype.$onAddToStage.call(this,t,e);var i=this.$children.length;e++;for(var n=0;n<i;n++){this.$children[n].$onAddToStage(t,e)}},e.$onRemoveFromStage=function(){u.prototype.$onRemoveFromStage.call(this);for(var t=this.$children,e=t.length,i=0;i<e;i++){t[i].$onRemoveFromStage()}},e.$measureChildBounds=function(t){var e=this.$children,i=e.length;if(0!=i){for(var n=0,s=0,r=0,a=0,o=!1,h=-1;h<i;h++){var l=-1==h?t:e[h].$getTransformedBounds(this,c.$TempRectangle);l.isEmpty()||(o?(n=Math.min(n,l.x),s=Math.max(s,l.x+l.width),r=Math.min(r,l.y),a=Math.max(a,l.y+l.height)):(o=!0,s=(n=l.x)+l.width,a=(r=l.y)+l.height))}t.setTo(n,r,s-n,a-r)}},t(e,"touchChildren",function(){return this.$getTouchChildren()},function(t){this.$setTouchChildren(!!t)}),e.$getTouchChildren=function(){return this.$touchChildren},e.$setTouchChildren=function(t){return this.$touchChildren!=t&&(this.$touchChildren=t,!0)},e.$invalidate=function(t){if(u.prototype.$invalidate.call(this,t),t){var e=this.$displayList||this.$parentDisplayList,i=this.$children;if(i)for(var n=i.length-1;0<=n;n--)this.markChildDirty(i[n],e)}},e.$invalidateTransform=function(){this.markChildDirty(this,this.$parentDisplayList)},e.markChildDirty=function(t,e){if(!t.$hasFlags(512)){t.$setFlags(512);var i=t.$displayList;if((i||t.$renderNode)&&e&&e.markDirty(i||t),!i){var n=t.$children;if(n)for(var s=n.length-1;0<=s;s--)this.markChildDirty(n[s],e)}}},e.$cacheAsBitmapChanged=function(){u.prototype.$cacheAsBitmapChanged.call(this);for(var t=this.$displayList||this.$parentDisplayList,e=this.$children,i=e.length-1;0<=i;i--)this.assignParentDisplayList(e[i],t,t)},e.assignParentDisplayList=function(t,e,i){t.$parentDisplayList=i,t.$setFlags(512);var n=t.$displayList;if((t.$renderNode||n)&&e&&e.markDirty(n||t),!n){var s=t.$children;if(s)for(var r=s.length-1;0<=r;r--)this.assignParentDisplayList(s[r],e,i)}},e.$hitTest=function(t,e){if(!this.$visible)return null;var i=this.$getInvertedConcatenatedMatrix(),n=i.a*t+i.c*e+i.tx,s=i.b*t+i.d*e+i.ty,r=this.$scrollRect?this.$scrollRect:this.$maskRect;if(r&&!r.contains(n,s))return null;if(this.$mask&&!this.$mask.$hitTest(t,e))return null;for(var a=this.$children,o=!1,h=a.length-1;0<=h;h--){var l=a[h];if(!l.$maskedObject){var c=l.$hitTest(t,e);if(c){if(o=!0,c.$touchEnabled)break;c=null}}}return c?this.$touchChildren?c:this:o?this:u.prototype.$hitTest.call(this,t,e)},e.$setAlpha=function(t){return(t=+t||0)!=this.$alpha&&(this.$alpha=t,this.$propagateFlagsDown(64),this.$invalidate(),this.$invalidateAllChildren(),!0)},e.$invalidateAllChildren=function(){var t=this.$children;if(t)for(var e=t.length-1;0<=e;e--){var i=t[e];i.$invalidate(),i.$children&&i.$invalidateAllChildren()}},h.$EVENT_ADD_TO_STAGE_LIST=[],h.$EVENT_REMOVE_FROM_STAGE_LIST=[],h}(c.DisplayObject);c.DisplayObjectContainer=t,c.registerClass(t,"egret.DisplayObjectContainer"),DEBUG&&c.$markReadOnly(t,"numChildren")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.LINEAR="linear",t.RADIAL="radial",t}();t.GradientType=e,t.registerClass(e,"egret.GradientType")}(egret||(egret={})),function(c){function u(t){return(t%=2*Math.PI)<0&&(t+=2*Math.PI),t}var t=function(t){function e(){t.call(this),this.lastX=0,this.lastY=0,this.fillPath=null,this.strokePath=null,this.topLeftStrokeWidth=0,this.bottomRightStrokeWidth=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.includeLastPosition=!0,this.$renderNode=new c.sys.GraphicsNode}__extends(e,t);var i=e.prototype;return i.$setTarget=function(t){this.targetDisplay&&(this.targetDisplay.$renderNode=null),t.$renderNode=this.$renderNode,this.targetDisplay=t},i.setStrokeWidth=function(t){switch(t){case 1:this.topLeftStrokeWidth=0,this.bottomRightStrokeWidth=1;break;case 3:this.topLeftStrokeWidth=1,this.bottomRightStrokeWidth=2;break;default:var e=0|Math.ceil(.5*t);this.topLeftStrokeWidth=e,this.bottomRightStrokeWidth=e}},i.beginFill=function(t,e){void 0===e&&(e=1),t=+t||0,e=+e||0,this.fillPath=this.$renderNode.beginFill(t,e,this.strokePath),this.fillPath.moveTo(this.lastX,this.lastY)},i.beginGradientFill=function(t,e,i,n,s){void 0===s&&(s=null),this.fillPath=this.$renderNode.beginGradientFill(t,e,i,n,s,this.strokePath),this.fillPath.moveTo(this.lastX,this.lastY)},i.endFill=function(){this.fillPath=null},i.lineStyle=function(t,e,i,n,s,r,a,o){void 0===t&&(t=NaN),void 0===e&&(e=0),void 0===i&&(i=1),void 0===n&&(n=!1),void 0===s&&(s="normal"),void 0===r&&(r=null),void 0===a&&(a=null),void 0===o&&(o=3),(t=+t||0)<=0?(this.strokePath=null,this.setStrokeWidth(0)):(e=+e||0,i=+i||0,o=+o||0,this.setStrokeWidth(t),this.strokePath=this.$renderNode.lineStyle(t,e,i,r,a,o),this.strokePath.moveTo(this.lastX,this.lastY))},i.drawRect=function(t,e,i,n){t=+t||0,e=+e||0,i=+i||0,n=+n||0;var s=this.fillPath,r=this.strokePath;s&&s.drawRect(t,e,i,n),r&&r.drawRect(t,e,i,n),this.extendBoundsByPoint(t+i,e+n),this.updatePosition(t,e)},i.drawRoundRect=function(t,e,i,n,s,r){t=+t||0,e=+e||0,i=+i||0,n=+n||0,s=+s||0,r=+r||0;var a=this.fillPath,o=this.strokePath;a&&a.drawRoundRect(t,e,i,n,s,r),o&&o.drawRoundRect(t,e,i,n,s,r);var h=t+i,l=e+n,c=l-(r?.5*r|0:.5*s|0);this.extendBoundsByPoint(t,e),this.extendBoundsByPoint(h,l),this.updatePosition(h,c)},i.drawCircle=function(t,e,i){t=+t||0,e=+e||0,i=+i||0;var n=this.fillPath,s=this.strokePath;n&&n.drawCircle(t,e,i),s&&s.drawCircle(t,e,i),this.extendBoundsByPoint(t-i,e-i),this.extendBoundsByPoint(t+i,e+i),this.updatePosition(t+i,e)},i.drawEllipse=function(t,e,i,n){t=+t||0,e=+e||0,i=+i||0,n=+n||0;var s=this.fillPath,r=this.strokePath;s&&s.drawEllipse(t,e,i,n),r&&r.drawEllipse(t,e,i,n),this.extendBoundsByPoint(t+i,e+n),this.updatePosition(t,e)},i.moveTo=function(t,e){t=+t||0,e=+e||0;var i=this.fillPath,n=this.strokePath;i&&i.moveTo(t,e),n&&n.moveTo(t,e),this.includeLastPosition=!1,this.lastX=t,this.lastY=e},i.lineTo=function(t,e){t=+t||0,e=+e||0;var i=this.fillPath,n=this.strokePath;i&&i.lineTo(t,e),n&&n.lineTo(t,e),this.updatePosition(t,e)},i.curveTo=function(t,e,i,n){t=+t||0,e=+e||0,i=+i||0,n=+n||0;var s=this.fillPath,r=this.strokePath;s&&s.curveTo(t,e,i,n),r&&r.curveTo(t,e,i,n),this.extendBoundsByPoint(t,e),this.extendBoundsByPoint(i,n),this.updatePosition(i,n)},i.cubicCurveTo=function(t,e,i,n,s,r){t=+t||0,e=+e||0,i=+i||0,n=+n||0,s=+s||0,r=+r||0;var a=this.fillPath,o=this.strokePath;a&&a.cubicCurveTo(t,e,i,n,s,r),o&&o.cubicCurveTo(t,e,i,n,s,r),this.extendBoundsByPoint(t,e),this.extendBoundsByPoint(i,n),this.extendBoundsByPoint(s,r),this.updatePosition(s,r)},i.drawArc=function(t,e,i,n,s,r){if(!(i<0||n===s)){t=+t||0,e=+e||0,i=+i||0,s=+s||0,r=!!r,n=u(n=+n||0),s=u(s);var a=this.fillPath,o=this.strokePath;a&&a.drawArc(t,e,i,n,s,r),o&&o.drawArc(t,e,i,n,s,r),r?this.arcBounds(t,e,i,s,n):this.arcBounds(t,e,i,n,s);var h=t+c.$cos(s)*i,l=e+c.$sin(s)*i;this.updatePosition(h,l)}},i.arcBounds=function(t,e,i,n,s){var r=Math.PI;if(Math.abs(n-s)<.01)return this.extendBoundsByPoint(t-i,e-i),void this.extendBoundsByPoint(t+i,e+i);s<n&&(s+=2*r);for(var a=Math.cos(n)*i,o=Math.cos(s)*i,h=Math.min(a,o),l=Math.max(a,o),c=Math.sin(n)*i,u=Math.sin(s)*i,d=Math.min(c,u),f=Math.max(c,u),g=n/(.5*r),p=s/(.5*r),$=Math.ceil(g);$<=p;$++)switch($%4){case 0:l=i;break;case 1:f=i;break;case 2:h=-i;break;case 3:d=-i}h=Math.floor(h),d=Math.floor(d),l=Math.ceil(l),f=Math.ceil(f),this.extendBoundsByPoint(h+t,d+e),this.extendBoundsByPoint(l+t,f+e)},i.clear=function(){this.$renderNode.clear(),this.updatePosition(0,0),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},i.extendBoundsByPoint=function(t,e){this.extendBoundsByX(t),this.extendBoundsByY(e)},i.extendBoundsByX=function(t){this.minX=Math.min(this.minX,t-this.topLeftStrokeWidth),this.maxX=Math.max(this.maxX,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},i.extendBoundsByY=function(t){this.minY=Math.min(this.minY,t-this.topLeftStrokeWidth),this.maxY=Math.max(this.maxY,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},i.updateNodeBounds=function(){var t=this.$renderNode;t.x=this.minX,t.y=this.minY,t.width=Math.ceil(this.maxX-this.minX),t.height=Math.ceil(this.maxY-this.minY)},i.updatePosition=function(t,e){this.includeLastPosition||(this.extendBoundsByPoint(this.lastX,this.lastY),this.includeLastPosition=!0),this.lastX=t,this.lastY=e,this.extendBoundsByPoint(t,e),this.targetDisplay.$invalidateContentBounds()},i.$measureContentBounds=function(t){this.minX===1/0?t.setEmpty():t.setTo(this.minX,this.minY,this.maxX-this.minX,this.maxY-this.minY)},i.$hitTest=function(t,e){var i=this.targetDisplay,n=i.$getInvertedConcatenatedMatrix(),s=n.a*t+n.c*e+n.tx,r=n.b*t+n.d*e+n.ty,a=c.sys.hitTestBuffer;a.resize(3,3);var o=this.$renderNode,h=c.Matrix.create();h.identity(),h.translate(1-s,1-r),c.sys.systemRenderer.drawNodeToBuffer(o,a,h,!0),c.Matrix.release(h);try{var l=a.getPixel(1,1)}catch(t){throw new Error(c.sys.tr(1039))}return 0===l[3]?null:i},e}(c.HashObject);c.Graphics=t,c.registerClass(t,"egret.Graphics")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.BEVEL="bevel",t.MITER="miter",t.ROUND="round",t}();t.JointStyle=e,t.registerClass(e,"egret.JointStyle")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.AUTO="auto",t.PORTRAIT="portrait",t.LANDSCAPE="landscape",t.LANDSCAPE_FLIPPED="landscapeFlipped",t}();t.OrientationMode=e,t.registerClass(e,"egret.OrientationMode")}(egret||(egret={})),function(d){d.$TextureScaleFactor=1;var t=function(t){function u(){t.call(this),this._bitmapX=0,this._bitmapY=0,this._bitmapWidth=0,this._bitmapHeight=0,this._offsetX=0,this._offsetY=0,this._textureWidth=0,this._textureHeight=0,this._sourceWidth=0,this._sourceHeight=0,this._bitmapData=null}__extends(u,t);var e=__define,i=u.prototype;return e(i,"textureWidth",function(){return this.$getTextureWidth()}),i.$getTextureWidth=function(){return this._textureWidth},e(i,"textureHeight",function(){return this.$getTextureHeight()}),i.$getTextureHeight=function(){return this._textureHeight},i.$getScaleBitmapWidth=function(){return this._bitmapWidth*d.$TextureScaleFactor},i.$getScaleBitmapHeight=function(){return this._bitmapHeight*d.$TextureScaleFactor},e(i,"bitmapData",function(){return this._bitmapData}),i._setBitmapData=function(t){var e=(this._bitmapData=t).width*d.$TextureScaleFactor,i=t.height*d.$TextureScaleFactor;this.$initData(0,0,e,i,0,0,e,i,e,i)},i.$initData=function(t,e,i,n,s,r,a,o,h,l){var c=d.$TextureScaleFactor;this._bitmapX=t/c,this._bitmapY=e/c,this._bitmapWidth=i/c,this._bitmapHeight=n/c,this._offsetX=s,this._offsetY=r,this._textureWidth=a,this._textureHeight=o,this._sourceWidth=h,this._sourceHeight=l,u.$invalidate(this)},i.getPixel32=function(t,e){throw new Error},i.toDataURL=function(t,e){throw new Error},i.saveToFile=function(t,e,i){throw new Error},i.dispose=function(){this._bitmapData&&(this._bitmapData.dispose&&this._bitmapData.dispose(),u.$dispose(this),this._bitmapData=null)},u.$addDisplayObject=function(t,e){var i;if(i=e._bitmapData&&e._bitmapData.hashCode?e._bitmapData.hashCode:e.hashCode)if(u._displayList[i]){var n=u._displayList[i];n.indexOf(t)<0&&n.push(t)}else u._displayList[i]=[t]},u.$removeDisplayObject=function(t,e){var i;if((i=e._bitmapData&&e._bitmapData.hashCode?e._bitmapData.hashCode:e.hashCode)&&u._displayList[i]){var n=u._displayList[i],s=n.indexOf(t);0<=s&&n.splice(s)}},u.$invalidate=function(t){var e;if((e=t._bitmapData&&t._bitmapData.hashCode?t._bitmapData.hashCode:t.hashCode)&&u._displayList[e])for(var i=u._displayList[e],n=0;n<i.length;n++)i[n]instanceof d.Bitmap&&i[n].$refreshImageData(),i[n].$invalidateContentBounds()},u.$dispose=function(t){var e;if((e=t._bitmapData&&t._bitmapData.hashCode?t._bitmapData.hashCode:t.hashCode)&&u._displayList[e]){for(var i=u._displayList[e],n=0;n<i.length;n++)i[n]instanceof d.Bitmap&&(i[n].$Bitmap[1]=null),i[n].$invalidateContentBounds();delete u._displayList[e]}},u._displayList={},u}(d.HashObject);d.Texture=t,d.registerClass(t,"egret.Texture"),DEBUG&&(d.$markReadOnly(t,"textureWidth"),d.$markReadOnly(t,"textureHeight"))}(egret||(egret={})),function(h){var t=function(t){function e(){t.call(this),this.renderBuffer=new h.sys.RenderBuffer,this._setBitmapData(this.renderBuffer.surface)}__extends(e,t);var i=e.prototype;return i.drawToTexture=function(t,e,i){if(void 0===i&&(i=1),e&&(0==e.width||0==e.height))return!1;var n=e||t.$getOriginalBounds();if(0==n.width||0==n.height)return!1;i/=h.$TextureScaleFactor;var s=(n.x+n.width)*i,r=(n.y+n.height)*i;e&&(s=n.width*i,r=n.height*i);var a=this.renderBuffer;if(!a)return!1;a.resize(s,r);var o=h.Matrix.create();return o.identity(),e&&o.translate(-e.x,-e.y),o.scale(i,i),h.sys.systemRenderer.render(t,a,o,null,!0),h.Matrix.release(o),this.$initData(0,0,s,r,0,0,s,r,s,r),!0},i.getPixel32=function(t,e){var i;if(this.renderBuffer){var n=h.$TextureScaleFactor;t=Math.round(t/n),e=Math.round(e/n),i=this.renderBuffer.getPixel(t,e)}return i},i.dispose=function(){t.prototype.dispose.call(this),this.renderBuffer=null},e}(h.Texture);h.RenderTexture=t,h.registerClass(t,"egret.RenderTexture")}(egret||(egret={})),function(i){var t=function(n){function t(){n.call(this),this.$graphics=new i.Graphics,this.$graphics.$setTarget(this)}__extends(t,n);var e=t.prototype;return __define(e,"graphics",function(){return this.$graphics}),e.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},e.$hitTest=function(t,e){var i=n.prototype.$hitTest.call(this,t,e);return i==this&&(i=this.$graphics.$hitTest(t,e)),i},t}(i.DisplayObject);i.Shape=t,i.registerClass(t,"egret.Shape"),DEBUG&&i.$markReadOnly(t,"graphics")}(egret||(egret={})),function(u){var t=function(t){function e(){t.call(this),this.$graphics=new u.Graphics,this.$graphics.$setTarget(this)}__extends(e,t);var i=e.prototype;return __define(i,"graphics",function(){return this.$graphics}),i.$hitTest=function(t,e){if(!this.$visible)return null;var i=this.$getInvertedConcatenatedMatrix(),n=i.a*t+i.c*e+i.tx,s=i.b*t+i.d*e+i.ty,r=this.$scrollRect?this.$scrollRect:this.$maskRect;if(r&&!r.contains(n,s))return null;if(this.$mask&&!this.$mask.$hitTest(t,e))return null;for(var a=this.$children,o=!1,h=a.length-1;0<=h;h--){var l=a[h];if(!l.$maskedObject){var c=l.$hitTest(t,e);if(c){if(o=!0,c.$touchEnabled)break;c=null}}}return c?this.$touchChildren?c:this:o?this:((c=u.DisplayObject.prototype.$hitTest.call(this,t,e))&&(c=this.$graphics.$hitTest(t,e)),c)},i.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},e}(u.DisplayObjectContainer);u.Sprite=t,u.registerClass(t,"egret.Sprite")}(egret||(egret={})),function(c){var t=function(e){function t(t){e.call(this),this._bitmapX=0,this._bitmapY=0,this._textureMap={},this.$texture=t,this._bitmapX=t._bitmapX-t._offsetX,this._bitmapY=t._bitmapY-t._offsetY}__extends(t,e);var i=t.prototype;return i.getTexture=function(t){return this._textureMap[t]},i.createTexture=function(t,e,i,n,s,r,a,o,h){void 0===r&&(r=0),void 0===a&&(a=0),void 0===o&&(o=r+n),void 0===h&&(h=a+s);var l=new c.Texture;return l._bitmapData=this.$texture._bitmapData,l.$initData(this._bitmapX+e,this._bitmapY+i,n,s,r,a,o,h,this.$texture._sourceWidth,this.$texture._sourceHeight),this._textureMap[t]=l},i.dispose=function(){this.$texture&&this.$texture.dispose()},t}(c.HashObject);c.SpriteSheet=t,c.registerClass(t,"egret.SpriteSheet")}(egret||(egret={})),function(s){var t=function(t){function e(){t.call(this),this.$stageWidth=0,this.$stageHeight=0,this.implMap={},this.$scaleMode=s.StageScaleMode.SHOW_ALL,this.$orientation=s.OrientationMode.AUTO,this.$maxTouches=99,this.$dirtyRegionPolicy=s.DirtyRegionPolicy.ON,(this.$stage=this).$nestLevel=1}__extends(e,t);var i=__define,n=e.prototype;return i(n,"frameRate",function(){return s.sys.$ticker.$frameRate},function(t){s.sys.$ticker.$setFrameRate(t)}),i(n,"stageWidth",function(){return this.$stageWidth}),i(n,"stageHeight",function(){return this.$stageHeight}),n.invalidate=function(){s.sys.$invalidateRenderFlag=!0},n.registerImplementation=function(t,e){this.implMap[t]=e},n.getImplementation=function(t){return this.implMap[t]},i(n,"scaleMode",function(){return this.$scaleMode},function(t){this.$scaleMode!=t&&(this.$scaleMode=t,this.$screen.updateScreenSize())}),i(n,"orientation",function(){return this.$orientation},function(t){this.$orientation!=t&&(this.$orientation=t,this.$screen.updateScreenSize())}),i(n,"textureScaleFactor",function(){return s.$TextureScaleFactor},function(t){s.$TextureScaleFactor=t}),i(n,"maxTouches",function(){return this.$maxTouches},function(t){this.$maxTouches!=t&&(this.$maxTouches=t,this.$screen.updateMaxTouches())}),i(n,"dirtyRegionPolicy",function(){return this.$dirtyRegionPolicy},function(t){this.$dirtyRegionPolicy!=t&&(this.$dirtyRegionPolicy=t,this.$displayList.setDirtyRegionPolicy(t))}),n.setContentSize=function(t,e){this.$screen.setContentSize(t,e)},e}(s.DisplayObjectContainer);s.Stage=t,s.registerClass(t,"egret.Stage"),DEBUG&&(s.$markCannotUse(t,"alpha",1),s.$markCannotUse(t,"visible",!0),s.$markCannotUse(t,"x",0),s.$markCannotUse(t,"y",0),s.$markCannotUse(t,"scaleX",1),s.$markCannotUse(t,"scaleY",1),s.$markCannotUse(t,"rotation",0),s.$markCannotUse(t,"cacheAsBitmap",!1),s.$markCannotUse(t,"scrollRect",null),s.$markCannotUse(t,"filters",null),s.$markCannotUse(t,"blendMode",null),s.$markCannotUse(t,"touchEnabled",!0),s.$markCannotUse(t,"matrix",null)),DEBUG&&(s.$markReadOnly(t,"stageWidth"),s.$markReadOnly(t,"stageHeight"))}(egret||(egret={})),function(t){var e=function(s){function o(t,e,i,n){s.call(this),this.$eventPhase=2,this.$currentTarget=null,this.$target=null,this.$isDefaultPrevented=!1,this.$isPropagationStopped=!1,this.$isPropagationImmediateStopped=!1,this.$type=t,this.$bubbles=!!e,this.$cancelable=!!i,this.data=n}__extends(o,s);var t=__define,e=o.prototype;return t(e,"type",function(){return this.$type}),t(e,"bubbles",function(){return this.$bubbles}),t(e,"cancelable",function(){return this.$cancelable}),t(e,"eventPhase",function(){return this.$eventPhase}),t(e,"currentTarget",function(){return this.$currentTarget}),t(e,"target",function(){return this.$target}),e.$setTarget=function(t){return this.$target=t,!0},e.isDefaultPrevented=function(){return this.$isDefaultPrevented},e.preventDefault=function(){this.$cancelable&&(this.$isDefaultPrevented=!0)},e.stopPropagation=function(){this.$bubbles&&(this.$isPropagationStopped=!0)},e.stopImmediatePropagation=function(){this.$bubbles&&(this.$isPropagationImmediateStopped=!0)},e.clean=function(){this.data=this.$currentTarget=null,this.$setTarget(null)},o.dispatchEvent=function(t,e,i,n){void 0===i&&(i=!1);var s=o.create(o,e,i),r=o._getPropertyData(o);null!=n&&(r.data=n);var a=t.dispatchEvent(s);return o.release(s),a},o._getPropertyData=function(t){var e=t._props;return e||(e=t._props={}),e},o.create=function(t,e,i,n){var s=t.eventPool;if(s||(s=t.eventPool=[]),s.length){var r=s.pop();return r.$type=e,r.$bubbles=!!i,r.$cancelable=!!n,r.$isDefaultPrevented=!1,r.$isPropagationStopped=!1,r.$isPropagationImmediateStopped=!1,r.$eventPhase=2,r}return new t(e,i,n)},o.release=function(t){t.clean(),Object.getPrototypeOf(t).constructor.eventPool.push(t)},o.ADDED_TO_STAGE="addedToStage",o.REMOVED_FROM_STAGE="removedFromStage",o.ADDED="added",o.REMOVED="removed",o.ENTER_FRAME="enterFrame",o.RENDER="render",o.RESIZE="resize",o.CHANGE="change",o.CHANGING="changing",o.COMPLETE="complete",o.LOOP_COMPLETE="loopComplete",o.FOCUS_IN="focusIn",o.FOCUS_OUT="focusOut",o.ENDED="ended",o.ACTIVATE="activate",o.DEACTIVATE="deactivate",o.CLOSE="close",o.CONNECT="connect",o.LEAVE_STAGE="leaveStage",o.SOUND_COMPLETE="soundComplete",o}(t.HashObject);t.Event=e,t.registerClass(e,"egret.Event"),DEBUG&&(t.$markReadOnly(e,"type"),t.$markReadOnly(e,"bubbles"),t.$markReadOnly(e,"cancelable"),t.$markReadOnly(e,"eventPhase"),t.$markReadOnly(e,"currentTarget"),t.$markReadOnly(e,"target"))}(egret||(egret={})),function(t){var e=function(n){function t(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),n.call(this,t,e,i)}__extends(t,n);return t.FOCUS_IN="focusIn",t.FOCUS_OUT="focusOut",t}(t.Event);t.FocusEvent=e,t.registerClass(e,"egret.FocusEvent")}(egret||(egret={})),function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);return e.PERMISSION_DENIED="permissionDenied",e.UNAVAILABLE="unavailable",e}(t.Event);t.GeolocationEvent=e,t.registerClass(e,"egret.GeolocationEvent")}(egret||(egret={})),function(r){var t=function(n){function s(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),n.call(this,t,e,i),this._status=0}return __extends(s,n),__define(s.prototype,"status",function(){return this._status}),s.dispatchHTTPStatusEvent=function(t,e){var i=r.Event.create(s,s.HTTP_STATUS);i._status=e;var n=t.dispatchEvent(i);return r.Event.release(i),n},s.HTTP_STATUS="httpStatus",s}(r.Event);r.HTTPStatusEvent=t,r.registerClass(t,"egret.HTTPStatusEvent")}(egret||(egret={})),function(r){var t=function(n){function s(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),n.call(this,t,e,i)}__extends(s,n);return s.dispatchIOErrorEvent=function(t){var e=r.Event.create(s,s.IO_ERROR),i=t.dispatchEvent(e);return r.Event.release(e),i},s.IO_ERROR="ioError",s}(r.Event);r.IOErrorEvent=t,r.registerClass(t,"egret.IOErrorEvent")}(egret||(egret={})),function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);return e}(t.Event);t.MotionEvent=e,t.registerClass(e,"egret.MotionEvent")}(egret||(egret={})),function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);return e}(t.Event);t.OrientationEvent=e,t.registerClass(e,"egret.OrientationEvent")}(egret||(egret={})),function(o){var t=function(r){function a(t,e,i,n,s){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=0),void 0===s&&(s=0),r.call(this,t,e,i),this.bytesLoaded=0,this.bytesTotal=0,this.bytesLoaded=n,this.bytesTotal=s}__extends(a,r);return a.dispatchProgressEvent=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var s=o.Event.create(a,e);s.bytesLoaded=i,s.bytesTotal=n;var r=t.dispatchEvent(s);return o.Event.release(s),r},a.PROGRESS="progress",a.SOCKET_DATA="socketData",a}(o.Event);o.ProgressEvent=t,o.registerClass(t,"egret.ProgressEvent")}(egret||(egret={})),function(r){var t=function(n){function s(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),n.call(this,t,e,i)}__extends(s,n);return s.dispatchStageOrientationEvent=function(t,e){var i=r.Event.create(s,e),n=t.dispatchEvent(i);return r.Event.release(i),n},s.ORIENTATION_CHANGE="orientationChange",s}(r.Event);r.StageOrientationEvent=t,r.registerClass(t,"egret.StageOrientationEvent")}(egret||(egret={})),function(a){var t=function(s){function r(t,e,i,n){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===n&&(n=""),s.call(this,t,e,i),this.text=n}__extends(r,s);return r.dispatchTextEvent=function(t,e,i){var n=a.Event.create(r,e);n.text=i;var s=t.dispatchEvent(n);return a.Event.release(n),s},r.LINK="link",r}(a.Event);a.TextEvent=t,a.registerClass(t,"egret.TextEvent")}(egret||(egret={})),function(o){var t=function(n){function a(t,e,i){n.call(this,t,e,i)}__extends(a,n);return a.prototype.updateAfterEvent=function(){o.sys.$requestRenderingFlag=!0},a.dispatchTimerEvent=function(t,e,i,n){var s=o.Event.create(a,e,i,n),r=t.dispatchEvent(s);return o.Event.release(s),r},a.TIMER="timer",a.TIMER_COMPLETE="timerComplete",a}(o.Event);o.TimerEvent=t,o.registerClass(t,"egret.TimerEvent")}(egret||(egret={})),function(n){var r=[],a=Math.PI/180,t=function(i){function s(t,e){void 0===t&&(t=0),void 0===e&&(e=0),i.call(this),this.x=t,this.y=e}__extends(s,i);var t=__define,e=s.prototype;return s.release=function(t){t&&r.push(t)},s.create=function(t,e){var i=r.pop();return i||(i=new s),i.setTo(t,e)},t(e,"length",function(){return Math.sqrt(this.x*this.x+this.y*this.y)}),e.setTo=function(t,e){return this.x=t,this.y=e,this},e.clone=function(){return new s(this.x,this.y)},e.equals=function(t){return this.x==t.x&&this.y==t.y},s.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},e.copyFrom=function(t){this.x=t.x,this.y=t.y},e.add=function(t){return new s(this.x+t.x,this.y+t.y)},s.interpolate=function(t,e,i){var n=1-i;return new s(t.x*i+e.x*n,t.y*i+e.y*n)},e.normalize=function(t){if(0!=this.x||0!=this.y){var e=t/this.length;this.x*=e,this.y*=e}},e.offset=function(t,e){this.x+=t,this.y+=e},s.polar=function(t,e){return new s(t*n.NumberUtils.cos(e/a),t*n.NumberUtils.sin(e/a))},e.subtract=function(t){return new s(this.x-t.x,this.y-t.y)},e.toString=function(){return"(x="+this.x+", y="+this.y+")"},s}(n.HashObject);n.Point=t,n.registerClass(t,"egret.Point"),DEBUG&&n.$markReadOnly(t,"length"),n.$TempPoint=new t}(egret||(egret={})),function(u){var i=new u.Point,t=function(a){function c(t,e,i,n,s,r){a.call(this,t,e,i),this.targetChanged=!0,this.touchDown=!1,this.$initTo(n,s,r)}__extends(c,a);var t=__define,e=c.prototype;return e.$initTo=function(t,e,i){this.touchPointID=+i||0,this.$stageX=+t||0,this.$stageY=+e||0},t(e,"stageX",function(){return this.$stageX}),t(e,"stageY",function(){return this.$stageY}),t(e,"localX",function(){return this.targetChanged&&this.getLocalXY(),this._localX}),t(e,"localY",function(){return this.targetChanged&&this.getLocalXY(),this._localY}),e.getLocalXY=function(){this.targetChanged=!1,this.$target.$getInvertedConcatenatedMatrix().transformPoint(this.$stageX,this.$stageY,i),this._localX=i.x,this._localY=i.y},e.$setTarget=function(t){return this.$target=t,this.targetChanged=!!t,!0},e.updateAfterEvent=function(){u.sys.$requestRenderingFlag=!0},c.dispatchTouchEvent=function(t,e,i,n,s,r,a,o){if(void 0===o&&(o=!1),!i&&!t.hasEventListener(e))return!0;var h=u.Event.create(c,e,i,n);h.$initTo(s,r,a),h.touchDown=o;var l=t.dispatchEvent(h);return u.Event.release(h),l},c.TOUCH_MOVE="touchMove",c.TOUCH_BEGIN="touchBegin",c.TOUCH_END="touchEnd",c.TOUCH_CANCEL="touchcancel",c.TOUCH_TAP="touchTap",c.TOUCH_RELEASE_OUTSIDE="touchReleaseOutside",c.TOUCH_ROLL_OUT="touchRollOut",c.TOUCH_ROLL_OVER="touchRollOver",c}(u.Event);u.TouchEvent=t,u.registerClass(t,"egret.TouchEvent"),DEBUG&&(u.$markReadOnly(t,"stageX"),u.$markReadOnly(t,"stageY"),u.$markReadOnly(t,"localX"),u.$markReadOnly(t,"localY"))}(egret||(egret={})),egret||(egret={}),function(t){var e=function(t){function e(){t.apply(this,arguments),this.type=null}__extends(e,t);return e}(t.HashObject);t.Filter=e,t.registerClass(e,"egret.Filter")}(egret||(egret={})),function(t){var e=function(i){function t(t,e){i.call(this),this.blurX=t,this.blurY=e,this.type="blur"}__extends(t,i);return t}(t.Filter);t.BlurFilter=e,t.registerClass(e,"egret.BlurFilter")}(egret||(egret={})),function(t){var e=function(e){function t(t){void 0===t&&(t=null),e.call(this),this.$matrix=[],this.matrix2=[],this.type="colorTransform",this.setMatrix(t)}__extends(t,e);var i=t.prototype;return __define(i,"matrix",function(){for(var t=0;t<20;t++)this.matrix2[t]=this.$matrix[t];return this.matrix2},function(t){this.setMatrix(t)}),i.setMatrix=function(t){for(var e=0;e<20;e++)this.$matrix[e]=t&&t[e]||0},t}(t.Filter);t.ColorMatrixFilter=e,t.registerClass(e,"egret.ColorMatrixFilter")}(egret||(egret={})),function(t){var e=function(h){function t(t,e,i,n,s,r,a,o){void 0===t&&(t=16711680),void 0===e&&(e=1),void 0===i&&(i=6),void 0===n&&(n=6),void 0===s&&(s=2),void 0===r&&(r=1),void 0===a&&(a=!1),void 0===o&&(o=!1),h.call(this),this.color=t,this.alpha=e,this.blurX=i,this.blurY=n,this.strength=s,this.quality=r,this.inner=a,this.knockout=o,this.type="glow",this.$blue=255&t,this.$green=(65280&t)>>8,this.$red=t>>16}__extends(t,h);return t}(t.Filter);t.GlowFilter=e,t.registerClass(e,"egret.GlowFilter")}(egret||(egret={})),function(t){var e=function(u){function t(t,e,i,n,s,r,a,o,h,l,c){void 0===t&&(t=4),void 0===e&&(e=45),void 0===i&&(i=0),void 0===n&&(n=1),void 0===s&&(s=4),void 0===r&&(r=4),void 0===a&&(a=1),void 0===o&&(o=1),void 0===h&&(h=!1),void 0===l&&(l=!1),void 0===c&&(c=!1),u.call(this,i,n,s,r,a,o,h,l),this.distance=t,this.angle=e}__extends(t,u);return t}(t.GlowFilter);t.DropShadowFilter=e,t.registerClass(e,"egret.DropShadowFilter")}(egret||(egret={})),function(h){var i=Math.PI,e=i/2,n=i+e,o=2*i,l=Math.PI/180;function c(t){switch(t){case e:case-n:return 0;case i:case-i:return-1;case n:case-e:return 0;default:return Math.cos(t)}}function u(t){switch(t){case e:case-n:return 1;case i:case-i:return 0;case n:case-e:return-1;default:return Math.sin(t)}}h.$cos=c,h.$sin=u;var s=[],t=function(a){function e(t,e,i,n,s,r){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===s&&(s=0),void 0===r&&(r=0),a.call(this),this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=r}__extends(e,a);var t=e.prototype;return e.release=function(t){t&&s.push(t)},e.create=function(){var t=s.pop();return t||(t=new e),t},t.clone=function(){return new e(this.a,this.b,this.c,this.d,this.tx,this.ty)},t.concat=function(t){var e=this.a*t.a,i=0,n=0,s=this.d*t.d,r=this.tx*t.a+t.tx,a=this.ty*t.d+t.ty;0===this.b&&0===this.c&&0===t.b&&0===t.c||(e+=this.b*t.c,s+=this.c*t.b,i+=this.a*t.b+this.b*t.d,n+=this.c*t.a+this.d*t.c,r+=this.ty*t.c,a+=this.tx*t.b),this.a=e,this.b=i,this.c=n,this.d=s,this.tx=r,this.ty=a},t.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.identity=function(){this.a=this.d=1,this.b=this.c=this.tx=this.ty=0},t.invert=function(){this.$invertInto(this)},t.$invertInto=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,r=this.tx,a=this.ty;if(0==i&&0==n)return t.b=t.c=0,void(0==e||0==s?t.a=t.d=t.tx=t.ty=0:(e=t.a=1/e,s=t.d=1/s,t.tx=-e*r,t.ty=-s*a));var o=e*s-i*n;if(0!=o){o=1/o;var h=t.a=s*o;i=t.b=-i*o,n=t.c=-n*o,s=t.d=e*o,t.tx=-(h*r+n*a),t.ty=-(i*r+s*a)}else t.identity()},t.rotate=function(t){if(0!==(t=+t)){var e=c(t),i=u(t),n=this.a,s=this.b,r=this.c,a=this.d,o=this.tx,h=this.ty;this.a=n*e-s*i,this.b=n*i+s*e,this.c=r*e-a*i,this.d=r*i+a*e,this.tx=o*e-h*i,this.ty=o*i+h*e}},t.scale=function(t,e){1!==t&&(this.a*=t,this.c*=t,this.tx*=t),1!==e&&(this.b*=e,this.d*=e,this.ty*=e)},t.setTo=function(t,e,i,n,s,r){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=r,this},t.transformPoint=function(t,e,i){var n=this.a*t+this.c*e+this.tx,s=this.b*t+this.d*e+this.ty;return i?(i.setTo(n,s),i):new h.Point(n,s)},t.translate=function(t,e){this.tx+=t,this.ty+=e},t.equals=function(t){return this.a==t.a&&this.b==t.b&&this.c==t.c&&this.d==t.d&&this.tx==t.tx&&this.ty==t.ty},t.prepend=function(t,e,i,n,s,r){var a=this.tx;if(1!=t||0!=e||0!=i||1!=n){var o=this.a,h=this.c;this.a=o*t+this.b*i,this.b=o*e+this.b*n,this.c=h*t+this.d*i,this.d=h*e+this.d*n}return this.tx=a*t+this.ty*i+s,this.ty=a*e+this.ty*n+r,this},t.append=function(t,e,i,n,s,r){var a=this.a,o=this.b,h=this.c,l=this.d;return 1==t&&0==e&&0==i&&1==n||(this.a=t*a+e*h,this.b=t*o+e*l,this.c=i*a+n*h,this.d=i*o+n*l),this.tx=s*a+r*h+this.tx,this.ty=s*o+r*l+this.ty,this},t.deltaTransformPoint=function(t){var e=this.a*t.x+this.c*t.y,i=this.b*t.x+this.d*t.y;return new h.Point(e,i)},t.toString=function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"},t.createBox=function(t,e,i,n,s){void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0);var r=this;if(0!==i){i/=l;var a=h.NumberUtils.cos(i),o=h.NumberUtils.sin(i);r.a=a*t,r.b=o*e,r.c=-o*t,r.d=a*e}else r.a=t,r.b=0,r.c=0,r.d=e;r.tx=n,r.ty=s},t.createGradientBox=function(t,e,i,n,s){void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=0),this.createBox(t/1638.4,e/1638.4,i,n+t/2,s+e/2)},t.$transformBounds=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,r=this.tx,a=this.ty,o=t.x,h=t.y,l=o+t.width,c=h+t.height,u=e*o+n*h+r,d=i*o+s*h+a,f=e*l+n*h+r,g=i*l+s*h+a,p=e*l+n*c+r,$=i*l+s*c+a,v=e*o+n*c+r,y=i*o+s*c+a,m=0;f<u&&(m=u,u=f,f=m),v<p&&(m=p,p=v,v=m),t.x=Math.floor(u<p?u:p),t.width=Math.ceil((v<f?f:v)-t.x),g<d&&(m=d,d=g,g=m),y<$&&(m=$,$=y,y=m),t.y=Math.floor(d<$?d:$),t.height=Math.ceil((y<g?g:y)-t.y)},t.getDeterminant=function(){return this.a*this.d-this.b*this.c},t.$getScaleX=function(){var t=this;if(1==t.a&&0==t.b)return 1;var e=Math.sqrt(t.a*t.a+t.b*t.b);return this.getDeterminant()<0?-e:e},t.$getScaleY=function(){var t=this;if(0==t.c&&1==t.d)return 1;var e=Math.sqrt(t.c*t.c+t.d*t.d);return this.getDeterminant()<0?-e:e},t.$getSkewX=function(){return Math.atan2(this.d,this.c)-i/2},t.$getSkewY=function(){return Math.atan2(this.b,this.a)},t.$updateScaleAndRotation=function(t,e,i,n){if(!(0!=i&&i!=o||0!=n&&n!=o))return this.a=t,this.b=this.c=0,void(this.d=e);var s=c(i),r=u(i);i==n?(this.a=s*t,this.b=r*t):(this.a=c(n)*t,this.b=u(n)*t),this.c=-r*e,this.d=s*e},t.$preMultiplyInto=function(t,e){var i=t.a*this.a,n=0,s=0,r=t.d*this.d,a=t.tx*this.a+this.tx,o=t.ty*this.d+this.ty;0===t.b&&0===t.c&&0===this.b&&0===this.c||(i+=t.b*this.c,r+=t.c*this.b,n+=t.a*this.b+t.b*this.d,s+=t.c*this.a+t.d*this.c,a+=t.ty*this.c,o+=t.tx*this.b),e.a=i,e.b=n,e.c=s,e.d=r,e.tx=a,e.ty=o},e}(h.HashObject);h.Matrix=t,h.registerClass(t,"egret.Matrix"),h.$TempMatrix=new t}(egret||(egret={})),function(n){var r=[],t=function(s){function e(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),s.call(this),this.x=t,this.y=e,this.width=i,this.height=n}__extends(e,s);var t=__define,i=e.prototype;return e.release=function(t){t&&r.push(t)},e.create=function(){var t=r.pop();return t||(t=new e),t},t(i,"right",function(){return this.x+this.width},function(t){this.width=t-this.x}),t(i,"bottom",function(){return this.y+this.height},function(t){this.height=t-this.y}),t(i,"left",function(){return this.x},function(t){this.width+=this.x-t,this.x=t}),t(i,"top",function(){return this.y},function(t){this.height+=this.y-t,this.y=t}),t(i,"topLeft",function(){return new n.Point(this.left,this.top)},function(t){this.top=t.y,this.left=t.x}),t(i,"bottomRight",function(){return new n.Point(this.right,this.bottom)},function(t){this.bottom=t.y,this.right=t.x}),i.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},i.setTo=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},i.contains=function(t,e){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e},i.intersection=function(t){return this.clone().$intersectInPlace(t)},i.inflate=function(t,e){this.x-=t,this.width+=2*t,this.y-=e,this.height+=2*e},i.$intersectInPlace=function(t){var e=this.x,i=this.y,n=t.x,s=t.y,r=Math.max(e,n),a=Math.min(e+this.width,n+t.width);if(r<=a){var o=Math.max(i,s),h=Math.min(i+this.height,s+t.height);if(o<=h)return this.setTo(r,o,a-r,h-o),this}return this.setEmpty(),this},i.intersects=function(t){return Math.max(this.x,t.x)<=Math.min(this.right,t.right)&&Math.max(this.y,t.y)<=Math.min(this.bottom,t.bottom)},i.isEmpty=function(){return this.width<=0||this.height<=0},i.setEmpty=function(){this.x=0,this.y=0,this.width=0,this.height=0},i.clone=function(){return new e(this.x,this.y,this.width,this.height)},i.containsPoint=function(t){return this.x<t.x&&this.x+this.width>t.x&&this.y<t.y&&this.y+this.height>t.y},i.containsRect=function(t){var e=t.x+t.width,i=t.y+t.height,n=this.x+this.width,s=this.y+this.height;return t.x>=this.x&&t.x<n&&t.y>=this.y&&t.y<s&&e>this.x&&e<=n&&i>this.y&&i<=s},i.equals=function(t){return this===t||this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},i.inflatePoint=function(t){this.inflate(t.x,t.y)},i.offset=function(t,e){this.x+=t,this.y+=e},i.offsetPoint=function(t){this.offset(t.x,t.y)},i.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"},i.union=function(t){var e=this.clone();if(t.isEmpty())return e;if(e.isEmpty())return e.copyFrom(t),e;var i=Math.min(e.x,t.x),n=Math.min(e.y,t.y);return e.setTo(i,n,Math.max(e.right,t.right)-i,Math.max(e.bottom,t.bottom)-n),e},i.$getBaseWidth=function(t){var e=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t));return e*this.width+i*this.height},i.$getBaseHeight=function(t){var e=Math.abs(Math.cos(t));return Math.abs(Math.sin(t))*this.width+e*this.height},e}(n.HashObject);n.Rectangle=t,n.registerClass(t,"egret.Rectangle"),n.$TempRectangle=new t}(egret||(egret={})),function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.en_US=t.$locale_strings.en_US||{};var e=t.$locale_strings.en_US;e[1001]="Could not find Egret entry class: {0}",e[1002]="Egret entry class '{0}' must inherit from egret.DisplayObject.",e[1003]="Parameter {0} must be non-null.",e[1004]="An object cannot be added as a child to one of it's children (or children's children, etc.).",e[1005]="An object cannot be added as a child of itself.",e[1006]="The supplied DisplayObject must be a child of the caller.",e[1007]="An index specified for a parameter was out of range.",e[1008]="Instantiate singleton errorsingleton class {0} can not create multiple instances.",e[1009]='the Class {0} cannot use the property "{1}"',e[1010]='the property "{1}" of the Class "{0}" is readonly',e[1011]="Stream Error. URL: {0}",e[1012]="The type of parameter {0} must be Class.",e[1013]="Variable assignment is NaN, please see the code!",e[1014]='the constant "{1}" of the Class "{0}" is read-only',e[1015]="xml not found!",e[1016]="{0}has been obsoleted",e[1017]="The format of JSON file is incorrect: {0}\ndata: {1}",e[1018]="the scale9Grid is not correct",e[1019]="Network ab:{0}",e[1020]="Cannot initialize Shader",e[1021]="Current browser does not support webgl",e[1022]="{0} ArgumentError",e[1023]="This method is not available in the ScrollView!",e[1025]="end of the file",e[1026]="! EncodingError The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]=". called injection is not configured rule: {0}, please specify configuration during its initial years of injection rule, and then call the corresponding single case.",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="Photos can not be used across domains toDataURL to convert base64",e[1034]='Music file decoding failed: "{0}", please use the standard conversion tool reconversion under mp3.',e[1035]="Native does not support this feature!",e[1036]="Sound has stopped, please recall Sound.play () to play the sound!",e[1037]="Non-load the correct blob!",e[1038]="XML format error!",e[1039]="crossOrigin images can not set pixelHitTest  property!",e[1040]="hitTestPoint can not detect crossOrigin images! Please check if the display object has crossOrigin elements.",e[1041]="egret.MainContext.runtimeType is deprecated, please use egret.Capabilities.runtimeType replace",e[1042]="The parameters passed in the region needs is an integer in drawToTexture method. Otherwise, some browsers will draw abnormal.",e[3e3]="Theme configuration file failed to load: {0}",e[3001]="Cannot find the skin name which is configured in Theme: {0}",e[3002]='Index:"{0}" is out of the collection element index range',e[3003]="Cannot be available in this component. If this component is container, please continue to use",e[3004]="addChild(){0}addElement() replace",e[3005]="addChildAt(){0}addElementAt() replace",e[3006]="removeChild(){0}removeElement() replace",e[3007]="removeChildAt(){0}removeElementAt() replace",e[3008]="setChildIndex(){0}setElementIndex() replace",e[3009]="swapChildren(){0}swapElements() replace",e[3010]="swapChildrenAt(){0}swapElementsAt() replace",e[3011]='Index:"{0}" is out of the visual element index range',e[3012]="This method is not available in Scroller component!",e[3013]="UIStage is GUI root container, and only one such instant is in the display list",e[3014]="Webkit fullscreen error",e[3100]="Current browser does not support WebSocket",e[3101]="Please connect Socket firstly",e[3102]="Please set the type of binary type",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!"}(egret||(egret={})),function(t){t.$locale_strings=t.$locale_strings||{},t.$language="en_US"}(egret||(egret={})),function(a){(a.sys||(a.sys={})).tr=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=a.$locale_strings[a.$language][t];if(!n)return"{"+t+"}";for(var s=e.length,r=0;r<s;r++)n=n.replace("{"+r+"}",e[r]);return n}}(egret||(egret={})),function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.zh_CN=t.$locale_strings.zh_CN||{};var e=t.$locale_strings.zh_CN;e[1001]="Egret: {0}",e[1002]="Egret {0} egret.DisplayObject",e[1003]=" {0}  null",e[1004]="",e[1005]="",e[1006]=" DisplayObject ",e[1007]="",e[1008]=" {0} ",e[1009]=" {0}  {1}",e[1010]=" {0}  {1} ",e[1011]="URL: {0}",e[1012]=" {0}  Class",e[1013]="NaN",e[1014]=" {0}  {1} ",e[1015]="xml not found!",e[1016]="{0}",e[1017]="JSON: {0}\ndata: {1}",e[1018]="9",e[1019]=":{0}",e[1020]="",e[1021]="webgl",e[1022]="{0} ArgumentError",e[1023]="ScrollView!",e[1025]="",e[1026]="EncodingError! The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]=":{0} ",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="toDataURLbase64",e[1034]='"{0}"mp3',e[1035]="Native ",e[1036]=" Sound.play() ",e[1037]="blob",e[1038]="XML !",e[1039]=" pixelHitTest !",e[1040]="hitTestPoint ! ",e[1041]="egret.MainContext.runtimeType ,egret.Capabilities.runtimeType ",e[1042]="drawToTexture,",e[3e3]=": {0}",e[3001]=": {0}",e[3002]=':"{0}"',e[3003]="",e[3004]="addChild(){0}addElement()",e[3005]="addChildAt(){0}addElementAt()",e[3006]="removeChild(){0}removeElement()",e[3007]="removeChildAt(){0}removeElementAt()",e[3008]="setChildIndex(){0}setElementIndex()",e[3009]="swapChildren(){0}swapElements()",e[3010]="swapChildrenAt(){0}swapElementsAt()",e[3011]=':"{0}"',e[3012]="Scroller!",e[3013]="UIStageGUI",e[3014]="",e[3100]="WebSocket",e[3101]="WebSocket",e[3102]="type",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!"}(egret||(egret={})),function(t){t.localStorage||(t.localStorage={})}(egret||(egret={})),function(t){var e,i;e=t.sys||(t.sys={}),i=[],e.$pushSoundChannel=function(t){i.indexOf(t)<0&&i.push(t)},e.$popSoundChannel=function(t){var e=i.indexOf(t);return e<0&&(i.splice(e,1),!0)}}(egret||(egret={})),egret||(egret={}),egret||(egret={}),function(i){var t=function(){function t(){this.onSuccessFunc=null,this.onSuccessThisObject=null,this.onErrorFunc=null,this.onErrorThisObject=null,this.downloadingSizeFunc=null,this.downloadingSizeThisObject=null,this.onResponseHeaderFunc=null,this.onResponseHeaderThisObject=null}var e=t.prototype;return t.create=function(){return t.promiseObjectList.length?t.promiseObjectList.pop():new i.PromiseObject},e.onSuccess=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.onSuccessFunc&&this.onSuccessFunc.apply(this.onSuccessThisObject,t),this.destroy()},e.onError=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.onErrorFunc&&this.onErrorFunc.apply(this.onErrorThisObject,t),this.destroy()},e.downloadingSize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.downloadingSizeFunc&&this.downloadingSizeFunc.apply(this.downloadingSizeThisObject,t)},e.onResponseHeader=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.onResponseHeaderFunc&&this.onResponseHeaderFunc.apply(this.onResponseHeaderThisObject,t)},e.destroy=function(){this.onSuccessFunc=void 0,this.onSuccessThisObject=void 0,this.onErrorFunc=void 0,this.onErrorThisObject=void 0,this.downloadingSizeFunc=void 0,this.downloadingSizeThisObject=void 0,this.onResponseHeaderFunc=void 0,this.onResponseHeaderThisObject=void 0,t.promiseObjectList.push(this)},t.promiseObjectList=[],t}();i.PromiseObject=t,i.registerClass(t,"egret.PromiseObject")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.GET="GET",t.POST="POST",t}();t.HttpMethod=e,t.registerClass(e,"egret.HttpMethod")}(egret||(egret={})),egret||(egret={}),function(t){var e=function(){function t(){}return t.TEXT="text",t.ARRAY_BUFFER="arraybuffer",t}();t.HttpResponseType=e,t.registerClass(e,"egret.HttpResponseType")}(egret||(egret={})),egret||(egret={}),function(o){!function(v){if(DEBUG);var t=function(){function t(t){this.dirtyList=[],this.hasClipRect=!1,this.clipWidth=0,this.clipHeight=0,this.clipArea=0,this.clipRectChanged=!1,this.$dirtyRegionPolicy=o.DirtyRegionPolicy.ON,this.root=t}var e=t.prototype;return e.setClipRect=function(t,e){this.hasClipRect=!0,this.clipRectChanged=!0,this.clipWidth=Math.ceil(t),this.clipHeight=Math.ceil(e),this.clipArea=this.clipWidth*this.clipHeight},e.addRegion=function(t){var e=t.minX,i=t.minY,n=t.maxX,s=t.maxY;if(this.hasClipRect&&(e<0&&(e=0),i<0&&(i=0),n>this.clipWidth&&(n=this.clipWidth),s>this.clipHeight&&(s=this.clipHeight)),n<=e||s<=i)return!1;if(this.clipRectChanged)return!0;var r=this.dirtyList,a=v.Region.create();return r.push(a.setTo(e,i,n,s)),this.$dirtyRegionPolicy!=o.DirtyRegionPolicy.OFF&&this.mergeDirtyList(r),!0},e.clear=function(){for(var t=this.dirtyList,e=t.length,i=0;i<e;i++)v.Region.release(t[i]);t.length=0},e.getDirtyRegions=function(){var t=this.dirtyList;if(this.$dirtyRegionPolicy==o.DirtyRegionPolicy.OFF||o.Capabilities.runtimeType==o.RuntimeType.NATIVE&&!o.native.$supportCanvas){this.clipRectChanged=!0,this.clear();var e=v.Region.create();if(this.hasClipRect)t.push(e.setTo(0,0,this.clipWidth,this.clipHeight));else{var i=this.root.$getOriginalBounds();t.push(e.setTo(i.x,i.y,i.width,i.height))}}else if(this.clipRectChanged){this.clipRectChanged=!1,this.clear();e=v.Region.create();t.push(e.setTo(0,0,this.clipWidth,this.clipHeight))}else for(;this.mergeDirtyList(t););var n=this.dirtyList.length;if(0<n)for(var s=0;s<n;s++)this.dirtyList[s].intValues();return this.dirtyList},e.mergeDirtyList=function(t){var e=t.length;if(e<2)return!1;for(var i,n,s,r,a=this.hasClipRect,o=3<e?Number.POSITIVE_INFINITY:0,h=0,l=0,c=0,u=0;u<e-1;u++){var d=t[u];a&&(c+=d.area);for(var f=u+1;f<e;f++){var g=t[f],p=(n=g,void 0,s=(i=d).minX<n.minX?i.minX:n.minX,r=i.minY<n.minY?i.minY:n.minY,((i.maxX>n.maxX?i.maxX:n.maxX)-s)*((i.maxY>n.maxY?i.maxY:n.maxY)-r)-d.area-g.area);p<o&&(h=u,l=f,o=p)}}if(a&&.95<c/this.clipArea&&(this.clipRectChanged=!0),h!=l){var $=t[l];return t[h].union($),v.Region.release($),t.splice(l,1),!0}return!1},e.setDirtyRegionPolicy=function(t){this.$dirtyRegionPolicy=t},t}();v.DirtyRegion=t,o.registerClass(t,"egret.sys.DirtyRegion")}(o.sys||(o.sys={}))}(egret||(egret={})),function(n){var r,t;r=n.sys||(n.sys={}),t=function(e){function t(t){e.call(this),this.isStage=!1,this.$renderNode=new r.BitmapNode,this.renderBuffer=null,this.offsetX=0,this.offsetY=0,this.offsetMatrix=new n.Matrix,this.isDirty=!1,this.needUpdateRegions=!1,this.dirtyNodes={},this.dirtyNodeList=[],this.dirtyList=null,this.sizeChanged=!1,this.root=t,this.dirtyRegion=new r.DirtyRegion(t),this.isStage=t instanceof n.Stage}__extends(t,e);var i=t.prototype;return t.create=function(t){var e=new n.sys.DisplayList(t);try{var i=new r.RenderBuffer}catch(t){return null}return e.renderBuffer=i,e.root=t,e},i.$getRenderNode=function(){return this.$renderNode},i.$update=function(){var t=this.root;if(null==t)return!1;t.$removeFlagsUp(768);var e=this.$renderNode,i=t.$getConcatenatedMatrix(),n=t.$getOriginalBounds(),s=t.$parentDisplayList,r=e.renderRegion;if(this.needUpdateRegions&&this.updateDirtyRegions(),!s)return r.setTo(0,0,0,0),e.moved=!1;if(!e.moved)return!1;e.moved=!1;var a=e.renderMatrix;a.copyFrom(i);var o=s.root;return o!==t.$stage&&t.$getConcatenatedMatrixAt(o,a),r.updateRegion(n,a),!0},i.setClipRect=function(t,e){this.dirtyRegion.setClipRect(t,e),this.renderBuffer.resize(t,e)},i.markDirty=function(t){var e=t.$hashCode;if(!this.dirtyNodes[e]&&(this.dirtyNodes[e]=!0,this.dirtyNodeList.push(t),!this.needUpdateRegions)){this.needUpdateRegions=!0,this.isDirty=!0;var i=this.root.$parentDisplayList;i&&i.markDirty(this)}},i.updateDirtyRegions=function(){var t=this.dirtyNodeList;this.dirtyNodeList=[],this.dirtyNodes={},this.needUpdateRegions=!1;for(var e=this.dirtyRegion,i=t.length,n=0;n<i;n++){var s=t[n],r=s.$getRenderNode();if(r.needRedraw=!1,this.isStage){0<r.renderAlpha&&r.renderVisible&&e.addRegion(r.renderRegion)&&(r.needRedraw=!0);var a=s.$update();0<r.renderAlpha&&r.renderVisible&&(a||!r.needRedraw)&&e.addRegion(r.renderRegion)&&(r.needRedraw=!0)}else{e.addRegion(r.renderRegion)&&(r.needRedraw=!0),!(a=s.$update())&&r.needRedraw||e.addRegion(r.renderRegion)&&(r.needRedraw=!0)}}return this.dirtyList=e.getDirtyRegions(),this.dirtyList},i.drawToSurface=function(){var t=0,e=this.dirtyList;if(e&&0<e.length){this.isStage||this.changeSurfaceSize();var i=this.renderBuffer;i.beginClip(this.dirtyList,this.offsetX,this.offsetY);t=r.systemRenderer.render(this.root,i,this.offsetMatrix,this.dirtyList);i.endClip();var n=i.surface,s=this.$renderNode;s.drawData.length=0,s.image=n,s.drawImage(0,0,n.width,n.height,-this.offsetX,-this.offsetY,n.width,n.height)}return this.dirtyList=null,this.dirtyRegion.clear(),this.isDirty=!1,t},i.changeSurfaceSize=function(){this.root;var t=this.offsetX,e=this.offsetY,i=this.root.$getOriginalBounds();this.offsetX=-i.x,this.offsetY=-i.y,this.offsetMatrix.setTo(1,0,0,1,this.offsetX,this.offsetY);var n=this.renderBuffer,s=Math.max(257,i.width),r=Math.max(257,i.height);this.offsetX==t&&this.offsetY==e&&n.surface.width==s&&n.surface.height==r||(this.sizeChanged?n.resizeTo(s,r,this.offsetX-t,this.offsetY-e):(this.sizeChanged=!0,n.resize(s,r)))},i.setDirtyRegionPolicy=function(t){this.dirtyRegion.setDirtyRegionPolicy(t),this.renderBuffer.setDirtyRegionPolicy(t)},t}(n.HashObject),r.DisplayList=t,n.registerClass(t,"egret.sys.DisplayList",["egret.sys.Renderable"])}(egret||(egret={})),egret||(egret={}),function(d){!function(h){var t=function(n){function t(t,e,i){n.call(this),this.isPlaying=!1,DEBUG&&!t&&d.$error(1003,"buffer"),this.entryClassName=i,this.stage=e,this.screenDisplayList=this.createDisplayList(e,t),this.showFPS=!1,this.showLog=!1,this._showPaintRect=!1,this.stageDisplayList=null,this.paintList=[],this.displayFPS=s,this.showPaintRect=r,this.drawPaintRect=a,this.drawDirtyRect=o}__extends(t,n);var e=t.prototype;return e.createDisplayList=function(t,e){var i=new h.DisplayList(t);return i.renderBuffer=e,t.$displayList=i},e.start=function(){!this.isPlaying&&this.stage&&(h.$TempStage=h.$TempStage||this.stage,this.isPlaying=!0,this.root||this.initialize(),h.$ticker.$addPlayer(this))},e.initialize=function(){var t;if(this.entryClassName&&(t=d.getDefinitionByName(this.entryClassName)),t){var e=new t;(this.root=e)instanceof d.DisplayObject?this.stage.addChild(e):DEBUG&&d.$error(1002,this.entryClassName)}else DEBUG&&d.$error(1001,this.entryClassName)},e.stop=function(){this.pause(),this.stage=null},e.pause=function(){this.isPlaying&&(this.isPlaying=!1,h.$ticker.$removePlayer(this))},e.$render=function(t,e){(this.showFPS||this.showLog)&&this.stage.addChild(this.fpsDisplay),this.callLaters(),this.callLaterAsyncs();var i=this.stage,n=d.getTimer(),s=i.$displayList.updateDirtyRegions(),r=d.getTimer();s=s.concat();var a=i.$displayList.drawToSurface();this._showPaintRect&&this.drawPaintRect(s);var o=d.getTimer();if(t&&this.showFPS){var h=0;if(0<a){for(var l=s.length,c=0,u=0;u<l;u++)c+=s[u].area;h=Math.ceil(1e3*c/(i.stageWidth*i.stageHeight))/10}this.fpsDisplay.update(a,h,r-n,o-r,e)}},e.callLaters=function(){if(0<d.$callLaterFunctionList.length){var t=d.$callLaterFunctionList;d.$callLaterFunctionList=[];var e=d.$callLaterThisList;d.$callLaterThisList=[];var i=d.$callLaterArgsList;d.$callLaterArgsList=[]}if(t)for(var n=t.length,s=0;s<n;s++){var r=t[s];null!=r&&r.apply(e[s],i[s])}},e.callLaterAsyncs=function(){if(0<d.$callAsyncFunctionList.length){var t=d.$callAsyncFunctionList,e=d.$callAsyncThisList,i=d.$callAsyncArgsList;d.$callAsyncFunctionList=[],d.$callAsyncThisList=[],d.$callAsyncArgsList=[];for(var n=0;n<t.length;n++){var s=t[n];null!=s&&s.apply(e[n],i[n])}}},e.updateStageSize=function(t,e){var i=this.stage;t===i.$stageWidth&&e===i.$stageHeight||(i.$stageWidth=t,i.$stageHeight=e,this.screenDisplayList.setClipRect(t,e),this.stageDisplayList&&this.stageDisplayList.setClipRect(t,e),i.dispatchEventWith(d.Event.RESIZE),i.$invalidate(!0))},t}(d.HashObject);h.Player=t,d.registerClass(t,"egret.sys.Player");var l,c=[];function s(t,e,i,n){if(e&&(d.log=function(){for(var t=arguments.length,e="",i=0;i<t;i++)e+=arguments[i]+" ";h.$logToFPS(e),console.log.apply(console,u(arguments))}),n?{}:n,e=!!e,this.showFPS=!!t,this.showLog=e,!this.fpsDisplay){var s=void 0===n.x?0:n.x,r=void 0===n.y?0:n.y;(l=this.fpsDisplay=new FPS(this.stage,t,e,i,n)).x=s,l.y=r;for(var a=c.length,o=0;o<a;o++)l.updateInfo(c[o]);c=null}}function r(t){t=!!t,this._showPaintRect!=t&&((this._showPaintRect=t)?(this.stageDisplayList||(this.stageDisplayList=h.DisplayList.create(this.stage)),this.stage.$displayList=this.stageDisplayList):this.stage.$displayList=this.screenDisplayList)}function a(t){for(var e=t.length,i=[],n=0;n<e;n++){var s=t[n];i[n]=[s.minX,s.minY,s.width,s.height],s.width-=1,s.height-=1}var r=this.paintList;r.push(i),1<r.length&&r.shift();var a=this.screenDisplayList.renderBuffer,o=a.context;for(o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,a.surface.width,a.surface.height),o.drawImage(this.stageDisplayList.renderBuffer.surface,0,0),e=r.length,n=0;n<e;n++)for(var h=(i=r[n]).length-1;0<=h;h--){var l=i[h];this.drawDirtyRect(l[0],l[1],l[2],l[3],o)}o.save(),o.beginPath();for(e=t.length,n=0;n<e;n++){s=t[n];o.clearRect(s.minX,s.minY,s.width,s.height),o.rect(s.minX,s.minY,s.width,s.height)}o.clip(),o.drawImage(this.stageDisplayList.renderBuffer.surface,0,0),o.restore()}function o(t,e,i,n,s){s.strokeStyle="rgb(255,0,0)",s.lineWidth=5,s.strokeRect(t-.5,e-.5,i,n)}function u(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e}h.$logToFPS=function(t){l?l.updateInfo(t):c.push(t)},FPS=function(a){function t(t,e,i,n,s){a.call(this),this.isFPS=!0,this.infoLines=[],this.totalTime=0,this.totalTick=0,this.lastTime=0,this.drawCalls=0,this.dirtyRatio=0,this.costDirty=0,this.costRender=0,this.costTicker=0,this._stage=t,this.showFPS=e,this.showLog=i,this.logFilter=n,this.touchChildren=!1,this.touchEnabled=!1,this.styles=s,this.createDisplay();try{var r=n?new RegExp(n):null}catch(t){d.log(t)}this.filter=function(t){return r?r.test(t):!n||0==t.indexOf(n)}}return __extends(t,a),t.prototype.createDisplay=function(){this.shape=new d.Shape,this.addChild(this.shape),(t=new d.TextField).size=void 0===this.styles.size?24:parseInt(this.styles.size),this.addChild(t),(this.textField=t).textColor=void 0===this.styles.textColor?49664:parseInt(this.styles.textColor),t.fontFamily="monospace",t.x=10,t.y=10;var t=new d.TextField;this.infoText=t,this.addChild(t),t.textColor=void 0===this.styles.textColor?49664:parseInt(this.styles.textColor),t.fontFamily="monospace",t.x=10,t.size=void 0===this.styles.size?12:this.styles.size/2,t.y=10},t.prototype.update=function(t,e,i,n,s){var r=d.getTimer();if(this.totalTime+=r-this.lastTime,this.lastTime=r,this.totalTick++,this.drawCalls+=t,this.dirtyRatio+=e,this.costDirty+=i,this.costRender+=n,this.costTicker+=s,1e3<=this.totalTime){var a=Math.ceil(1e3*this.totalTick/this.totalTime),o=Math.round(this.drawCalls/this.totalTick),h=Math.round(this.dirtyRatio/this.totalTick),l=Math.round(this.costDirty/this.totalTick),c=Math.round(this.costRender/this.totalTick),u="FPS: "+a+"\nDraw: "+o+","+h+"%\nCost: "+Math.round(this.costTicker/this.totalTick)+","+l+","+c;this.textField.text!=u&&(this.textField.text=u,this.updateLayout()),this.totalTick=0,this.totalTime=this.totalTime%500,this.drawCalls=0,this.dirtyRatio=0,this.costDirty=0,this.costRender=0,this.costTicker=0}},t.prototype.updateInfo=function(t){if(this.showLog&&this.filter(t)){var e=this.infoLines;if(t&&e.push(t),this.infoText.width=NaN,this.infoText.text=e.join("\n"),0<this._stage.stageHeight)for(this.infoText.textWidth>this._stage.stageWidth-20&&(this.infoText.width=this._stage.stageWidth-20);this.infoText.textHeight>this._stage.stageHeight-20;)e.shift(),this.infoText.text=e.join("\n");this.updateLayout()}},t.prototype.updateLayout=function(){if(this.showFPS&&(this.infoText.y=this.textField.height+20),d.Capabilities.runtimeType!=d.RuntimeType.NATIVE){var t=this.shape.$graphics;t.clear(),t.beginFill(4473924,this.styles.bgAlpha||.9),t.drawRect(0,0,Math.max(160,this.width+20),this.height+20),t.endFill()}},t}(d.Sprite),d.warn=function(){console.warn.apply(console,u(arguments))},d.error=function(){console.error.apply(console,u(arguments))},d.assert=function(){console.assert.apply(console,u(arguments))},d.log=function(){console.log.apply(console,u(arguments))}}(d.sys||(d.sys={}))}(egret||(egret={})),function(t){var e,i,n;e=t.sys||(t.sys={}),i=[],n=function(){function e(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.area=0,this.moved=!1}var t=e.prototype;return e.release=function(t){i.push(t)},e.create=function(){var t=i.pop();return t||(t=new e),t},t.setTo=function(t,e,i,n){return this.minX=t,this.minY=e,this.maxX=i,this.maxY=n,this.updateArea(),this},t.intValues=function(){this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this.updateArea()},t.updateArea=function(){this.width=this.maxX-this.minX,this.height=this.maxY-this.minY,this.area=this.width*this.height},t.union=function(t){this.minX>t.minX&&(this.minX=t.minX),this.minY>t.minY&&(this.minY=t.minY),this.maxX<t.maxX&&(this.maxX=t.maxX),this.maxY<t.maxY&&(this.maxY=t.maxY),this.updateArea()},t.intersect=function(t){this.minX<t.minX&&(this.minX=t.minX),this.maxX>t.maxX&&(this.maxX=t.maxX),this.minX>=this.maxX?this.setEmpty():(this.minY<t.minY&&(this.minY=t.minY),this.maxY>t.maxY&&(this.maxY=t.maxY),this.minY>=this.maxY?this.setEmpty():this.updateArea())},t.setEmpty=function(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.area=0},t.isEmpty=function(){return this.width<=0||this.height<=0},t.intersects=function(t){if(this.isEmpty())return!1;var e=this.minX>t.minX?this.minX:t.minX,i=this.maxX<t.maxX?this.maxX:t.maxX;return!(i<e)&&(e=this.minY>t.minY?this.minY:t.minY)<=(i=this.maxY<t.maxY?this.maxY:t.maxY)},t.updateRegion=function(t,e){if(0!=t.width&&0!=t.height){var i,n,s,r,a=e,o=a.a,h=a.b,l=a.c,c=a.d,u=a.tx,d=a.ty,f=t.x,g=t.y,p=f+t.width,$=g+t.height;if(1==o&&0==h&&0==l&&1==c)i=f+u-1,n=g+d-1,s=p+u+1,r=$+d+1;else{var v=o*f+l*g+u,y=h*f+c*g+d,m=o*p+l*g+u,T=h*p+c*g+d,x=o*p+l*$+u,_=h*p+c*$+d,b=o*f+l*$+u,E=h*f+c*$+d,C=0;m<v&&(C=v,v=m,m=C),b<x&&(C=x,x=b,b=C),i=(v<x?v:x)-1,s=(b<m?m:b)+1,T<y&&(C=y,y=T,T=C),E<_&&(C=_,_=E,E=C),n=(y<_?y:_)-1,r=(E<T?T:E)+1}this.minX=i,this.minY=n,this.maxX=s,this.maxY=r,this.width=s-i,this.height=r-n,this.area=this.width*this.height}else this.setEmpty()},e}(),e.Region=n,t.registerClass(n,"egret.sys.Region")}(egret||(egret={})),function(t){t.sys||(t.sys={})}(egret||(egret={})),function(u){var t,e;t=u.sys||(u.sys={}),e=function(t){function e(){t.call(this)}__extends(e,t);return e.prototype.calculateStageSize=function(t,e,i,n,s){var r=e,a=i,o=n,h=s,l=e/o||0,c=i/h||0;switch(t){case u.StageScaleMode.EXACT_FIT:break;case u.StageScaleMode.FIXED_HEIGHT:o=Math.round(e/c);break;case u.StageScaleMode.FIXED_WIDTH:h=Math.round(i/l);break;case u.StageScaleMode.NO_BORDER:c<l?a=Math.round(h*l):r=Math.round(o*c);break;case u.StageScaleMode.SHOW_ALL:c<l?r=Math.round(o*c):a=Math.round(h*l);break;case u.StageScaleMode.FIXED_NARROW:c<l?o=Math.round(e/c):h=Math.round(i/l);break;case u.StageScaleMode.FIXED_WIDE:c<l?h=Math.round(i/l):o=Math.round(e/c);break;default:o=e,h=i}return{stageWidth:o,stageHeight:h,displayWidth:r,displayHeight:a}},e}(u.HashObject),t.DefaultScreenAdapter=e,u.registerClass(e,"egret.sys.DefaultScreenAdapter",["egret.sys.IScreenAdapter"])}(egret||(egret={})),function(t){var e=function(){function t(){}return t.NO_SCALE="noScale",t.SHOW_ALL="showAll",t.NO_BORDER="noBorder",t.EXACT_FIT="exactFit",t.FIXED_WIDTH="fixedWidth",t.FIXED_HEIGHT="fixedHeight",t.FIXED_NARROW="fixedNarrow",t.FIXED_WIDE="fixedWide",t}();t.StageScaleMode=e,t.registerClass(e,"egret.StageScaleMode")}(egret||(egret={})),function(t){t.sys||(t.sys={})}(egret||(egret={})),function(u){!function(c){c.$START_TIME=0,c.$invalidateRenderFlag=!1,c.$requestRenderingFlag=!1;var t=function(){function t(){this.playerList=[],this.callBackList=[],this.thisObjectList=[],this.$frameRate=30,this.frameInterval=2e3,this.lastCount=2e3,this.costEnterFrame=0,DEBUG&&c.$ticker&&u.$error(1008,"egret.sys.SystemTicker"),c.$START_TIME=Date.now()}var e=t.prototype;return e.$addPlayer=function(t){-1==this.playerList.indexOf(t)&&(DEBUG&&egret_stages.push(t.stage),this.playerList=this.playerList.concat(),this.playerList.push(t))},e.$removePlayer=function(t){var e=this.playerList.indexOf(t);if(-1!==e){if(DEBUG){var i=egret_stages.indexOf(t.stage);egret_stages.splice(i,1)}this.playerList=this.playerList.concat(),this.playerList.splice(e,1)}},e.$startTick=function(t,e){-1==this.getTickIndex(t,e)&&(this.concatTick(),this.callBackList.push(t),this.thisObjectList.push(e))},e.$stopTick=function(t,e){var i=this.getTickIndex(t,e);-1!=i&&(this.concatTick(),this.callBackList.splice(i,1),this.thisObjectList.splice(i,1))},e.getTickIndex=function(t,e){for(var i=this.callBackList,n=this.thisObjectList,s=i.length-1;0<=s;s--)if(i[s]==t&&n[s]==e)return s;return-1},e.concatTick=function(){this.callBackList=this.callBackList.concat(),this.thisObjectList=this.thisObjectList.concat()},e.$setFrameRate=function(t){return!((t=+t||0)<=0)&&(this.$frameRate!=t&&(60<(this.$frameRate=t)&&(t=60),u.Capabilities.runtimeType==u.RuntimeType.NATIVE&&(egret_native.setFrameRate(t),t=60),this.lastCount=this.frameInterval=Math.round(6e4/t),!0))},e.update=function(){for(var t=u.getTimer(),e=this.callBackList,i=this.thisObjectList,n=e.length,s=c.$requestRenderingFlag,r=u.getTimer(),a=0;a<n;a++)e[a].call(i[a],r)&&(s=!0);this.lastCount-=1e3;var o=u.getTimer();if(0<this.lastCount)s&&this.render(!1,this.costEnterFrame+o-t);else{this.lastCount+=this.frameInterval,this.render(!0,this.costEnterFrame+o-t);var h=u.getTimer();this.broadcastEnterFrame();var l=u.getTimer();this.costEnterFrame=l-h}},e.render=function(t,e){var i=this.playerList,n=i.length;if(0!=n){c.$invalidateRenderFlag&&(this.broadcastRender(),c.$invalidateRenderFlag=!1);for(var s=0;s<n;s++)i[s].$render(t,e);c.$requestRenderingFlag=!1}},e.broadcastEnterFrame=function(){var t=u.DisplayObject.$enterFrameCallBackList,e=t.length;if(0!=e){t=t.concat();for(var i=0;i<e;i++)t[i].dispatchEventWith(u.Event.ENTER_FRAME)}},e.broadcastRender=function(){var t=u.DisplayObject.$renderCallBackList,e=t.length;if(0!=e){t=t.concat();for(var i=0;i<e;i++)t[i].dispatchEventWith(u.Event.RENDER)}},t}();c.SystemTicker=t,u.registerClass(t,"egret.sys.SystemTicker"),c.$ticker=new c.SystemTicker}(u.sys||(u.sys={}))}(egret||(egret={})),DEBUG)var egret_stages=[];!function(r){var t,e;t=r.sys||(r.sys={}),e=function(e){function t(t){e.call(this),this.maxTouches=0,this.useTouchesCount=0,this.touchDownTarget={},this.lastTouchX=-1,this.lastTouchY=-1,this.stage=t}__extends(t,e);var i=t.prototype;return i.$initMaxTouches=function(){this.maxTouches=this.stage.$maxTouches},i.onTouchBegin=function(t,e,i){if(!(this.useTouchesCount>=this.maxTouches)){this.lastTouchX=t,this.lastTouchY=e;var n=this.findTarget(t,e);null==this.touchDownTarget[i]&&(this.touchDownTarget[i]=n,this.useTouchesCount++),r.TouchEvent.dispatchTouchEvent(n,r.TouchEvent.TOUCH_BEGIN,!0,!0,t,e,i,!0)}},i.onTouchMove=function(t,e,i){if(null!=this.touchDownTarget[i]&&(this.lastTouchX!=t||this.lastTouchY!=e)){this.lastTouchX=t,this.lastTouchY=e;var n=this.findTarget(t,e);r.TouchEvent.dispatchTouchEvent(n,r.TouchEvent.TOUCH_MOVE,!0,!0,t,e,i,!0)}},i.onTouchEnd=function(t,e,i){if(null!=this.touchDownTarget[i]){var n=this.findTarget(t,e),s=this.touchDownTarget[i];delete this.touchDownTarget[i],this.useTouchesCount--,r.TouchEvent.dispatchTouchEvent(n,r.TouchEvent.TOUCH_END,!0,!0,t,e,i,!1),s==n?r.TouchEvent.dispatchTouchEvent(n,r.TouchEvent.TOUCH_TAP,!0,!0,t,e,i,!1):r.TouchEvent.dispatchTouchEvent(s,r.TouchEvent.TOUCH_RELEASE_OUTSIDE,!0,!0,t,e,i,!1)}},i.findTarget=function(t,e){var i=this.stage.$hitTest(t,e);return i||(i=this.stage),i},t}(r.HashObject),t.TouchHandler=e,r.registerClass(e,"egret.sys.TouchHandler")}(egret||(egret={})),function(i){var n,t;n=i.sys||(i.sys={}),t=function(){function t(){this.type=0,this.needRedraw=!1,this.renderAlpha=1,this.renderVisible=!0,this.renderMatrix=new i.Matrix,this.renderRegion=new n.Region,this.moved=!1,this.drawData=[],this.renderCount=0}var e=t.prototype;return e.cleanBeforeRender=function(){this.drawData.length=0,this.renderCount=0},e.$getRenderCount=function(){return this.renderCount},t}(),n.RenderNode=t,i.registerClass(t,"egret.sys.RenderNode")}(egret||(egret={})),function(t){var e,i;e=t.sys||(t.sys={}),i=function(t){function e(){t.call(this),this.image=null,this.smoothing=!0,this.type=1}__extends(e,t);var i=e.prototype;return i.drawImage=function(t,e,i,n,s,r,a,o){this.drawData.push(t,e,i,n,s,r,a,o),this.renderCount++},i.cleanBeforeRender=function(){t.prototype.cleanBeforeRender.call(this),this.image=null,this.matrix=null},e}(e.RenderNode),e.BitmapNode=i,t.registerClass(i,"egret.sys.BitmapNode")}(egret||(egret={})),function(l){var c,o,h,t;c=l.sys||(l.sys={}),o=["none","round","square"],h=["bevel","miter","round"],t=function(t){function e(){t.call(this),this.dirtyRender=!0,this.type=3}__extends(e,t);var i=e.prototype;return i.beginFill=function(t,e,i){void 0===e&&(e=1);var n=new c.FillPath;if(n.fillColor=t,n.fillAlpha=e,i){var s=this.drawData.lastIndexOf(i);this.drawData.splice(s,0,n)}else this.drawData.push(n);return this.dirtyRender=!0,n},i.beginGradientFill=function(t,e,i,n,s,r){var a=new l.Matrix;s?(a.a=819.2*s.a,a.b=819.2*s.b,a.c=819.2*s.c,a.d=819.2*s.d,a.tx=s.tx,a.ty=s.ty):(a.a=100,a.d=100);var o=new c.GradientFillPath;if(o.gradientType=t,o.colors=e,o.alphas=i,o.ratios=n,o.matrix=a,r){var h=this.drawData.lastIndexOf(r);this.drawData.splice(h,0,o)}else this.drawData.push(o);return this.dirtyRender=!0,o},i.lineStyle=function(t,e,i,n,s,r){void 0===i&&(i=1),void 0===r&&(r=3),-1==o.indexOf(n)&&(n="round"),-1==h.indexOf(s)&&(s="round");var a=new c.StrokePath;return a.lineWidth=t,a.lineColor=e,a.lineAlpha=i,a.caps=n||l.CapsStyle.ROUND,a.joints=s,a.miterLimit=r,this.drawData.push(a),this.dirtyRender=!0,a},i.clear=function(){this.drawData.length=0,this.dirtyRender=!0},i.cleanBeforeRender=function(){},e}(c.RenderNode),c.GraphicsNode=t,l.registerClass(t,"egret.sys.GraphicsNode")}(egret||(egret={})),function(t){var e,i;e=t.sys||(t.sys={}),i=function(t){function e(){t.call(this),this.type=4}__extends(e,t);var i=e.prototype;return i.addNode=function(t){this.drawData.push(t)},i.cleanBeforeRender=function(){for(var t=this.drawData,e=t.length-1;0<=e;e--)t[e].cleanBeforeRender()},i.$getRenderCount=function(){for(var t=0,e=this.drawData,i=e.length-1;0<=i;i--)t+=e[i].$getRenderCount();return t},e}(e.RenderNode),e.GroupNode=i,t.registerClass(i,"egret.sys.GroupNode")}(egret||(egret={})),function(t){var e,i;e=t.sys||(t.sys={}),i=function(t){function e(){t.call(this),this.type=6}__extends(e,t);return e.prototype.setAlpha=function(t){0!=this.drawData.length&&(this.drawData.length=0),this.drawData.push(t),this.renderCount++},e}(e.RenderNode),e.SetAlphaNode=i,t.registerClass(i,"egret.sys.SetAlphaNode")}(egret||(egret={})),function(t){var e,i;e=t.sys||(t.sys={}),i=function(t){function e(){t.call(this),this.type=5}__extends(e,t);return e.prototype.setTransform=function(t,e,i,n,s,r){0!=this.drawData.length&&(this.drawData.length=0),this.drawData.push(t,e,i,n,s,r),this.renderCount++},e}(e.RenderNode),e.SetTransformNode=i,t.registerClass(i,"egret.sys.SetTransformNode")}(egret||(egret={})),function(t){var e,i;e=t.sys||(t.sys={}),i=function(t){function e(){t.call(this),this.textColor=16777215,this.strokeColor=0,this.size=30,this.stroke=0,this.bold=!1,this.italic=!1,this.fontFamily="Arial",this.dirtyRender=!0,this.type=2}__extends(e,t);var i=e.prototype;return i.drawText=function(t,e,i,n){this.drawData.push(t,e,i,n),this.renderCount++,this.dirtyRender=!0},i.cleanBeforeRender=function(){t.prototype.cleanBeforeRender.call(this)},e}(e.RenderNode),e.TextNode=i,t.registerClass(i,"egret.sys.TextNode")}(egret||(egret={})),function(t){var e,i;e=t.sys||(t.sys={}),i=function(){function t(){this.type=0,this.$commands=[],this.$data=[],this.commandPosition=0,this.dataPosition=0}var e=t.prototype;return e.moveTo=function(t,e){this.$commands[this.commandPosition++]=1;var i=this.dataPosition;this.$data[i++]=t,this.$data[i++]=e,this.dataPosition=i},e.lineTo=function(t,e){this.$commands[this.commandPosition++]=2;var i=this.dataPosition;this.$data[i++]=t,this.$data[i++]=e,this.dataPosition=i},e.curveTo=function(t,e,i,n){this.$commands[this.commandPosition++]=3;var s=this.dataPosition;this.$data[s++]=t,this.$data[s++]=e,this.$data[s++]=i,this.$data[s++]=n,this.dataPosition=s},e.cubicCurveTo=function(t,e,i,n,s,r){this.$commands[this.commandPosition++]=4;var a=this.dataPosition;this.$data[a++]=t,this.$data[a++]=e,this.$data[a++]=i,this.$data[a++]=n,this.$data[a++]=s,this.$data[a++]=r,this.dataPosition=a},e.drawRect=function(t,e,i,n){var s=t+i,r=e+n;this.moveTo(t,e),this.lineTo(s,e),this.lineTo(s,r),this.lineTo(t,r),this.lineTo(t,e)},e.drawRoundRect=function(t,e,i,n,s,r){var a=.5*s|0,o=r?.5*r|0:a;if(a&&o){var h=.5*i,l=.5*n;if(h<a&&(a=h),l<o&&(o=l),h!==a||l!==o){var c=t+i,u=e+n,d=t+a,f=c-a,g=e+o,p=u-o;this.moveTo(c,p),this.curveTo(c,u,f,u),this.lineTo(d,u),this.curveTo(t,u,t,p),this.lineTo(t,g),this.curveTo(t,e,d,e),this.lineTo(f,e),this.curveTo(c,e,c,g),this.lineTo(c,p)}else a===o?this.drawCircle(t+a,e+o,a):this.drawEllipse(t,e,2*a,2*o)}else this.drawRect(t,e,i,n)},e.drawCircle=function(t,e,i){this.arcToBezier(t,e,i,i,0,2*Math.PI)},e.drawEllipse=function(t,e,i,n){var s=.5*i,r=.5*n;t+=s,e+=r,this.arcToBezier(t,e,s,r,0,2*Math.PI)},e.drawArc=function(t,e,i,n,s,r){r?n<=s&&(s-=2*Math.PI):s<=n&&(s+=2*Math.PI),this.arcToBezier(t,e,i,i,n,s,r)},e.arcToBezier=function(t,e,i,n,s,r,a){var o=.5*Math.PI,h=s,l=h;a?(l+=-o-h%o)<r&&(l=r):r<(l+=o-h%o)&&(l=r);var c=t+Math.cos(h)*i,u=e+Math.sin(h)*n;this.moveTo(c,u);for(var d=0;d<4;d++){var f=l-h,g=4*Math.tan(f/4)/3,p=c-g*(u-e),$=u+g*(c-t),v=(c=t+Math.cos(l)*i)+g*((u=e+Math.sin(l)*n)-e),y=u-g*(c-t);if(this.cubicCurveTo(p,$,v,y,c,u),l===r)break;h=l,a?(l=h-o)<r&&(l=r):r<(l=h+o)&&(l=r)}},t}(),e.Path2D=i,t.registerClass(i,"egret.sys.Path2D")}(egret||(egret={})),function(t){var e,i;e=t.sys||(t.sys={}),i=function(t){function e(){t.call(this),this.type=1}__extends(e,t);return e}(e.Path2D),e.FillPath=i,t.registerClass(i,"egret.sys.FillPath")}(egret||(egret={})),function(t){var e,i;e=t.sys||(t.sys={}),i=function(t){function e(){t.call(this),this.type=2}__extends(e,t);return e}(e.Path2D),e.GradientFillPath=i,t.registerClass(i,"egret.sys.GradientFillPath")}(egret||(egret={})),function(t){var e,i;e=t.sys||(t.sys={}),i=function(t){function e(){t.call(this),this.type=3}__extends(e,t);return e}(e.Path2D),e.StrokePath=i,t.registerClass(i,"egret.sys.StrokePath")}(egret||(egret={})),function(R){var D=["source-over","lighter","destination-out"],O="source-over",f="#000000",g={none:"butt",square:"square",round:"round"},S=[],t=function(){function t(){this.nestLevel=0,this.renderingMask=!1}var e=t.prototype;return e.render=function(t,e,i,n,s){this.nestLevel++;var r=e.context,a=s?t:null,o=this.drawDisplayObject(t,r,n,i,null,null,a);if(this.nestLevel--,0===this.nestLevel){6<S.length&&(S.length=6);for(var h=S.length,l=0;l<h;l++)S[l].resize(0,0)}return o},e.drawDisplayObject=function(t,e,i,n,s,r,a){var o,h=0;if(s&&!a?(s.isDirty&&(h+=s.drawToSurface()),o=s.$renderNode):o=t.$getRenderNode(),o){if(i){var l=o.renderRegion;if(r&&!r.intersects(l))o.needRedraw=!1;else if(!o.needRedraw)for(var c=i.length,u=0;u<c;u++)if(l.intersects(i[u])){o.needRedraw=!0;break}}else o.needRedraw=!0;var d,f;if(o.needRedraw)a?(d=t.$getConcatenatedAlphaAt(a,t.$getConcatenatedAlpha()),f=R.Matrix.create().copyFrom(t.$getConcatenatedMatrix()),t.$getConcatenatedMatrixAt(a,f),n.$preMultiplyInto(f,f),e.setTransform(f.a,f.b,f.c,f.d,f.tx,f.ty),R.Matrix.release(f)):(d=o.renderAlpha,f=o.renderMatrix,e.setTransform(f.a,f.b,f.c,f.d,f.tx+n.tx,f.ty+n.ty)),e.globalAlpha=d,h+=this.renderNode(o,e),o.needRedraw=!1}if(s&&!a)return h;var g=t.$children;if(g)for(var p=g.length,$=0;$<p;$++){var v=g[$];!v.$visible||v.$alpha<=0||v.$maskedObject||(0!==v.$blendMode||v.$mask&&(v.$mask.$parentDisplayList||a)?h+=this.drawWithClip(v,e,i,n,r,a):v.$scrollRect||v.$maskRect?h+=this.drawWithScrollRect(v,e,i,n,r,a):v.isFPS?this.drawDisplayObject(v,e,i,n,v.$displayList,r,a):h+=this.drawDisplayObject(v,e,i,n,v.$displayList,r,a))}return h},e.drawWithClip=function(t,e,i,n,s,r){var a=0,o=0!==t.$blendMode;if(o){var h=D[t.$blendMode];h||(h=O)}var l,c,u=t.$scrollRect?t.$scrollRect:t.$maskRect,d=t.$mask,f=R.Matrix.create();if(f.copyFrom(t.$getConcatenatedMatrix()),t.$parentDisplayList){var g=t.$parentDisplayList.root;g!==t.$stage&&t.$getConcatenatedMatrixAt(g,f)}if(d){var p=d.$getOriginalBounds();l=R.sys.Region.create(),(T=R.Matrix.create()).copyFrom(d.$getConcatenatedMatrix()),l.updateRegion(p,T),R.Matrix.release(T)}if(u&&(c=R.sys.Region.create()).updateRegion(u,f),c&&l?(c.intersect(l),R.sys.Region.release(l)):!c&&l&&(c=l),c){if(c.isEmpty()||s&&!s.intersects(c))return R.sys.Region.release(c),R.Matrix.release(f),a}else c=R.sys.Region.create(),p=t.$getOriginalBounds(),c.updateRegion(p,f);var $,v=!1;if(i){for(var y=i.length,m=0;m<y;m++)if(c.intersects(i[m])){v=!0;break}}else v=!0;if(!v)return R.sys.Region.release(c),R.Matrix.release(f),a;if(!(d||t.$children&&0!=t.$children.length)){if(u){var T=f;e.save(),e.setTransform(T.a,T.b,T.c,T.d,T.tx-c.minX,T.ty-c.minY),e.beginPath(),e.rect(u.x,u.y,u.width,u.height),e.clip()}return o&&(e.globalCompositeOperation=h),a+=this.drawDisplayObject(t,e,i,n,t.$displayList,s,r),o&&(e.globalCompositeOperation=O),u&&e.restore(),a}if(d&&($=d.$getRenderNode())&&(!d.$children||0==d.$children.length)&&$&&3==$.type&&1==$.drawData.length&&1==$.drawData[0].type&&1==$.drawData[0].fillAlpha){this.renderingMask=!0,e.save();var x=this.drawDisplayObject(d,e,i,n,d.$displayList,s,r);return this.renderingMask=!1,x+=this.drawDisplayObject(t,e,i,n,t.$displayList,s,r),e.restore(),x}var _=this.createRenderBuffer(c.width,c.height),b=_.context;if(!b)return a+=this.drawDisplayObject(t,e,i,n,t.$displayList,s,r),R.sys.Region.release(c),R.Matrix.release(f),a;if(u){T=f;b.setTransform(T.a,T.b,T.c,T.d,T.tx-c.minX,T.ty-c.minY),b.beginPath(),b.rect(u.x,u.y,u.width,u.height),b.clip()}b.setTransform(1,0,0,1,-c.minX,-c.minY);var E=R.Matrix.create().setTo(1,0,0,1,-c.minX,-c.minY);if(a+=this.drawDisplayObject(t,b,i,E,t.$displayList,c,r?t:null),R.Matrix.release(E),d){var C=d.$getRenderNode();if(C&&1==C.$getRenderCount()||d.$displayList)b.globalCompositeOperation="destination-in",a+=this.drawDisplayObject(d,b,i,E,d.$displayList,c,r?d:null);else{var F=this.createRenderBuffer(c.width,c.height),w=F.context;if(!w)return a+=this.drawDisplayObject(t,e,i,n,t.$displayList,s,r),S.push(_),R.sys.Region.release(c),R.Matrix.release(f),a;w.setTransform(1,0,0,1,-c.minX,-c.minY),E=R.Matrix.create().setTo(1,0,0,1,-c.minX,-c.minY);x=this.drawDisplayObject(d,w,i,E,d.$displayList,c,r?d:null);R.Matrix.release(E),0<x&&(a+=x,b.globalCompositeOperation="destination-in",b.setTransform(1,0,0,1,0,0),b.globalAlpha=1,b.drawImage(F.surface,0,0)),S.push(F)}}return 0<a&&(a++,o&&(e.globalCompositeOperation=h),e.globalAlpha=1,e.setTransform(1,0,0,1,c.minX+n.tx,c.minY+n.ty),e.drawImage(_.surface,0,0),o&&(e.globalCompositeOperation=O)),S.push(_),R.sys.Region.release(c),R.Matrix.release(f),a},e.drawWithScrollRect=function(t,e,i,n,s,r){var a=0,o=t.$scrollRect?t.$scrollRect:t.$maskRect;if(0==o.width||0==o.height)return a;var h=R.Matrix.create();if(h.copyFrom(t.$getConcatenatedMatrix()),t.$parentDisplayList){var l=t.$parentDisplayList.root;l!==t.$stage&&t.$getConcatenatedMatrixAt(l,h)}var c=R.sys.Region.create();if(o.isEmpty()||c.updateRegion(o,h),c.isEmpty()||s&&!s.intersects(c))return R.sys.Region.release(c),R.Matrix.release(h),a;var u=!1;if(i){for(var d=i.length,f=0;f<d;f++)if(c.intersects(i[f])){u=!0;break}}else u=!0;return u&&(e.save(),e.setTransform(h.a,h.b,h.c,h.d,h.tx+n.tx,h.ty+n.ty),e.beginPath(),e.rect(o.x,o.y,o.width,o.height),e.clip(),a+=this.drawDisplayObject(t,e,i,n,t.$displayList,c,r),e.restore()),R.sys.Region.release(c),R.Matrix.release(h),a},e.drawNodeToBuffer=function(t,e,i,n){var s=e.context;s.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),this.renderNode(t,s,n)},e.renderNode=function(t,e,i){var n=0;switch(t.type){case 1:n=this.renderBitmap(t,e);break;case 2:n=1,this.renderText(t,e);break;case 3:n=1,this.renderGraphics(t,e,i);break;case 4:n=this.renderGroup(t,e);break;case 5:e.setTransform(t.drawData[0],t.drawData[1],t.drawData[2],t.drawData[3],t.drawData[4],t.drawData[5]);break;case 6:e.globalAlpha=t.drawData[0]}return n},e.renderBitmap=function(t,e){var i=t.image;e.$imageSmoothingEnabled!=t.smoothing&&(e.imageSmoothingEnabled=t.smoothing,e.$imageSmoothingEnabled=t.smoothing);var n=t.drawData,s=n.length,r=0,a=t.matrix;a&&(e.save(),e.transform(a.a,a.b,a.c,a.d,a.tx,a.ty));for(var o=0;r<s;)o++,e.drawImage(i,n[r++],n[r++],n[r++],n[r++],n[r++],n[r++],n[r++],n[r++]);return a&&e.restore(),o},e.renderText=function(t,e){e.textAlign="left",e.textBaseline="middle",e.lineJoin="round";for(var i=t.drawData,n=i.length,s=0;s<n;){var r=i[s++],a=i[s++],o=i[s++],h=i[s++];e.font=d(t,h);var l=null==h.textColor?t.textColor:h.textColor,c=null==h.strokeColor?t.strokeColor:h.strokeColor,u=null==h.stroke?t.stroke:h.stroke;e.fillStyle=R.toColorString(l),e.strokeStyle=R.toColorString(c),u&&(e.lineWidth=2*u,e.strokeText(o,r,a)),e.fillText(o,r,a)}},e.renderGraphics=function(t,e,i){var n=t.drawData,s=n.length;i=!!i;for(var r=0;r<s;r++){var a=n[r];switch(a.type){case 1:var o=a;e.fillStyle=i?f:p(o.fillColor,o.fillAlpha),this.renderPath(a,e),this.renderingMask?e.clip():e.fill();break;case 2:var h=a;e.fillStyle=i?f:$(e,h.gradientType,h.colors,h.alphas,h.ratios,h.matrix),e.save();var l=h.matrix;this.renderPath(a,e),e.transform(l.a,l.b,l.c,l.d,l.tx,l.ty),e.fill(),e.restore();break;case 3:var c=a,u=c.lineWidth;e.lineWidth=u,e.strokeStyle=i?f:p(c.lineColor,c.lineAlpha),e.lineCap=g[c.caps],e.lineJoin=c.joints,e.miterLimit=c.miterLimit;var d=1===u||3===u;d&&e.translate(.5,.5),this.renderPath(a,e),e.stroke(),d&&e.translate(-.5,-.5)}}},e.renderPath=function(t,e){e.beginPath();for(var i=t.$data,n=t.$commands,s=n.length,r=0,a=0;a<s;a++){switch(n[a]){case 4:e.bezierCurveTo(i[r++],i[r++],i[r++],i[r++],i[r++],i[r++]);break;case 3:e.quadraticCurveTo(i[r++],i[r++],i[r++],i[r++]);break;case 2:e.lineTo(i[r++],i[r++]);break;case 1:e.moveTo(i[r++],i[r++])}}},e.renderGroup=function(t,e){for(var i=0,n=t.drawData,s=n.length,r=0;r<s;r++){var a=n[r];i+=this.renderNode(a,e)}return i},e.createRenderBuffer=function(t,e){var i=S.pop();return i?i.resize(t,e,!0):i=new R.sys.RenderBuffer(t,e),i},t}();function d(t,e){var i=(null==e.italic?t.italic:e.italic)?"italic ":"normal ";return i+=(null==e.bold?t.bold:e.bold)?"bold ":"normal ",i+=(null==e.size?t.size:e.size)+"px "+(e.fontFamily||t.fontFamily)}function p(t,e){return"rgba("+(t>>16)+","+(t>>8&255)+","+(255&t)+","+e+")"}function $(t,e,i,n,s,r){var a;a=e==R.GradientType.LINEAR?t.createLinearGradient(-1,0,1,0):t.createRadialGradient(0,0,0,0,0,1);for(var o=i.length,h=0;h<o;h++)a.addColorStop(s[h]/255,p(i[h],n[h]));return a}R.CanvasRenderer=t,R.registerClass(t,"egret.CanvasRenderer",["egret.sys.SystemRenderer"])}(egret||(egret={})),(egret||(egret={})).DeviceOrientation=null,egret||(egret={}),egret||(egret={}),function(t){var e=function(){function t(){}return t.WEB="web",t.NATIVE="native",t}();t.RuntimeType=e,t.registerClass(e,"egret.RuntimeType");var i=function(){function s(){}var t=__define;return t(s,"language",function(){return s.$language}),t(s,"isMobile",function(){return s.$isMobile}),t(s,"os",function(){return s.$os}),t(s,"runtimeType",function(){return s.$runtimeType}),s.$setNativeCapabilities=function(t){var e=t.split("-");if(e.length<=4){var i=e[0];switch(i){case"android":i="Android";break;case"ios":i="iOS"}s.$os=i;var n=e[2].substring(1,e[2].length);s.supportVersion=n}},s.$language="zh-CN",s.$os="Unknown",s.$runtimeType="Unknown",s.supportVersion="Unknown",s.renderMode="Unknown",s}();t.Capabilities=i,t.registerClass(i,"egret.Capabilities"),DEBUG&&(t.$markReadOnly(i,"language",!1),t.$markReadOnly(i,"isMobile",!1),t.$markReadOnly(i,"os",!1))}(egret||(egret={}));var testDeviceType=function(){if(!this.navigator)return!0;var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("mobile")||-1!=t.indexOf("android")},testRuntimeType=function(){return!!this.navigator};egret.Capabilities.$isMobile=testDeviceType(),egret.Capabilities.$runtimeType=testRuntimeType()?egret.RuntimeType.WEB:egret.RuntimeType.NATIVE,function(t){var e=function(i){function t(t,e){i.call(this,t),this.firstCharHeight=0,"string"==typeof e?this.charList=this.parseConfig(e):e&&e.hasOwnProperty("frames")?this.charList=e.frames:this.charList={}}__extends(t,i);var e=t.prototype;return e.getTexture=function(t){var e=this._textureMap[t];if(!e){var i=this.charList[t];if(!i)return null;e=this.createTexture(t,i.x,i.y,i.w,i.h,i.offX,i.offY,i.sourceW,i.sourceH),this._textureMap[t]=e}return e},e._getFirstCharHeight=function(){if(0==this.firstCharHeight)for(var t in this.charList){var e=this.charList[t];if(e){var i=e.sourceH;if(void 0===i){var n=e.h;void 0===n&&(n=0);var s=e.offY;void 0===s&&(s=0),i=n+s}if(i<=0)continue;this.firstCharHeight=i;break}}return this.firstCharHeight},e.parseConfig=function(t){for(var e=(t=t.split("\r\n").join("\n")).split("\n"),i=this.getConfigByKey(e[3],"count"),n={},s=4;s<4+i;s++){var r=e[s],a={};(n[String.fromCharCode(this.getConfigByKey(r,"id"))]=a).x=this.getConfigByKey(r,"x"),a.y=this.getConfigByKey(r,"y"),a.w=this.getConfigByKey(r,"width"),a.h=this.getConfigByKey(r,"height"),a.offX=this.getConfigByKey(r,"xoffset"),a.offY=this.getConfigByKey(r,"yoffset")}return n},e.getConfigByKey=function(t,e){for(var i=t.split(" "),n=0,s=i.length;n<s;n++){var r=i[n];if(e==r.substring(0,e.length)){var a=r.substring(e.length+1);return parseInt(a)}}return 0},t}(t.SpriteSheet);t.BitmapFont=e,t.registerClass(e,"egret.BitmapFont")}(egret||(egret={})),function(M){var t=function(t){function A(){t.call(this),this.$textOffsetX=0,this.$textOffsetY=0,this.$textStartX=0,this.$textStartY=0,this.$lineHeights=[],this.$renderNode=new M.sys.BitmapNode,this.$BitmapText={0:NaN,1:NaN,2:"",3:0,4:0,5:null,6:!1,7:!1,8:!1,9:!1,10:"left",11:"top",12:M.Bitmap.defaultSmoothing}}__extends(A,t);var e=__define,i=A.prototype;return e(i,"smoothing",function(){return this.$BitmapText[12]},function(t){t=!!t;var e=this.$BitmapText;t!=e[12]&&(e[12]=t,this.$invalidate())}),e(i,"text",function(){return this.$BitmapText[2]},function(t){this.$setText(t)}),i.$setText=function(t){var e=this.$BitmapText;return t!=e[2]&&(e[2]=t,this.$invalidateContentBounds(),!0)},i.$getWidth=function(){var t=this.$BitmapText[0];return isNaN(t)?this.$getContentBounds().width:t},i.$setWidth=function(t){var e=this.$BitmapText;return!(t<0||t==e[0])&&(e[0]=t,this.$invalidateContentBounds(),!0)},i.$invalidateContentBounds=function(){t.prototype.$invalidateContentBounds.call(this),this.$BitmapText[7]=!0},i.$getHeight=function(){var t=this.$BitmapText[1];return isNaN(t)?this.$getContentBounds().height:t},i.$setHeight=function(t){var e=this.$BitmapText;return!(t<0||t==e[1])&&(e[1]=t,this.$invalidateContentBounds(),!0)},e(i,"font",function(){return this.$BitmapText[5]},function(t){this.$setFont(t)}),i.$setFont=function(t){var e=this.$BitmapText;return e[5]!=t&&(e[5]=t,this.$BitmapText[6]=!0,this.$invalidateContentBounds(),!0)},e(i,"lineSpacing",function(){return this.$BitmapText[3]},function(t){this.$setLineSpacing(t)}),i.$setLineSpacing=function(t){t=+t||0;var e=this.$BitmapText;return e[3]!=t&&(e[3]=t,this.$invalidateContentBounds(),!0)},e(i,"letterSpacing",function(){return this.$BitmapText[4]},function(t){this.$setLetterSpacing(t)}),i.$setLetterSpacing=function(t){t=+t||0;var e=this.$BitmapText;return e[4]!=t&&(e[4]=t,this.$invalidateContentBounds(),!0)},e(i,"textAlign",function(){return this.$BitmapText[10]},function(t){this.$setTextAlign(t)}),i.$setTextAlign=function(t){var e=this.$BitmapText;return e[10]!=t&&(e[10]=t,this.$invalidateContentBounds(),!0)},e(i,"verticalAlign",function(){return this.$BitmapText[11]},function(t){this.$setVerticalAlign(t)}),i.$setVerticalAlign=function(t){var e=this.$BitmapText;return e[11]!=t&&(e[11]=t,this.$invalidateContentBounds(),!0)},i.$render=function(){var t=this.$BitmapText,e=this.$getTextLines(),i=e.length;if(0!=i){var n=this.$textLinesWidth,s=t[5],r=this.$renderNode;s.$texture&&(r.image=s.$texture._bitmapData),r.smoothing=t[12];for(var a=s._getFirstCharHeight(),o=Math.ceil(a*A.EMPTY_FACTOR),h=!isNaN(t[1]),l=t[8],c=t[0],u=t[1],d=t[10],f=this.$textOffsetY+this.$textStartY,g=this.$lineHeights,p=0;p<i;p++){var $=g[p];if(h&&0<p&&u<f+$)break;var v=e[p],y=v.length,m=this.$textOffsetX;if(d!=M.HorizontalAlign.LEFT){var T=l<c?c:l;d==M.HorizontalAlign.RIGHT?m+=T-n[p]:d==M.HorizontalAlign.CENTER&&(m+=Math.floor((T-n[p])/2))}for(var x=0;x<y;x++){var _=v.charAt(x),b=s.getTexture(_);if(b){var E=b._bitmapWidth,C=b._bitmapHeight;r.imageWidth=b._sourceWidth,r.imageHeight=b._sourceHeight,r.drawImage(b._bitmapX,b._bitmapY,E,C,m+b._offsetX,f+b._offsetY,b.$getScaleBitmapWidth(),b.$getScaleBitmapHeight()),m+=b.$getTextureWidth()+t[4]}else" "==_?m+=o:M.$warn(1011,_)}f+=$+t[3]}}},i.$measureContentBounds=function(t){0==this.$getTextLines().length?t.setEmpty():t.setTo(this.$textOffsetX+this.$textStartX,this.$textOffsetY+this.$textStartY,this.$BitmapText[8]-this.$textOffsetX,this.$BitmapText[9]-this.$textOffsetY)},e(i,"textWidth",function(){return this.$getTextLines(),this.$BitmapText[8]}),e(i,"textHeight",function(){return this.$getTextLines(),this.$BitmapText[9]}),i.$getTextLines=function(){var t=this.$BitmapText;if(!t[7])return this.textLines;var e=[];this.textLines=e;var i=[];this.$textLinesWidth=i,t[7]=!1;var n=[];if(this.$lineHeights=n,!t[2]||!t[5])return e;for(var s,r=t[3],a=t[4],o=0,h=0,l=0,c=0,u=!isNaN(t[0]),d=t[0],f=t[1],g=t[5],p=g._getFirstCharHeight(),$=Math.ceil(p*A.EMPTY_FACTOR),v=t[2].split(/(?:\r\n|\r|\n)/),y=v.length,m=!0,T=0;T<y;T++){for(var x=v[T],_=x.length,b=0,E=0,C=!0,F=!1,w=0;w<_;w++){C||(E+=a);var R,D,O=x.charAt(w),S=0,L=0,N=g.getTexture(O);if(N)R=N.$getTextureWidth(),D=N.$getTextureHeight(),S=N._offsetX,L=N._offsetY;else{if(" "!=O){M.$warn(1011,O),C&&(C=!1);continue}R=$,D=p}if(C&&(C=!1,l=Math.min(S,l)),m&&(m=!1,c=Math.min(L,c)),u&&0<w&&d<E+R){if(!B(x.substring(0,w)))break;_=(x=x.substring(w)).length,w=0,E=R,b=D}else E+=R,b=Math.max(D,b)}if(f&&0<T&&f<h)break;if(F=!0,!B(x))break}function B(t){return!(f&&0<e.length&&f<h)&&(h+=b+r,C||F||(E-=a),e.push(t),n.push(b),i.push(E),o=Math.max(E,o),!0)}return h-=r,t[8]=o,t[9]=h,this.$textOffsetX=l,this.$textOffsetY=c,this.$textStartX=0,this.$textStartY=0,o<d&&((s=t[10])==M.HorizontalAlign.RIGHT?this.$textStartX=d-o:s==M.HorizontalAlign.CENTER&&(this.$textStartX=Math.floor((d-o)/2))),h<f&&((s=t[11])==M.VerticalAlign.BOTTOM?this.$textStartY=f-h:s==M.VerticalAlign.MIDDLE&&(this.$textStartY=Math.floor((f-h)/2))),e},A.EMPTY_FACTOR=.33,A}(M.DisplayObject);M.BitmapText=t,M.registerClass(t,"egret.BitmapText")}(egret||(egret={})),function(t){var e=function(){function t(){}return t.LEFT="left",t.RIGHT="right",t.CENTER="center",t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.HorizontalAlign=e,t.registerClass(e,"egret.HorizontalAlign")}(egret||(egret={})),function(r){var t=function(){function t(){this.replaceArr=[],this.resutlArr=[],this.initReplaceArr()}var e=t.prototype;return e.initReplaceArr=function(){this.replaceArr=[],this.replaceArr.push([/&lt;/g,"<"]),this.replaceArr.push([/&gt;/g,">"]),this.replaceArr.push([/&amp;/g,"&"]),this.replaceArr.push([/&quot;/g,'"']),this.replaceArr.push([/&apos;/g,"'"])},e.replaceSpecial=function(t){for(var e=0;e<this.replaceArr.length;e++){var i=this.replaceArr[e][0],n=this.replaceArr[e][1];t=t.replace(i,n)}return t},e.parser=function(t){this.stackArray=[],this.resutlArr=[];for(var e=0,i=t.length;e<i;){var n=t.indexOf("<",e);if(n<0)this.addToResultArr(t.substring(e)),e=i;else{this.addToResultArr(t.substring(e,n));var s=t.indexOf(">",n);-1==s?(r.$error(1038),s=n):"/"==t.charAt(n+1)?this.stackArray.pop():this.addToArray(t.substring(n+1,s)),e=s+1}}return this.resutlArr},e.addToResultArr=function(t){""!=t&&(t=this.replaceSpecial(t),0<this.stackArray.length?this.resutlArr.push({text:t,style:this.stackArray[this.stackArray.length-1]}):this.resutlArr.push({text:t}))},e.changeStringToObject=function(t){var e={},i=[];if("i"==(t=t.trim()).charAt(0)||"b"==t.charAt(0)||"u"==t.charAt(0))this.addProperty(e,t,"true");else if(i=t.match(/^(font|a)\s/)){t=t.substring(i[0].length).trim();for(var n,s=0;n=t.match(this.getHeadReg());){var r=n[0],a="";if('"'==(t=t.substring(r.length).trim()).charAt(0)){s=t.indexOf('"',1);a=t.substring(1,s),s+=1}else if("'"==t.charAt(0)){s=t.indexOf("'",1);a=t.substring(1,s),s+=1}else s=(a=t.match(/(\S)+/)[0]).length;this.addProperty(e,r.substring(0,r.length-1).trim(),a.trim()),t=t.substring(s).trim()}}return e},e.getHeadReg=function(){return/^(color|textcolor|strokecolor|stroke|b|bold|i|italic|u|size|fontfamily|href|target)(\s)*=/},e.addProperty=function(t,e,i){switch(e.toLowerCase()){case"color":case"textcolor":i=i.replace(/#/,"0x"),t.textColor=parseInt(i);break;case"strokecolor":i=i.replace(/#/,"0x"),t.strokeColor=parseInt(i);break;case"stroke":t.stroke=parseInt(i);break;case"b":case"bold":t.bold="true"==i;break;case"u":t.underline="true"==i;break;case"i":case"italic":t.italic="true"==i;break;case"size":t.size=parseInt(i);break;case"fontfamily":t.fontFamily=i;break;case"href":t.href=this.replaceSpecial(i);break;case"target":t.target=this.replaceSpecial(i)}},e.addToArray=function(t){var e=this.changeStringToObject(t);if(0==this.stackArray.length)this.stackArray.push(e);else{var i=this.stackArray[this.stackArray.length-1];for(var n in i)null==e[n]&&(e[n]=i[n]);this.stackArray.push(e)}},t}();r.HtmlTextParser=t,r.registerClass(t,"egret.HtmlTextParser")}(egret||(egret={})),function(a){var t=function(t){function e(){t.call(this),this._text=null,this._isFocus=!1}__extends(e,t);var i=e.prototype;return i.init=function(t){this._text=t,this.stageText=new a.StageText,this.stageText.$setTextField(this._text)},i._addStageText=function(){this._text.$inputEnabled||(this._text.$touchEnabled=!0),this.tempStage=this._text.stage,this.stageText.$addToStage(),this.stageText.addEventListener("updateText",this.updateTextHandler,this),this._text.addEventListener(a.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this.stageText.addEventListener("blur",this.blurHandler,this),this.stageText.addEventListener("focus",this.focusHandler,this)},i._removeStageText=function(){this._text.$inputEnabled||(this._text.$touchEnabled=!1),this.stageText.$removeFromStage(),this.stageText.removeEventListener("updateText",this.updateTextHandler,this),this._text.removeEventListener(a.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this.tempStage.removeEventListener(a.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this.stageText.removeEventListener("blur",this.blurHandler,this),this.stageText.removeEventListener("focus",this.focusHandler,this)},i._getText=function(){return this.stageText.$getText()},i._setText=function(t){this.stageText.$setText(t)},i._setColor=function(t){this.stageText.$setColor(t)},i.focusHandler=function(t){this._isFocus||(this._isFocus=!0,t.showing||(this._text.$isTyping=!0),this._text.$invalidateContentBounds(),this._text.dispatchEvent(new a.FocusEvent(a.FocusEvent.FOCUS_IN,!0)))},i.blurHandler=function(t){this._isFocus&&(this._isFocus=!1,this.tempStage.removeEventListener(a.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this._text.$isTyping=!1,this._text.$invalidateContentBounds(),this.stageText.$onBlur(),this._text.dispatchEvent(new a.FocusEvent(a.FocusEvent.FOCUS_OUT,!0)))},i.onMouseDownHandler=function(t){t.stopPropagation(),this.$onFocus()},i.$onFocus=function(){this._text.visible&&(this._isFocus||(this.tempStage.addEventListener(a.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this.stageText.$show()))},i.onStageDownHandler=function(t){this.stageText.$hide()},i.updateTextHandler=function(t){var e=this._text.$TextField,i=this.stageText.$getText(),n=!1;if(null!=e[35]){var s=new RegExp("["+e[35]+"]","g"),r=i.match(s);i=r?r.join(""):"",n=!0}null!=e[36]&&(s=new RegExp("[^"+e[36]+"]","g"),i=(r=i.match(s))?r.join(""):"",n=!0),n&&this.stageText.$getText()!=i&&this.stageText.$setText(i),this.resetText(),this._text.dispatchEvent(new a.Event(a.Event.CHANGE,!0))},i.resetText=function(){this._text.$setBaseText(this.stageText.$getText())},i._hideInput=function(){this.stageText.$removeFromStage()},i.updateInput=function(){!this._text.$visible&&this.stageText&&this._hideInput()},i._updateProperties=function(){if(this._isFocus)return this.stageText.$resetStageText(),void this.updateInput();var t=this._text.$stage;if(null==t);else for(var e=this._text,i=e.$visible;i&&(e=e.parent)!=t;)i=e.$visible;this.stageText.$setText(this._text.$TextField[13]),this.stageText.$resetStageText(),this.updateInput()},e}(a.HashObject);a.InputController=t,a.registerClass(t,"egret.InputController")}(egret||(egret={})),egret||(egret={}),function(D){var O=new RegExp("(?=[\\u00BF-\\u1FFF\\u2C00-\\uD7FF]|\\b|\\s)(?![)}\\.\\,\\!\\?\\]\\:])");function S(t,e,i){var n=null==(i=i||{}).italic?e[16]:i.italic,s=null==i.bold?e[15]:i.bold,r=null==i.size?e[0]:i.size,a=i.fontFamily||e[8]||o.default_fontFamily;return D.sys.measureText(t,a,r,s,n)}var o=function(n){function m(){n.call(this),this.$inputEnabled=!1,this.inputUtils=null,this.graphicsNode=null,this.isFlow=!1,this.textArr=[],this.linesArr=[],this.$isTyping=!1;var t=new D.sys.TextNode;t.fontFamily=m.default_fontFamily,this.textNode=t,this.$renderNode=t,this.$TextField={0:30,1:0,2:16777215,3:NaN,4:NaN,5:0,6:0,7:0,8:m.default_fontFamily,9:"left",10:"top",11:"#ffffff",12:"",13:"",14:[],15:!1,16:!1,17:!0,18:!1,19:!1,20:!1,21:0,22:0,23:0,24:D.TextFieldType.DYNAMIC,25:0,26:"#000000",27:0,28:-1,29:0,30:!1,31:!1,32:0,33:!1,34:16777215,35:null,36:null}}__extends(m,n);var t=__define,e=m.prototype;return e.isInput=function(){return this.$TextField[24]==D.TextFieldType.INPUT},e.$setTouchEnabled=function(t){var e=n.prototype.$setTouchEnabled.call(this,t);return this.isInput()&&(this.$inputEnabled=!0),e},t(e,"fontFamily",function(){return this.$TextField[8]},function(t){this.$setFontFamily(t)}),e.$setFontFamily=function(t){var e=this.$TextField;return e[8]!=t&&(e[8]=t,this.invalidateFontString(),!0)},t(e,"size",function(){return this.$TextField[0]},function(t){this.$setSize(t)}),e.$setSize=function(t){t=+t||0;var e=this.$TextField;return e[0]!=t&&(e[0]=t,this.invalidateFontString(),!0)},t(e,"bold",function(){return this.$TextField[15]},function(t){this.$setBold(t)}),e.$setBold=function(t){t=!!t;var e=this.$TextField;return t!=e[15]&&(e[15]=t,this.invalidateFontString(),!0)},t(e,"italic",function(){return this.$TextField[16]},function(t){this.$setItalic(t)}),e.$setItalic=function(t){t=!!t;var e=this.$TextField;return t!=e[16]&&(e[16]=t,this.invalidateFontString(),!0)},e.invalidateFontString=function(){this.$TextField[17]=!0,this.$invalidateTextField()},t(e,"textAlign",function(){return this.$TextField[9]},function(t){this.$setTextAlign(t)}),e.$setTextAlign=function(t){var e=this.$TextField;return e[9]!=t&&(e[9]=t,this.$invalidateTextField(),!0)},t(e,"verticalAlign",function(){return this.$TextField[10]},function(t){this.$setVerticalAlign(t)}),e.$setVerticalAlign=function(t){var e=this.$TextField;return e[10]!=t&&(e[10]=t,this.$invalidateTextField(),!0)},t(e,"lineSpacing",function(){return this.$TextField[1]},function(t){this.$setLineSpacing(t)}),e.$setLineSpacing=function(t){t=+t||0;var e=this.$TextField;return e[1]!=t&&(e[1]=t,this.$invalidateTextField(),!0)},t(e,"textColor",function(){return this.$TextField[2]},function(t){this.$setTextColor(t)}),e.$setTextColor=function(t){t=0|+t;var e=this.$TextField;return e[2]!=t&&(e[2]=t,this.inputUtils&&this.inputUtils._setColor(this.$TextField[2]),this.$invalidate(),!0)},t(e,"wordWrap",function(){return this.$TextField[19]},function(t){t=!!t;var e=this.$TextField;t!=e[19]&&(e[20]||(e[19]=t,this.$invalidateTextField()))}),t(e,"type",function(){return this.$TextField[24]},function(t){this.$setType(t)}),e.$setType=function(t){var e=this.$TextField;return e[24]!=t&&((e[24]=t)==D.TextFieldType.INPUT?(isNaN(e[3])&&this.$setWidth(100),isNaN(e[4])&&this.$setHeight(30),this.$setTouchEnabled(!0),null==this.inputUtils&&(this.inputUtils=new D.InputController),this.inputUtils.init(this),this.$invalidateTextField(),this.$stage&&this.inputUtils._addStageText()):(this.inputUtils&&(this.inputUtils._removeStageText(),this.inputUtils=null),this.$setTouchEnabled(!1)),!0)},t(e,"text",function(){return this.$getText()},function(t){this.$setText(t)}),e.$getText=function(){return this.$TextField[24]==D.TextFieldType.INPUT?this.inputUtils._getText():this.$TextField[13]},e.$setBaseText=function(t){null==t&&(t=""),t=t.toString(),this.isFlow=!1;var e=this.$TextField;if(e[13]!=t){this.$invalidateTextField(),e[13]=t;var i="";return i=e[20]?this.changeToPassText(t):t,this.setMiddleStyle([{text:i}]),!0}return!1},e.$setText=function(t){null==t&&(t="");var e=this.$setBaseText(t);return this.inputUtils&&this.inputUtils._setText(this.$TextField[13]),e},t(e,"displayAsPassword",function(){return this.$TextField[20]},function(t){this.$setDisplayAsPassword(t)}),e.$setDisplayAsPassword=function(t){var e=this.$TextField;if(e[20]!=t){e[20]=t,this.$invalidateTextField();var i="";return i=t?this.changeToPassText(e[13]):e[13],this.setMiddleStyle([{text:i}]),!0}return!1},t(e,"strokeColor",function(){return this.$TextField[25]},function(t){t=+t||0,this.$setStrokeColor(t)}),e.$setStrokeColor=function(t){var e=this.$TextField;return e[25]!=t&&(this.$invalidateTextField(),e[25]=t,e[26]=D.toColorString(t),!0)},t(e,"stroke",function(){return this.$TextField[27]},function(t){this.$setStroke(t)}),e.$setStroke=function(t){return this.$TextField[27]!=t&&(this.$invalidateTextField(),this.$TextField[27]=t,!0)},t(e,"maxChars",function(){return this.$TextField[21]},function(t){this.$setMaxChars(t)}),e.$setMaxChars=function(t){return this.$TextField[21]!=t&&(this.$TextField[21]=t,!0)},t(e,"scrollV",function(){return Math.min(Math.max(this.$TextField[28],1),this.maxScrollV)},function(t){this.$TextField[28]=Math.max(t,1),this.$invalidateTextField()}),t(e,"maxScrollV",function(){return this.$getLinesArr(),Math.max(this.$TextField[29]-D.TextFieldUtils.$getScrollNum(this)+1,1)}),t(e,"selectionBeginIndex",function(){return 0}),t(e,"selectionEndIndex",function(){return 0}),t(e,"caretIndex",function(){return 0}),e.$setSelection=function(t,e){return!1},e.$getLineHeight=function(){return this.$TextField[1]+this.$TextField[0]},t(e,"numLines",function(){return this.$getLinesArr(),this.$TextField[29]}),t(e,"multiline",function(){return this.$TextField[30]},function(t){this.$setMultiline(t)}),e.$setMultiline=function(t){return this.$TextField[30]=t,this.$invalidateTextField(),!0},t(e,"restrict",function(){var t=this.$TextField,e=null;return null!=t[35]&&(e=t[35]),null!=t[36]&&(null==e&&(e=""),e+="^"+t[36]),e},function(t){var e=this.$TextField;if(null==t)e[35]=null,e[36]=null;else{for(var i=-1;i<t.length&&0!=(i=t.indexOf("^",i))&&0<i&&"\\"==t.charAt(i-1);)i++;0==i?(e[35]=null,e[36]=t.substring(i+1)):0<i?(e[35]=t.substring(0,i),e[36]=t.substring(i+1)):(e[35]=t,e[36]=null)}}),e.$setWidth=function(t){var e=this.$TextField;if(isNaN(t)){if(isNaN(e[3]))return!1;e[3]=NaN}else{if(e[3]==t)return!1;e[3]=t}return!((t=+t)<0)&&(this.$invalidateTextField(),!0)},e.$setHeight=function(t){var e=this.$TextField;if(isNaN(t)){if(isNaN(e[4]))return!1;e[4]=NaN}else{if(e[4]==t)return!1;e[4]=t}return!((t=+t)<0)&&(this.$invalidateTextField(),!0)},e.$getWidth=function(){var t=this.$TextField;return isNaN(t[3])?this.$getContentBounds().width:t[3]},e.$getHeight=function(){var t=this.$TextField;return isNaN(t[4])?this.$getContentBounds().height:t[4]},t(e,"border",function(){return this.$TextField[31]},function(t){this.$TextField[31]=!!t,this.$invalidate()}),t(e,"borderColor",function(){return this.$TextField[32]},function(t){this.$TextField[32]=+t||0,this.$invalidate()}),t(e,"background",function(){return this.$TextField[33]},function(t){this.$TextField[33]=t,this.$invalidate()}),t(e,"backgroundColor",function(){return this.$TextField[34]},function(t){this.$TextField[34]=t,this.$invalidate()}),e.fillBackground=function(t){var e=this.graphicsNode;e&&e.clear();var i=this.$TextField;if(i[33]||i[31]||0<t.length){if(!e){e=this.graphicsNode=new D.sys.GraphicsNode;var n=new D.sys.GroupNode;n.addNode(e),n.addNode(this.textNode),this.$renderNode=n}var s;if(i[33]&&e.beginFill(i[34]).drawRect(0,0,this.$getWidth(),this.$getHeight()),i[31]&&(s=e.lineStyle(1,i[32])).drawRect(0,0,this.$getWidth()-1,this.$getHeight()-1),0<t.length)for(var r=i[2],a=-1,o=t.length,h=0;h<o;h+=4){var l=t[h],c=t[h+1],u=t[h+2],d=t[h+3]||r;(a<0||a!=d)&&(a=d,s=e.lineStyle(2,d,1,D.CapsStyle.NONE)),s.moveTo(l,c),s.lineTo(l+u,c)}}if(e){var f=this.$getRenderBounds();e.x=f.x,e.y=f.y,e.width=f.width,e.height=f.height,D.Rectangle.release(f)}},e.setFocus=function(){this.type==D.TextFieldType.INPUT&&this.$stage&&this.inputUtils.$onFocus()},e.$onRemoveFromStage=function(){n.prototype.$onRemoveFromStage.call(this),this.removeEvent(),this.$TextField[24]==D.TextFieldType.INPUT&&this.inputUtils._removeStageText()},e.$onAddToStage=function(t,e){n.prototype.$onAddToStage.call(this,t,e),this.addEvent(),this.$TextField[24]==D.TextFieldType.INPUT&&this.inputUtils._addStageText()},e.$invalidateTextField=function(){this.$invalidateContentBounds(),this.$TextField[18]=!0},e.$update=function(t){var e=this.$getRenderBounds(),i=n.prototype.$update.call(this,e);return D.Rectangle.release(e),i},e.$getRenderBounds=function(){var t=this.$getContentBounds(),e=D.Rectangle.create();e.copyFrom(t),this.$TextField[31]&&(e.width+=2,e.height+=2);var i=2*this.$TextField[27];return 0<i&&(e.width+=2*i,e.height+=2*i),e.x-=i+2,e.y-=i+2,e.width=Math.ceil(e.width)+4,e.height=Math.ceil(e.height)+4,e},e.$measureContentBounds=function(t){this.$getLinesArr();var e=isNaN(this.$TextField[3])?this.$TextField[5]:this.$TextField[3],i=isNaN(this.$TextField[4])?D.TextFieldUtils.$getTextHeight(this):this.$TextField[4];t.setTo(0,0,e,i)},e.$render=function(){if(this.$TextField[24]==D.TextFieldType.INPUT){if((this.$hasAnyFlags(2032)||this.$hasAnyFlags(1648))&&this.inputUtils._updateProperties(),this.$isTyping)return}else if(0==this.$TextField[3])return;var t=this.drawText();this.fillBackground(t);var e=this.$getRenderBounds(),i=this.textNode;i.x=e.x,i.y=e.y,i.width=Math.ceil(e.width),i.height=Math.ceil(e.height),D.Rectangle.release(e)},t(e,"textFlow",function(){return this.textArr},function(t){this.isFlow=!0;var e="";null==t&&(t=[]);for(var i=0;i<t.length;i++){e+=t[i].text}this.$TextField[20]?this.$setBaseText(e):(this.$TextField[13]=e,this.setMiddleStyle(t))}),e.changeToPassText=function(t){if(this.$TextField[20]){for(var e="",i=0,n=t.length;i<n;i++)switch(t.charAt(i)){case"\n":e+="\n";break;case"\r":break;default:e+="*"}return e}return t},e.setMiddleStyle=function(t){this.$TextField[18]=!0,this.textArr=t,this.$invalidateTextField()},t(e,"textWidth",function(){return this.$getLinesArr(),this.$TextField[5]}),t(e,"textHeight",function(){return this.$getLinesArr(),D.TextFieldUtils.$getTextHeight(this)}),e.appendText=function(t){this.appendElement({text:t})},e.appendElement=function(t){var e=this.$TextField[13]+t.text;this.$TextField[20]?this.$setBaseText(e):(this.$TextField[13]=e,this.textArr.push(t),this.setMiddleStyle(this.textArr))},e.$getLinesArr=function(){var t=this.$TextField;if(!t[18])return this.linesArr;t[18]=!1;var e=this.textArr;this.linesArr.length=0,t[6]=0,t[5]=0;var i=t[3];if(!isNaN(i)&&0==i)return[{width:t[29]=0,height:0,charNum:0,elements:[],hasNextLine:!1}];for(var n,s=this.linesArr,r=0,a=0,o=0,h=0,l=0,c=e.length;l<c;l++){var u=e[l];u.style=u.style||{};for(var d=u.text.toString().split(/(?:\r\n|\r|\n)/),f=0,g=d.length;f<g;f++){null==s[h]&&(n={width:0,height:0,elements:[],charNum:0,hasNextLine:!1},s[h]=n,a=o=r=0),o=t[24]==D.TextFieldType.INPUT?t[0]:Math.max(o,u.style.size||t[0]);var p=!0;if(""==d[f])f==g-1&&(p=!1);else{var $=S(d[f],t,u.style);if(isNaN(i))r+=$,a+=d[f].length,n.elements.push({width:$,text:d[f],style:u.style}),f==g-1&&(p=!1);else if(r+$<=i)n.elements.push({width:$,text:d[f],style:u.style}),r+=$,a+=d[f].length,f==g-1&&(p=!1);else{var v=0,y=0,m=d[f];if(t[19])var T=m.split(O);else T=m.match(/./g);for(var x=T.length,_=0;v<x&&($=S(T[v],t,u.style),!(0!=r&&i<r+$&&r+v!=0));v++)if(i<y+$)for(var b=T[v].match(/./g),E=0,C=b.length;E<C&&($=S(b[E],t,u.style),!(0<E&&i<r+$));E++)y+=$,r+=$,a+=_+=b[E].length;else y+=$,r+=$,a+=_+=T[v].length;if(0<v){n.elements.push({width:y,text:m.substring(0,_),style:u.style});for(var F=m.substring(_),w=0,R=F.length;w<R&&" "==F.charAt(w);w++);d[f]=F.substring(w)}""!=d[f]&&(f--,p=!1)}}p&&(a++,n.hasNextLine=!0),f<d.length-1&&(n.width=r,n.height=o,n.charNum=a,t[5]=Math.max(t[5],r),t[6]+=o,h++)}l==e.length-1&&n&&(n.width=r,n.height=o,n.charNum=a,t[5]=Math.max(t[5],r),t[6]+=o)}return t[29]=s.length,s},e.drawText=function(){var t=this.textNode,e=this.$TextField;t.bold=e[15],t.fontFamily=e[8]||m.default_fontFamily,t.italic=e[16],t.size=e[0],t.stroke=e[27],t.strokeColor=e[25],t.textColor=e[2];var i=this.$getLinesArr();if(0==e[5])return[];var n=isNaN(e[3])?e[5]:e[3],s=D.TextFieldUtils.$getTextHeight(this),r=0,a=D.TextFieldUtils.$getStartLine(this),o=e[4];!isNaN(o)&&s<o&&(r+=D.TextFieldUtils.$getValign(this)*(o-s));r=Math.round(r);for(var h=D.TextFieldUtils.$getHalign(this),l=0,c=[],u=a,d=e[29];u<d;u++){var f=i[u],g=f.height;if(r+=g/2,u!=a){if(e[24]==D.TextFieldType.INPUT&&!e[30])break;if(!isNaN(o)&&o<r)break}l=Math.round((n-f.width)*h);for(var p=0,$=f.elements.length;p<$;p++){var v=f.elements[p],y=v.style.size||e[0];t.drawText(l,r+(g-y)/2,v.text,v.style),v.style.underline&&c.push(l,r+g/2,v.width,v.style.textColor),l+=v.width}r+=g/2+e[1]}return c},e.addEvent=function(){this.addEventListener(D.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},e.removeEvent=function(){this.removeEventListener(D.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},e.onTapHandler=function(t){if(this.$TextField[24]!=D.TextFieldType.INPUT){var e=D.TextFieldUtils.$getTextElement(this,t.localX,t.localY);if(null!=e){var i=e.style;if(i&&i.href)if(i.href.match(/^event:/)){var n=i.href.match(/^event:/)[0];D.TextEvent.dispatchTextEvent(this,D.TextEvent.LINK,i.href.substring(n.length))}else open(i.href,i.target||"_blank")}}},m.default_fontFamily="Arial",m}(D.DisplayObject);D.TextField=o,D.registerClass(o,"egret.TextField"),DEBUG&&(D.$markReadOnly(o,"numLines"),D.$markReadOnly(o,"textWidth"),D.$markReadOnly(o,"textHeight"))}(egret||(egret={})),function(t){var e=function(){function t(){}return t.DYNAMIC="dynamic",t.INPUT="input",t}();t.TextFieldType=e,t.registerClass(e,"egret.TextFieldType")}(egret||(egret={})),function(s){var t=function(){function g(){}return g.$getStartLine=function(t){var e=t.$TextField,i=g.$getTextHeight(t),n=0,s=e[4];return isNaN(s)||(i<s||s<i&&(n=Math.max(e[28]-1,0),n=Math.min(e[29]-1,n)),e[30]||(n=Math.max(e[28]-1,0),0<e[29]&&(n=Math.min(e[29]-1,n)))),n},g.$getHalign=function(t){var e=t.$getLinesArr(),i=0;return t.$TextField[9]==s.HorizontalAlign.CENTER?i=.5:t.$TextField[9]==s.HorizontalAlign.RIGHT&&(i=1),t.$TextField[24]==s.TextFieldType.INPUT&&!t.$TextField[30]&&1<e.length&&(i=0),i},g.$getTextHeight=function(t){return s.TextFieldType.INPUT!=t.$TextField[24]||t.$TextField[30]?t.$TextField[6]+(t.$TextField[29]-1)*t.$TextField[1]:t.$TextField[0]},g.$getValign=function(t){var e=g.$getTextHeight(t),i=t.$TextField[4];if(!isNaN(i)&&e<i){var n=0;return t.$TextField[10]==s.VerticalAlign.MIDDLE?n=.5:t.$TextField[10]==s.VerticalAlign.BOTTOM&&(n=1),n}return 0},g.$getTextElement=function(t,e,i){var n=g.$getHit(t,e,i),s=t.$getLinesArr();return n&&s[n.lineIndex]&&s[n.lineIndex].elements[n.textElementIndex]?s[n.lineIndex].elements[n.textElementIndex]:null},g.$getHit=function(t,e,i){var n=t.$getLinesArr();if(0==t.$TextField[3])return null;var s=0,r=g.$getTextHeight(t),a=0,o=t.$TextField[4];!isNaN(o)&&r<o&&(0!=(a=g.$getValign(t)*(o-r))&&(i-=a));for(var h=0,l=g.$getStartLine(t);l<n.length;l++){var c=n[l];if(h+c.height>=i){s=l+1;break}if((h+=c.height)+t.$TextField[1]>i)return null;h+=t.$TextField[1]}if(0==s)return null;var u=n[s-1],d=0;for(l=0;l<u.elements.length;l++){var f=u.elements[l];if(!(d+f.width<e))return{lineIndex:s-1,textElementIndex:l};d+=f.width}return null},g.$getScrollNum=function(t){var e=1;if(t.$TextField[30]){var i=t.height,n=t.size,s=t.lineSpacing;n/2<i-(n+s)*(e=Math.floor(i/(n+s)))&&e++}return e},g}();s.TextFieldUtils=t,s.registerClass(t,"egret.TextFieldUtils")}(egret||(egret={})),function(t){t.sys||(t.sys={})}(egret||(egret={})),function(t){var e=function(){function t(){}return t.TOP="top",t.BOTTOM="bottom",t.MIDDLE="middle",t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.VerticalAlign=e,t.registerClass(e,"egret.VerticalAlign")}(egret||(egret={})),function(i){var n=function(){function t(){}return t.LITTLE_ENDIAN="littleEndian",t.BIG_ENDIAN="bigEndian",t}();i.Endian=n,i.registerClass(n,"egret.Endian");var t=function(){function s(t){this.BUFFER_EXT_SIZE=0,this.EOF_byte=-1,this.EOF_code_point=-1,this._setArrayBuffer(t||new ArrayBuffer(this.BUFFER_EXT_SIZE)),this.endian=n.BIG_ENDIAN}var t=__define,e=s.prototype;return e._setArrayBuffer=function(t){this.write_position=t.byteLength,this.data=new DataView(t),this._position=0},e.setArrayBuffer=function(t){},t(e,"buffer",function(){return this.data.buffer},function(t){this.data=new DataView(t)}),t(e,"dataView",function(){return this.data},function(t){this.data=t,this.write_position=t.byteLength}),t(e,"bufferOffset",function(){return this.data.byteOffset}),t(e,"position",function(){return this._position},function(t){this._position=t,this.write_position=t>this.write_position?t:this.write_position}),t(e,"length",function(){return this.write_position},function(t){this.write_position=t;var e=new Uint8Array(new ArrayBuffer(t)),i=this.data.buffer.byteLength;t<i&&(this._position=t);var n=Math.min(i,t);e.set(new Uint8Array(this.data.buffer,0,n)),this.buffer=e.buffer}),t(e,"bytesAvailable",function(){return this.data.byteLength-this._position}),e.clear=function(){this._setArrayBuffer(new ArrayBuffer(this.BUFFER_EXT_SIZE))},e.readBoolean=function(){return this.validate(s.SIZE_OF_BOOLEAN)?0!=this.data.getUint8(this.position++):null},e.readByte=function(){return this.validate(s.SIZE_OF_INT8)?this.data.getInt8(this.position++):null},e.readBytes=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),0==i)i=this.bytesAvailable;else if(!this.validate(i))return null;t?t.validateBuffer(e+i):t=new s(new ArrayBuffer(e+i));for(var n=0;n<i;n++)t.data.setUint8(n+e,this.data.getUint8(this.position++))},e.readDouble=function(){if(!this.validate(s.SIZE_OF_FLOAT64))return null;var t=this.data.getFloat64(this.position,this.endian==n.LITTLE_ENDIAN);return this.position+=s.SIZE_OF_FLOAT64,t},e.readFloat=function(){if(!this.validate(s.SIZE_OF_FLOAT32))return null;var t=this.data.getFloat32(this.position,this.endian==n.LITTLE_ENDIAN);return this.position+=s.SIZE_OF_FLOAT32,t},e.readInt=function(){if(!this.validate(s.SIZE_OF_INT32))return null;var t=this.data.getInt32(this.position,this.endian==n.LITTLE_ENDIAN);return this.position+=s.SIZE_OF_INT32,t},e.readShort=function(){if(!this.validate(s.SIZE_OF_INT16))return null;var t=this.data.getInt16(this.position,this.endian==n.LITTLE_ENDIAN);return this.position+=s.SIZE_OF_INT16,t},e.readUnsignedByte=function(){return this.validate(s.SIZE_OF_UINT8)?this.data.getUint8(this.position++):null},e.readUnsignedInt=function(){if(!this.validate(s.SIZE_OF_UINT32))return null;var t=this.data.getUint32(this.position,this.endian==n.LITTLE_ENDIAN);return this.position+=s.SIZE_OF_UINT32,t},e.readUnsignedShort=function(){if(!this.validate(s.SIZE_OF_UINT16))return null;var t=this.data.getUint16(this.position,this.endian==n.LITTLE_ENDIAN);return this.position+=s.SIZE_OF_UINT16,t},e.readUTF=function(){if(!this.validate(s.SIZE_OF_UINT16))return null;var t=this.data.getUint16(this.position,this.endian==n.LITTLE_ENDIAN);return this.position+=s.SIZE_OF_UINT16,0<t?this.readUTFBytes(t):""},e.readUTFBytes=function(t){if(!this.validate(t))return null;var e=new Uint8Array(this.buffer,this.bufferOffset+this.position,t);return this.position+=t,this.decodeUTF8(e)},e.writeBoolean=function(t){this.validateBuffer(s.SIZE_OF_BOOLEAN),this.data.setUint8(this.position++,t?1:0)},e.writeByte=function(t){this.validateBuffer(s.SIZE_OF_INT8),this.data.setInt8(this.position++,t)},e.writeBytes=function(t,e,i){var n;if(void 0===e&&(e=0),void 0===i&&(i=0),!(e<0)&&!(i<0)&&0<(n=0==i?t.length-e:Math.min(t.length-e,i))){this.validateBuffer(n);var s=new DataView(t.buffer);for(i=n;4<i;i-=4)this.data.setUint32(this._position,s.getUint32(e)),this.position+=4,e+=4;for(;0<i;i--)this.data.setUint8(this.position++,s.getUint8(e++))}},e.writeDouble=function(t){this.validateBuffer(s.SIZE_OF_FLOAT64),this.data.setFloat64(this.position,t,this.endian==n.LITTLE_ENDIAN),this.position+=s.SIZE_OF_FLOAT64},e.writeFloat=function(t){this.validateBuffer(s.SIZE_OF_FLOAT32),this.data.setFloat32(this.position,t,this.endian==n.LITTLE_ENDIAN),this.position+=s.SIZE_OF_FLOAT32},e.writeInt=function(t){this.validateBuffer(s.SIZE_OF_INT32),this.data.setInt32(this.position,t,this.endian==n.LITTLE_ENDIAN),this.position+=s.SIZE_OF_INT32},e.writeShort=function(t){this.validateBuffer(s.SIZE_OF_INT16),this.data.setInt16(this.position,t,this.endian==n.LITTLE_ENDIAN),this.position+=s.SIZE_OF_INT16},e.writeUnsignedInt=function(t){this.validateBuffer(s.SIZE_OF_UINT32),this.data.setUint32(this.position,t,this.endian==n.LITTLE_ENDIAN),this.position+=s.SIZE_OF_UINT32},e.writeUnsignedShort=function(t){this.validateBuffer(s.SIZE_OF_UINT16),this.data.setUint16(this.position,t,this.endian==n.LITTLE_ENDIAN),this.position+=s.SIZE_OF_UINT16},e.writeUTF=function(t){var e=this.encodeUTF8(t),i=e.length;this.validateBuffer(s.SIZE_OF_UINT16+i),this.data.setUint16(this.position,i,this.endian==n.LITTLE_ENDIAN),this.position+=s.SIZE_OF_UINT16,this._writeUint8Array(e,!1)},e.writeUTFBytes=function(t){this._writeUint8Array(this.encodeUTF8(t))},e.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},e._writeUint8Array=function(t,e){void 0===e&&(e=!0),e&&this.validateBuffer(this.position+t.length);for(var i=0;i<t.length;i++)this.data.setUint8(this.position++,t[i])},e.validate=function(t){if(0<this.data.byteLength&&this._position+t<=this.data.byteLength)return!0;i.$error(1025)},e.validateBuffer=function(t,e){if(void 0===e&&(e=!1),this.write_position=t>this.write_position?t:this.write_position,t+=this._position,this.data.byteLength<t||e){var i=new Uint8Array(new ArrayBuffer(t+this.BUFFER_EXT_SIZE)),n=Math.min(this.data.buffer.byteLength,t+this.BUFFER_EXT_SIZE);i.set(new Uint8Array(this.data.buffer,0,n)),this.buffer=i.buffer}},e.encodeUTF8=function(t){for(var e=0,i=this.stringToCodePoints(t),n=[];i.length>e;){var s=i[e++];if(this.inRange(s,55296,57343))this.encoderError(s);else if(this.inRange(s,0,127))n.push(s);else{var r,a;for(this.inRange(s,128,2047)?(r=1,a=192):this.inRange(s,2048,65535)?(r=2,a=224):this.inRange(s,65536,1114111)&&(r=3,a=240),n.push(this.div(s,Math.pow(64,r))+a);0<r;){var o=this.div(s,Math.pow(64,r-1));n.push(128+o%64),r-=1}}}return new Uint8Array(n)},e.decodeUTF8=function(t){for(var e,i=0,n="",s=0,r=0,a=0,o=0;t.length>i;){var h=t[i++];if(h==this.EOF_byte)e=0!=r?this.decoderError(!1):this.EOF_code_point;else if(0==r)this.inRange(h,0,127)?e=h:(this.inRange(h,194,223)?(r=1,o=128,s=h-192):this.inRange(h,224,239)?(r=2,o=2048,s=h-224):this.inRange(h,240,244)?(r=3,o=65536,s=h-240):this.decoderError(!1),s*=Math.pow(64,r),e=null);else if(this.inRange(h,128,191))if(a+=1,s+=(h-128)*Math.pow(64,r-a),a!==r)e=null;else{var l=s,c=o;o=a=r=s=0,e=this.inRange(l,c,1114111)&&!this.inRange(l,55296,57343)?l:this.decoderError(!1,h)}else o=a=r=s=0,i--,e=this.decoderError(!1,h);null!==e&&e!==this.EOF_code_point&&(e<=65535?0<e&&(n+=String.fromCharCode(e)):(e-=65536,n+=String.fromCharCode(55296+(e>>10&1023)),n+=String.fromCharCode(56320+(1023&e))))}return n},e.encoderError=function(t){i.$error(1026,t)},e.decoderError=function(t,e){return t&&i.$error(1027),e||65533},e.inRange=function(t,e,i){return e<=t&&t<=i},e.div=function(t,e){return Math.floor(t/e)},e.stringToCodePoints=function(t){for(var e=[],i=0,n=t.length;i<t.length;){var s=t.charCodeAt(i);if(this.inRange(s,55296,57343))if(this.inRange(s,56320,57343))e.push(65533);else if(i==n-1)e.push(65533);else{var r=t.charCodeAt(i+1);if(this.inRange(r,56320,57343)){var a=1023&s,o=1023&r;i+=1,e.push(65536+(a<<10)+o)}else e.push(65533)}else e.push(s);i+=1}return e},s.SIZE_OF_BOOLEAN=1,s.SIZE_OF_INT8=1,s.SIZE_OF_INT16=2,s.SIZE_OF_INT32=4,s.SIZE_OF_UINT8=1,s.SIZE_OF_UINT16=2,s.SIZE_OF_UINT32=4,s.SIZE_OF_FLOAT32=4,s.SIZE_OF_FLOAT64=8,s}();i.ByteArray=t,i.registerClass(t,"egret.ByteArray")}(egret||(egret={})),function(t){var e=function(){function t(){}return __define(t,"logLevel",void 0,function(t){}),t.ALL="all",t.DEBUG="debug",t.INFO="info",t.WARN="warn",t.ERROR="error",t.OFF="off",t}();t.Logger=e,t.registerClass(e,"egret.Logger")}(egret||(egret={})),function(t){var e=function(){function s(){}return s.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},s.sin=function(t){var e=Math.floor(t),i=e+1,n=s.sinInt(e);return(t-e)*s.sinInt(i)+(i-t)*n},s.sinInt=function(t){return(t%=360)<0&&(t+=360),t<90?egret_sin_map[t]:t<180?egret_cos_map[t-90]:t<270?-egret_sin_map[t-180]:-egret_cos_map[t-270]},s.cos=function(t){var e=Math.floor(t),i=e+1,n=s.cosInt(e);return(t-e)*s.cosInt(i)+(i-t)*n},s.cosInt=function(t){return(t%=360)<0&&(t+=360),t<90?egret_cos_map[t]:t<180?-egret_sin_map[t-90]:t<270?-egret_cos_map[t-180]:egret_sin_map[t-270]},s}();t.NumberUtils=e,t.registerClass(e,"egret.NumberUtils")}(egret||(egret={}));for(var egret_sin_map={},egret_cos_map={},DEG_TO_RAD=Math.PI/180,NumberUtils_i=0;NumberUtils_i<=90;NumberUtils_i++)egret_sin_map[NumberUtils_i]=Math.sin(NumberUtils_i*DEG_TO_RAD),egret_cos_map[NumberUtils_i]=Math.cos(NumberUtils_i*DEG_TO_RAD);Function.prototype.bind||(Function.prototype.bind=function(t){"function"!=typeof this&&egret.$error(1029);var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},s=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,s.prototype=new n,s}),function(s){var t=function(i){function t(t,e){void 0===e&&(e=0),i.call(this),this._delay=0,this._currentCount=0,this._running=!1,this.updateInterval=1e3,this.lastCount=1e3,this.delay=t,this.repeatCount=0|+e}__extends(t,i);var e=__define,n=t.prototype;return e(n,"delay",function(){return this._delay},function(t){t<1&&(t=1),this._delay!=t&&(this._delay=t,this.lastCount=this.updateInterval=Math.round(60*t))}),e(n,"currentCount",function(){return this._currentCount}),e(n,"running",function(){return this._running}),n.reset=function(){this.stop(),this._currentCount=0},n.start=function(){this._running||(this.lastCount=this.updateInterval,s.sys.$ticker.$startTick(this.$update,this),this._running=!0)},n.stop=function(){this._running&&(s.stopTick(this.$update,this),this._running=!1)},n.$update=function(t){if(this.lastCount-=1e3,0<this.lastCount)return!1;this.lastCount+=this.updateInterval,this._currentCount++;var e=0<this.repeatCount&&this._currentCount>=this.repeatCount;return s.TimerEvent.dispatchTimerEvent(this,s.TimerEvent.TIMER),e&&(this.stop(),s.TimerEvent.dispatchTimerEvent(this,s.TimerEvent.TIMER_COMPLETE)),!1},t}(s.EventDispatcher);s.Timer=t,s.registerClass(t,"egret.Timer"),DEBUG&&(s.$markReadOnly(t,"currentCount"),s.$markReadOnly(t,"running"))}(egret||(egret={})),egret||(egret={}),function(s){s.$callLaterFunctionList=[],s.$callLaterThisList=[],s.$callLaterArgsList=[],s.callLater=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];s.$callLaterFunctionList.push(t),s.$callLaterThisList.push(e),s.$callLaterArgsList.push(i)},s.$callAsyncFunctionList=[],s.$callAsyncThisList=[],s.$callAsyncArgsList=[],s.$callAsync=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];s.$callAsyncFunctionList.push(t),s.$callAsyncThisList.push(e),s.$callAsyncArgsList.push(i)}}(egret||(egret={})),function(t){t.superSetter=function(t,e,i){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];var r,a=t.prototype;t.hasOwnProperty("__sets__")||Object.defineProperty(t,"__sets__",{value:{}});var o=(r=t.__sets__)[i];if(o)return o.apply(e,n);var h=Object.getPrototypeOf(a);if(null!=h){for(;!h.hasOwnProperty(i);)if(null==(h=Object.getPrototypeOf(h)))return;o=Object.getOwnPropertyDescriptor(h,i).set,(r[i]=o).apply(e,n)}},t.superGetter=function(t,e,i){var n,s=t.prototype;t.hasOwnProperty("__gets__")||Object.defineProperty(t,"__gets__",{value:{}});var r=(n=t.__gets__)[i];if(r)return r.call(e);var a=Object.getPrototypeOf(s);if(null!=a){for(;!a.hasOwnProperty(i);)if(null==(a=Object.getPrototypeOf(a)))return;return r=Object.getOwnPropertyDescriptor(a,i).get,(n[i]=r).call(e)}}}(egret||(egret={})),function(t){var r={};t.getDefinitionByName=function(t){if(!t)return null;var e=r[t];if(e)return e;var i=t.split("."),n=i.length;e=__global;for(var s=0;s<n;s++)if(!(e=e[i[s]]))return null;return r[t]=e},DEBUG&&(t.cleanCache=function(){r={}})}(egret||(egret={}));var egret,__global=__global||this;egret||(egret={}),(egret||(egret={})).getQualifiedClassName=function(t){var e=typeof t;if(!t||"object"!=e&&!t.prototype)return e;var i=t.prototype?t.prototype:Object.getPrototypeOf(t);if(i.hasOwnProperty("__class__"))return i.__class__;var n=i.constructor.toString().trim(),s=n.indexOf("("),r=n.substring(9,s);return Object.defineProperty(i,"__class__",{value:r,enumerable:!1,writable:!0}),r},function(s){s.getQualifiedSuperclassName=function(t){if(!t||"object"!=typeof t&&!t.prototype)return null;var e=t.prototype?t.prototype:Object.getPrototypeOf(t),i=Object.getPrototypeOf(e);if(!i)return null;var n=s.getQualifiedClassName(i.constructor);return n||null}}(egret||(egret={})),function(t){t.getTimer=function(){return Date.now()-t.sys.$START_TIME}}(egret||(egret={})),function(e){e.hasDefinition=function(t){return!!e.getDefinitionByName(t)}}(egret||(egret={})),(egret||(egret={})).is=function(t,e){if(!t||"object"!=typeof t)return!1;var i=Object.getPrototypeOf(t),n=i?i.__types__:null;return!!n&&-1!==n.indexOf(e)},function(i){i.startTick=function(t,e){DEBUG&&!t&&i.$error(1003,"callBack"),i.sys.$ticker.$startTick(t,e)}}(egret||(egret={})),function(i){i.stopTick=function(t,e){DEBUG&&!t&&i.$error(1003,"callBack"),i.sys.$ticker.$stopTick(t,e)}}(egret||(egret={})),(egret||(egret={})).toColorString=function(t){t<0&&(t=0),16777215<t&&(t=16777215);for(var e=t.toString(16).toUpperCase();6<e.length;)e=e.slice(1,e.length);for(;e.length<6;)e="0"+e;return"#"+e};
var egret;if(DEBUG&&null==window.HTMLVideoElement&&(window.HTMLVideoElement=HTMLDivElement),function(e){var t;e.web||(e.web={}),t="egret.BitmapData",e.registerClass(HTMLImageElement,t),e.registerClass(HTMLCanvasElement,t),e.registerClass(HTMLVideoElement,t)}(egret||(egret={})),function(t){t.$toBitmapData=function(e){return e.hashCode=e.$hashCode=t.$hashCount++,e}}(egret||(egret={})),function(e){var t,i;t=e.web||(e.web={}),i=function(){function e(){}__define;return e.call=function(e,t){},e.addCallback=function(e,t){},e}(),t.WebExternalInterface=i,e.registerClass(i,"egret.web.WebExternalInterface",["egret.ExternalInterface"]),e.ExternalInterface=i}(egret||(egret={})),function(n){var e;(e=n.localStorage||(n.localStorage={})).web||(e.web={}),e.getItem=function(e){return window.localStorage.getItem(e)},e.setItem=function(t,i){try{return window.localStorage.setItem(t,i),!0}catch(e){return n.$warn(1018,t,i),!1}},e.removeItem=function(e){window.localStorage.removeItem(e)},e.clear=function(){window.localStorage.clear()}}(egret||(egret={})),function(h){var r,e;r=h.web||(h.web={}),e=function(e){function o(){e.call(this),this.loaded=!1}__extends(o,e);var t=__define,i=o.prototype;return t(i,"length",function(){if(this.originAudio)return this.originAudio.duration;throw new Error("sound not loaded!")}),i.load=function(e){var t=this;this.url=e,DEBUG&&!e&&h.$error(3002);var i=new Audio(e);i.addEventListener("canplaythrough",r),i.addEventListener("error",a);var n=navigator.userAgent.toLowerCase();function r(){s(),0<=n.indexOf("firefox")&&(i.pause(),i.muted=!1),t.loaded=!0,t.dispatchEventWith(h.Event.COMPLETE)}function a(){s(),t.dispatchEventWith(h.IOErrorEvent.IO_ERROR)}function s(){i.removeEventListener("canplaythrough",r),i.removeEventListener("error",a)}0<=n.indexOf("firefox")&&(i.autoplay=!0,i.muted=!0),i.load(),this.originAudio=i,o.$recycle(this.url,i)},i.play=function(e,t){e=+e||0,t=+t||0,DEBUG&&0==this.loaded&&h.$error(3001);var i=o.$pop(this.url);null==i&&(i=this.originAudio.cloneNode()),i.autoplay=!0;var n=new r.HtmlSoundChannel(i);return n.$url=this.url,n.$loops=t,n.$startTime=e,n.$play(),h.sys.$pushSoundChannel(n),n},i.close=function(){0==this.loaded&&this.originAudio&&(this.originAudio.src=""),this.originAudio&&(this.originAudio=null),o.$clear(this.url)},o.$clear=function(e){var t=o.audios[e];t&&(t.length=0)},o.$pop=function(e){var t=o.audios[e];return t&&0<t.length?t.pop():null},o.$recycle=function(e,t){var i=o.audios[e];null==o.audios[e]&&(i=o.audios[e]=[]),i.push(t)},o.MUSIC="music",o.EFFECT="effect",o.audios={},o}(h.EventDispatcher),r.HtmlSound=e,h.registerClass(e,"egret.web.HtmlSound",["egret.Sound"])}(egret||(egret={})),function(r){var a,e;a=r.web||(r.web={}),e=function(i){function e(e){var t=this;i.call(this),this.$startTime=0,this.audio=null,this.isStopped=!1,this.canPlay=function(){t.audio.removeEventListener("canplay",t.canPlay);try{t.audio.currentTime=t.$startTime}catch(e){}finally{t.audio.play()}},this.onPlayEnd=function(){if(1==t.$loops)return t.stop(),void t.dispatchEventWith(r.Event.SOUND_COMPLETE);0<t.$loops&&t.$loops--,t.$play()},e.addEventListener("ended",this.onPlayEnd),this.audio=e}__extends(e,i);var t=__define,n=e.prototype;return n.$play=function(){if(this.isStopped)r.$error(1036);else{try{this.audio.currentTime=this.$startTime}catch(e){return void this.audio.addEventListener("canplay",this.canPlay)}this.audio.play()}},n.stop=function(){if(this.audio){this.isStopped||r.sys.$popSoundChannel(this),this.isStopped=!0;var e=this.audio;e.pause(),e.removeEventListener("ended",this.onPlayEnd),this.audio=null,a.HtmlSound.$recycle(this.$url,e)}},t(n,"volume",function(){return this.audio?this.audio.volume:1},function(e){this.isStopped?r.$error(1036):this.audio&&(this.audio.volume=e)}),t(n,"position",function(){return this.audio?this.audio.currentTime:0}),e}(r.EventDispatcher),a.HtmlSoundChannel=e,r.registerClass(e,"egret.web.HtmlSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(egret||(egret={})),function(r){var a,e;a=r.web||(r.web={}),e=function(e){function t(){e.call(this),this.loaded=!1}__extends(t,e);var i=__define,n=t.prototype;return n.load=function(e){var t=this;this.url=e,DEBUG&&!e&&r.$error(3002),QZAppExternal.preloadSound(function(e){0==e.code?(t.loaded=!0,t.dispatchEventWith(r.Event.COMPLETE)):t.dispatchEventWith(r.IOErrorEvent.IO_ERROR)},{bid:-1,url:a.Html5Capatibility._QQRootPath+e,refresh:1})},i(n,"length",function(){throw new Error("qq sound not supported!")}),n.play=function(e,t){e=+e||0,t=+t||0,DEBUG&&0==this.loaded&&r.$error(3001);var i=new a.QQSoundChannel;return i.$url=this.url,i.$loops=t,i.$type=this.type,i.$startTime=e,i.$play(),r.sys.$pushSoundChannel(i),i},n.close=function(){},t.MUSIC="music",t.EFFECT="effect",t}(r.EventDispatcher),a.QQSound=e,r.registerClass(e,"egret.web.QQSound",["egret.Sound"])}(egret||(egret={})),function(r){var e,t;e=r.web||(r.web={}),t=function(t){function e(){var e=this;t.call(this),this.$startTime=0,this.isStopped=!1,this.onPlayEnd=function(){if(1==e.$loops)return e.stop(),void e.dispatchEventWith(r.Event.SOUND_COMPLETE);0<e.$loops&&e.$loops--,e.$play()},this._startTime=0}__extends(e,t);var i=__define,n=e.prototype;return n.$play=function(){if(this.isStopped)r.$error(1036);else{this._startTime=Date.now();var e=0;e=0<this.$loops?this.$loops-1:-1,this.$type==r.Sound.EFFECT?QZAppExternal.playLocalSound(function(e){},{bid:-1,url:this.$url,loop:e}):QZAppExternal.playLocalBackSound(function(e){},{bid:-1,url:this.$url,loop:e})}},n.stop=function(){this.$type==r.Sound.EFFECT?QZAppExternal.stopSound():QZAppExternal.stopBackSound(),this.isStopped||r.sys.$popSoundChannel(this),this.isStopped=!0},i(n,"volume",function(){return 1},function(e){this.isStopped&&r.$error(1036)}),i(n,"position",function(){return(Date.now()-this._startTime)/1e3}),e}(r.EventDispatcher),e.QQSoundChannel=t,r.registerClass(t,"egret.web.QQSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(egret||(egret={})),function(s){!function(r){var a=function(){function i(){}__define;return i.decodeAudios=function(){if(!(i.decodeArr.length<=0||i.isDecoding)){i.isDecoding=!0;var t=i.decodeArr.shift();i.ctx.decodeAudioData(t.buffer,function(e){t.self.audioBuffer=e,t.success&&t.success(),i.isDecoding=!1,i.decodeAudios()},function(){alert("sound decode error: "+t.url+"\nsee http://edn.egret.com/cn/docs/page/156"),t.fail&&t.fail(),i.isDecoding=!1,i.decodeAudios()})}},i.canUseWebAudio=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,i.ctx=i.canUseWebAudio?new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext):void 0,i.decodeArr=[],i.isDecoding=!1,i}();r.WebAudioDecode=a,s.registerClass(a,"egret.web.WebAudioDecode");var e=function(e){function t(){e.call(this),this.loaded=!1}__extends(t,e);var i=__define,n=t.prototype;return i(n,"length",function(){if(this.audioBuffer)return this.audioBuffer.duration;throw new Error("sound not loaded!")}),n.load=function(e){var t=this;this.url=e,DEBUG&&!e&&s.$error(3002);var i=new XMLHttpRequest;function n(){t.loaded=!0,t.dispatchEventWith(s.Event.COMPLETE)}function r(){t.dispatchEventWith(s.IOErrorEvent.IO_ERROR)}i.open("GET",e,!0),i.responseType="arraybuffer",console.log("loadWebAudio"),i.onload=function(){t._arrayBuffer=i.response,a.decodeArr.push({buffer:t._arrayBuffer,success:n,fail:r,self:t,url:t.url}),a.decodeAudios()},i.send()},n.play=function(e,t){e=+e||0,t=+t||0,DEBUG&&0==this.loaded&&s.$error(3001);var i=new r.WebAudioSoundChannel;return i.$url=this.url,i.$loops=t,i.$audioBuffer=this.audioBuffer,i.$startTime=e,i.$play(),s.sys.$pushSoundChannel(i),i},n.close=function(){},t.MUSIC="music",t.EFFECT="effect",t}(s.EventDispatcher);r.WebAudioSound=e,s.registerClass(e,"egret.web.WebAudioSound",["egret.Sound"])}(s.web||(s.web={}))}(egret||(egret={})),function(r){var a,e;a=r.web||(r.web={}),e=function(t){function e(){var e=this;t.call(this),this.$startTime=0,this.bufferSource=null,this.context=a.WebAudioDecode.ctx,this.isStopped=!1,this._currentTime=0,this._volume=1,this.onPlayEnd=function(){if(1==e.$loops)return e.stop(),void e.dispatchEventWith(r.Event.SOUND_COMPLETE);0<e.$loops&&e.$loops--,e.$play()},this._startTime=0,this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}__extends(e,t);var i=__define,n=e.prototype;return n.$play=function(){if(this.isStopped)r.$error(1036);else{this.bufferSource&&(this.bufferSource.onended=null,this.bufferSource=null);var e=this.context,t=this.gain,i=e.createBufferSource();(this.bufferSource=i).buffer=this.$audioBuffer,i.connect(t),t.connect(e.destination),i.onended=this.onPlayEnd,this._startTime=Date.now(),this.gain.gain.value=this._volume,i.start(0,this.$startTime),this._currentTime=0}},n.stop=function(){if(this.bufferSource){var e=this.bufferSource;e.stop?e.stop(0):e.noteOff(0),this.bufferSource.disconnect(),this.bufferSource=null,this.$audioBuffer=null}this.isStopped||r.sys.$popSoundChannel(this),this.isStopped=!0},i(n,"volume",function(){return this._volume},function(e){this.isStopped?r.$error(1036):(this._volume=e,this.gain.gain.value=e)}),i(n,"position",function(){return this.bufferSource?(Date.now()-this._startTime)/1e3+this.$startTime:0}),e}(r.EventDispatcher),a.WebAudioSoundChannel=e,r.registerClass(e,"egret.web.WebAudioSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(egret||(egret={})),function(a){var e,t;e=a.web||(a.web={}),t=function(i){function e(e){var t=this;i.call(this),this.loaded=!1,this.closed=!1,this.heightSet=NaN,this.widthSet=NaN,this.isPlayed=!1,this.screenChanged=function(e){!!t.video.webkitDisplayingFullscreen||t.checkFullScreen(!1)},this._fullscreen=!0,this.onVideoLoaded=function(){t.video.removeEventListener("canplay",t.onVideoLoaded);var e=t.video;t.loaded=!0,e.pause(),t.posterData&&(t.posterData.width=t.getPlayWidth(),t.posterData.height=t.getPlayHeight()),e.width=e.videoWidth,e.height=e.videoHeight,t.$invalidateContentBounds(),t.dispatchEventWith(a.Event.COMPLETE)},this.$renderNode=new a.sys.BitmapNode,this.src=e,this.once(a.Event.ADDED_TO_STAGE,this.loadPoster,this),e&&this.load()}__extends(e,i);var t=__define,n=e.prototype;return n.load=function(e){var t=this;if(e=e||this.src,this.src=e,DEBUG&&!e&&a.$error(3002),!this.video||this.video.src!=e){var i=document.createElement("video");i.controls=null,i.src=e,i.setAttribute("autoplay","autoplay"),i.setAttribute("webkit-playsinline","true"),i.addEventListener("canplay",this.onVideoLoaded),i.addEventListener("error",function(){return t.onVideoError()}),i.addEventListener("ended",function(){return t.onVideoEnded()}),i.load(),i.play(),i.style.position="absolute",i.style.top="0px",i.style.zIndex="-88888",i.style.left="0px",i.height=1,i.width=1,window.setTimeout(function(){return i.pause()},16),this.video=i}},t(n,"length",function(){if(this.video)return this.video.duration;throw new Error("Video not loaded!")}),n.play=function(t,i){var n=this;if(void 0===i&&(i=!1),0==this.loaded)return this.load(this.src),void this.once(a.Event.COMPLETE,function(e){return n.play(t,i)},this);this.isPlayed=!0;var e=this.video;null!=t&&(e.currentTime=+t||0),e.loop=!!i,a.Capabilities.isMobile?e.style.zIndex="-88888":e.style.zIndex="9999",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.height=e.videoHeight,e.width=e.videoWidth,this.checkFullScreen(this._fullscreen)},n.checkFullScreen=function(e){var t=this.video;e?(null==t.parentElement&&(t.removeAttribute("webkit-playsinline"),t.style.width="100%",t.style.height="100%",document.body.appendChild(t)),a.stopTick(this.markDirty,this),this.setFullScreenMonitor(!0)):(null!=t.parentElement&&t.parentElement.removeChild(t),t.setAttribute("webkit-playsinline","true"),this.setFullScreenMonitor(!1),a.Capabilities.isMobile||a.startTick(this.markDirty,this)),t.play()},n.setFullScreenMonitor=function(e){var t=this.video;e?(t.addEventListener("mozfullscreenchange",this.screenChanged),t.addEventListener("webkitfullscreenchange",this.screenChanged),t.addEventListener("webkitfullscreenerror",this.screenError),t.addEventListener("webkitfullscreenerror",this.screenError)):(t.removeEventListener("mozfullscreenchange",this.screenChanged),t.removeEventListener("webkitfullscreenchange",this.screenChanged),t.removeEventListener("webkitfullscreenerror",this.screenError),t.removeEventListener("webkitfullscreenerror",this.screenError))},n.screenError=function(){a.$error(3103)},n.exitFullscreen=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.oCancelFullScreen?document.oCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},n.onVideoEnded=function(){var e=this.video;null!=e.parentElement&&e.parentElement.removeChild(e),this.pause(),this.isPlayed=!1,this._fullscreen||this.$invalidateContentBounds(),this.dispatchEventWith(a.Event.ENDED)},n.onVideoError=function(){this.dispatchEventWith(a.IOErrorEvent.IO_ERROR)},n.close=function(){var e=this;this.closed=!0,this.video.removeEventListener("canplay",this.onVideoLoaded),this.video.removeEventListener("error",function(){return e.onVideoError()}),this.video.removeEventListener("ended",function(){return e.onVideoEnded()}),this.pause(),0==this.loaded&&this.video&&(this.video.src=""),this.video&&this.video.parentElement&&(this.video.parentElement.removeChild(this.video),this.video=null),this.loaded=!1},n.pause=function(){this.video&&this.video.pause(),a.stopTick(this.markDirty,this),this.$invalidate()},t(n,"volume",function(){return this.video?this.video.volume:1},function(e){this.video&&(this.video.volume=e)}),t(n,"position",function(){return this.video?this.video.currentTime:0},function(e){this.video&&(this.video.currentTime=e)}),t(n,"fullscreen",function(){return this._fullscreen},function(e){this._fullscreen=!!e,this.video&&0==this.video.paused&&this.checkFullScreen(this._fullscreen)}),t(n,"bitmapData",function(){return this.video&&this.loaded?(this._bitmapData||(this.video.width=this.video.videoWidth,this.video.height=this.video.videoHeight,this._bitmapData=a.$toBitmapData(this.video)),this._bitmapData):null}),n.loadPoster=function(){var t=this,e=this.poster;if(e){var i=new a.ImageLoader;i.once(a.Event.COMPLETE,function(e){i.data;t.posterData=i.data,t.posterData.width=t.getPlayWidth(),t.posterData.height=t.getPlayHeight(),t.$invalidateContentBounds()},this),i.load(e)}},n.$measureContentBounds=function(e){var t=this.bitmapData,i=this.posterData;t?e.setTo(0,0,this.getPlayWidth(),this.getPlayHeight()):i?e.setTo(0,0,this.getPlayWidth(),this.getPlayHeight()):e.setEmpty()},n.getPlayWidth=function(){return isNaN(this.widthSet)?this.bitmapData?this.bitmapData.width:this.posterData?this.posterData.width:NaN:this.widthSet},n.getPlayHeight=function(){return isNaN(this.heightSet)?this.bitmapData?this.bitmapData.height:this.posterData?this.posterData.height:NaN:this.heightSet},n.$render=function(){var e=this.$renderNode,t=this.bitmapData,i=this.posterData,n=this.getPlayWidth(),r=this.getPlayHeight();n<=0||r<=0||(this.isPlayed&&!a.Capabilities.isMobile||!i?this.isPlayed&&t&&!this._fullscreen&&!a.Capabilities.isMobile&&(e.image=t,e.drawImage(0,0,t.width,t.height,0,0,n,r)):(e.image=i,e.drawImage(0,0,i.width,i.height,0,0,n,r)))},n.markDirty=function(){return this.$invalidate(),!0},n.$setHeight=function(e){return this.heightSet=+e||0,this.$invalidate(),this.$invalidateContentBounds(),i.prototype.$setHeight.call(this,e)},n.$setWidth=function(e){return this.widthSet=+e||0,this.$invalidate(),this.$invalidateContentBounds(),i.prototype.$setWidth.call(this,e)},t(n,"paused",function(){return!this.video||this.video.paused}),e}(a.DisplayObject),e.WebVideo=t,a.registerClass(t,"egret.web.WebVideo",["egret.Video"]),a.Video=t}(egret||(egret={})),function(r){var e,t;e=r.web||(r.web={}),t=function(e){function t(){e.call(this),this._url="",this._method=""}__extends(t,e);var i=__define,n=t.prototype;return i(n,"response",function(){return this._xhr?null!=this._xhr.response?this._xhr.response:"text"==this._responseType?this._xhr.responseText:"arraybuffer"==this._responseType&&/msie 9.0/i.test(navigator.userAgent)?window.convertResponseBodyToText(this._xhr.responseBody):"document"==this._responseType?this._xhr.responseXML:null:null}),i(n,"responseType",function(){return this._responseType},function(e){this._responseType=e}),i(n,"withCredentials",function(){return this._withCredentials},function(e){this._withCredentials=e}),n.getXHR=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},n.open=function(e,t){void 0===t&&(t="GET"),this._url=e,this._method=t,this._xhr&&(this._xhr.abort(),this._xhr=null),this._xhr=this.getXHR(),this._xhr.onreadystatechange=this.onReadyStateChange.bind(this),this._xhr.onprogress=this.updateProgress.bind(this),this._xhr.open(this._method,this._url,!0)},n.send=function(e){if(null!=this._responseType&&(this._xhr.responseType=this._responseType),null!=this._withCredentials&&(this._xhr.withCredentials=this._withCredentials),this.headerObj)for(var t in this.headerObj)this._xhr.setRequestHeader(t,this.headerObj[t]);this._xhr.send(e)},n.abort=function(){this._xhr&&this._xhr.abort()},n.getAllResponseHeaders=function(){if(!this._xhr)return null;var e=this._xhr.getAllResponseHeaders();return e||""},n.setRequestHeader=function(e,t){this.headerObj||(this.headerObj={}),this.headerObj[e]=t},n.getResponseHeader=function(e){if(!this._xhr)return null;var t=this._xhr.getResponseHeader(e);return t||""},n.onReadyStateChange=function(){var e=this._xhr;if(4==e.readyState){var t=400<=e.status||0==e.status,i=this._url,n=this;window.setTimeout(function(){t?(DEBUG&&!n.hasEventListener(r.IOErrorEvent.IO_ERROR)&&r.$error(1011,i),n.dispatchEventWith(r.IOErrorEvent.IO_ERROR)):n.dispatchEventWith(r.Event.COMPLETE)},0)}},n.updateProgress=function(e){e.lengthComputable&&r.ProgressEvent.dispatchProgressEvent(this,r.ProgressEvent.PROGRESS,e.loaded,e.total)},t}(r.EventDispatcher),e.WebHttpRequest=t,r.registerClass(t,"egret.web.WebHttpRequest",["egret.HttpRequest"]),r.HttpRequest=t,DEBUG&&r.$markReadOnly(t,"response")}(egret||(egret={})),function(r){var a,s,e;a=r.web||(r.web={}),s=window.URL||window.webkitURL,e=function(e){function i(){e.apply(this,arguments),this.data=null,this._crossOrigin=null,this._hasCrossOriginSet=!1,this.currentImage=null,this.request=null}__extends(i,e);var t=__define,n=i.prototype;return t(n,"crossOrigin",function(){return this._crossOrigin},function(e){this._hasCrossOriginSet=!0,this._crossOrigin=e}),n.load=function(e){if(a.Html5Capatibility._canUseBlob&&0!=e.indexOf("wxLocalResource:")&&0!=e.indexOf("data:")&&0!=e.indexOf("http:")&&0!=e.indexOf("https:")){var t=this.request;t||((t=this.request=new r.web.WebHttpRequest).addEventListener(r.Event.COMPLETE,this.onBlobLoaded,this),t.addEventListener(r.IOErrorEvent.IO_ERROR,this.onBlobError,this),t.responseType="blob"),DEBUG&&(this.currentURL=e),t.open(e),t.send()}else this.loadImage(e)},n.onBlobLoaded=function(e){var t=this.request.response;this.loadImage(s.createObjectURL(t))},n.onBlobError=function(e){this.dispatchIOError(this.currentURL)},n.loadImage=function(e){var t=new Image;this.data=null,this.currentImage=t,this._hasCrossOriginSet?this._crossOrigin&&(t.crossOrigin=this._crossOrigin):i.crossOrigin&&(t.crossOrigin=i.crossOrigin),t.onload=this.onImageComplete.bind(this),t.onerror=this.onLoadError.bind(this),t.src=e},n.onImageComplete=function(e){var t=this.getImage(e);if(t){this.data=r.$toBitmapData(t);var i=this;window.setTimeout(function(){i.dispatchEventWith(r.Event.COMPLETE)},0)}},n.onLoadError=function(e){var t=this.getImage(e);t&&this.dispatchIOError(t.src)},n.dispatchIOError=function(e){var t=this;window.setTimeout(function(){DEBUG&&!t.hasEventListener(r.IOErrorEvent.IO_ERROR)&&r.$error(1011,e),t.dispatchEventWith(r.IOErrorEvent.IO_ERROR)},0)},n.getImage=function(e){var t=e.target;if(0==t.src.indexOf("blob:"))try{s.revokeObjectURL(t.src)}catch(e){r.$warn(1037)}return t.onerror=null,t.onload=null,this.currentImage!==t?null:(this.currentImage=null,t)},i.crossOrigin=null,i}(r.EventDispatcher),a.WebImageLoader=e,r.registerClass(e,"egret.web.WebImageLoader",["egret.ImageLoader"]),r.ImageLoader=e}(egret||(egret={})),function(a){var n,e;n=a.web||(a.web={}),e=function(e){function t(){e.call(this),this._isNeedShow=!1,this.inputElement=null,this.inputDiv=null,this._gscaleX=0,this._gscaleY=0,this._isNeesHide=!1,this.textValue="",this.colorValue=16777215,this._styleInfoes={}}__extends(t,e);__define;var i=t.prototype;return i.$setTextField=function(e){return this.$textfield=e,!0},i.$addToStage=function(){this.htmlInput=a.web.$getTextAdapter(this.$textfield)},i._initElement=function(){var e=this.$textfield.localToGlobal(0,0),t=e.x,i=e.y,n=this.$textfield.$renderNode.renderMatrix,r=n.a,a=n.d,s=this.htmlInput.$scaleX,o=this.htmlInput.$scaleY;this.inputDiv.style.left=t*s+"px",this.inputDiv.style.top=i*o+"px",this.$textfield.multiline&&this.$textfield.height>this.$textfield.size?(this.inputDiv.style.top=i*o+"px",this.inputElement.style.top=-this.$textfield.lineSpacing/2*o+"px"):(this.inputDiv.style.top=i*o+"px",this.inputElement.style.top="0px"),this._gscaleX=s*r,this._gscaleY=o*a},i.$show=function(){this.htmlInput.isCurrentStageText(this)?this.inputElement.onblur=null:(this.inputElement=this.htmlInput.getInputElement(this),this.inputDiv=this.htmlInput._inputDIV),this.htmlInput._needShow=!0,this._isNeedShow=!0,this._initElement()},i.onBlurHandler=function(){this.htmlInput.clearInputElement(),window.scrollTo(0,0)},i.executeShow=function(){this.inputElement.value=this.$getText(),null==this.inputElement.onblur&&(this.inputElement.onblur=this.onBlurHandler.bind(this)),this.$resetStageText(),0<this.$textfield.maxChars?this.inputElement.setAttribute("maxlength",this.$textfield.maxChars):this.inputElement.removeAttribute("maxlength"),this.inputElement.selectionStart=this.inputElement.value.length,this.inputElement.selectionEnd=this.inputElement.value.length,this.inputElement.focus()},i.$hide=function(){this._isNeesHide=!0,this.htmlInput&&a.web.Html5Capatibility._System_OS==a.web.SystemOSType.IOS&&this.htmlInput.disconnectStageText(this)},i.$getText=function(){return this.textValue||(this.textValue=""),this.textValue},i.$setText=function(e){return this.textValue=e,this.resetText(),!0},i.resetText=function(){this.inputElement&&(this.inputElement.value=this.textValue)},i.$setColor=function(e){return this.colorValue=e,this.resetColor(),!0},i.resetColor=function(){this.inputElement&&this.setElementStyle("color",a.toColorString(this.colorValue))},i.$onBlur=function(){n.Html5Capatibility._System_OS==n.SystemOSType.WPHONE&&a.Event.dispatchEvent(this,"updateText",!1)},i._onInput=function(){var e=this;if(n.Html5Capatibility._System_OS==n.SystemOSType.WPHONE){var t=this.$textfield.$TextField;null==t[35]&&null==t[36]?(e.textValue=e.inputElement.value,a.Event.dispatchEvent(e,"updateText",!1)):window.setTimeout(function(){e.inputElement&&e.inputElement.selectionStart&&e.inputElement.selectionEnd&&e.inputElement.selectionStart==e.inputElement.selectionEnd&&(e.textValue=e.inputElement.value,a.Event.dispatchEvent(e,"updateText",!1))},0)}else window.setTimeout(function(){e.inputElement.selectionStart==e.inputElement.selectionEnd&&(e.textValue=e.inputElement.value,a.Event.dispatchEvent(e,"updateText",!1))},0)},i.setAreaHeight=function(){var e=this.$textfield;if(e.multiline){var t=a.TextFieldUtils.$getTextHeight(e);if(e.height<=e.size||e.height<t)this.setElementStyle("height",e.size*this._gscaleY+"px"),this.setElementStyle("padding","0px"),this.setElementStyle("lineHeight",e.size*this._gscaleY+"px");else{this.setElementStyle("height",(t+e.lineSpacing)*this._gscaleY+"px");var i=(e.height-t)*this._gscaleY,n=i*a.TextFieldUtils.$getValign(e),r=i-n;this.setElementStyle("padding",n+"px 0px "+r+"px 0px"),this.setElementStyle("lineHeight",(e.size+e.lineSpacing)*this._gscaleY+"px")}}},i._onClickHandler=function(e){this._isNeedShow&&(e.stopImmediatePropagation(),this._isNeedShow=!1,this.executeShow(),this.dispatchEvent(new a.Event("focus")))},i._onDisconnect=function(){this.inputElement=null,this.dispatchEvent(new a.Event("blur"))},i.setElementStyle=function(e,t){this.inputElement&&this._styleInfoes[e]!=t&&(this.inputElement.style[e]=t)},i.$removeFromStage=function(){this.inputElement&&this.htmlInput.disconnectStageText(this)},i.$resetStageText=function(){if(this.inputElement){var e=this.$textfield;if(this.setElementStyle("fontFamily",e.fontFamily),this.setElementStyle("fontStyle",e.italic?"italic":"normal"),this.setElementStyle("fontWeight",e.bold?"bold":"normal"),this.setElementStyle("textAlign",e.textAlign),this.setElementStyle("fontSize",e.size*this._gscaleY+"px"),this.setElementStyle("color",a.toColorString(e.textColor)),e.stage){var t=e.localToGlobal(0,0).x;t=Math.min(e.width,e.stage.stageWidth-t)}else t=e.width;if(this.setElementStyle("width",t*this._gscaleX+"px"),this.setElementStyle("verticalAlign",e.verticalAlign),e.multiline)this.setAreaHeight();else if(this.setElementStyle("lineHeight",e.size*this._gscaleY+"px"),e.height<e.size){this.setElementStyle("height",e.size*this._gscaleY+"px");var i=e.size/2*this._gscaleY;this.setElementStyle("padding","0px 0px "+i+"px 0px")}else{this.setElementStyle("height",e.size*this._gscaleY+"px");var n=(e.height-e.size)*this._gscaleY,r=n*a.TextFieldUtils.$getValign(e);(i=n-r)<e.size/2*this._gscaleY&&(i=e.size/2*this._gscaleY),this.setElementStyle("padding",r+"px 0px "+i+"px 0px")}this.inputDiv.style.clip="rect(0px "+e.width*this._gscaleX+"px "+e.height*this._gscaleY+"px 0px)",this.inputDiv.style.height=e.height*this._gscaleY+"px",this.inputDiv.style.width=t*this._gscaleX+"px"}},t}(a.EventDispatcher),n.HTML5StageText=e,a.registerClass(e,"egret.web.HTML5StageText",["egret.StageText"]),a.StageText=e}(egret||(egret={})),function(a){var e,t;e=a.web||(a.web={}),t=function(){function e(){this._needShow=!1,this.$scaleX=1,this.$scaleY=1}__define;var t=e.prototype;return t.isInputOn=function(){return null!=this._stageText},t.isCurrentStageText=function(e){return this._stageText==e},t.initValue=function(e){e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.border="none",e.style.padding="0"},t.$updateSize=function(){if(this.canvas){var e=this.canvas.width,t=this.canvas.height,i=this.canvas.style.width.split("px")[0],n=this.canvas.style.height.split("px")[0];this.$scaleX=i/e,this.$scaleY=n/t,this.StageDelegateDiv.style.left=this.canvas.style.left,this.StageDelegateDiv.style.top=this.canvas.style.top;var r=a.web.getPrefixStyleName("transform");this.StageDelegateDiv.style[r]=this.canvas.style[r],this.StageDelegateDiv.style[a.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px"}},t._initStageDelegateDiv=function(e,t){this.canvas=t;var i,n=this;i||(i=document.createElement("div"),(this.StageDelegateDiv=i).id="StageDelegateDiv",e.appendChild(i),n.initValue(i),n._inputDIV=document.createElement("div"),n.initValue(n._inputDIV),n._inputDIV.style.width="0px",n._inputDIV.style.height="0px",n._inputDIV.style.left="0px",n._inputDIV.style.top="-100px",n._inputDIV.style[a.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px",i.appendChild(n._inputDIV),this.canvas.addEventListener("click",function(e){n._needShow?(n._needShow=!1,n._stageText._onClickHandler(e),n.show()):n._inputElement&&(n.clearInputElement(),n._inputElement.blur(),n._inputElement=null)}),n.initInputElement(!0),n.initInputElement(!1))},t.initInputElement=function(e){var t,i=this;e?((t=document.createElement("textarea")).style.resize="none",(i._multiElement=t).id="egretTextarea"):(t=document.createElement("input"),(i._simpleElement=t).id="egretInput"),t.type="text",i._inputDIV.appendChild(t),t.setAttribute("tabindex","-1"),t.style.width="1px",t.style.height="12px",i.initValue(t),t.style.outline="thin",t.style.background="none",t.style.overflow="hidden",t.style.wordBreak="break-all",t.style.opacity=0,t.oninput=function(){i._stageText&&i._stageText._onInput()}},t.show=function(){var e=this._inputElement;a.$callAsync(function(){e.style.opacity=1},this)},t.disconnectStageText=function(e){null!=this._stageText&&this._stageText!=e||(this.clearInputElement(),this._inputElement&&this._inputElement.blur())},t.clearInputElement=function(){var e=this;e._inputElement&&(e._inputElement.value="",e._inputElement.onblur=null,e._inputElement.style.width="1px",e._inputElement.style.height="12px",e._inputElement.style.left="0px",e._inputElement.style.top="0px",e._inputElement.style.opacity=0,(e._simpleElement==e._inputElement?e._multiElement:e._simpleElement).style.display="block",e._inputDIV.style.left="0px",e._inputDIV.style.top="-100px",e._inputDIV.style.height="0px",e._inputDIV.style.width="0px");e._stageText&&(e._stageText._onDisconnect(),e._stageText=null,this.canvas.userTyping=!1)},t.getInputElement=function(e){var t=this;return t.clearInputElement(),t._stageText=e,this.canvas.userTyping=!0,t._stageText.$textfield.multiline?t._inputElement=t._multiElement:t._inputElement=t._simpleElement,(t._simpleElement==t._inputElement?t._multiElement:t._simpleElement).style.display="none",t._inputElement},e}(),e.HTMLInput=t,a.registerClass(t,"egret.web.HTMLInput")}(egret||(egret={})),function(e){var t,a,s,o;t=e.web||(e.web={}),a={},s={},o={},t.$getTextAdapter=function(e){var t=e.stage?e.stage.$hashCode:0,i=a[t],n=s[t],r=o[t];return n&&r&&(delete s[t],delete o[t]),i},t.$cacheTextAdapter=function(e,t,i,n){e._initStageDelegateDiv(i,n),a[t.$hashCode]=e,s[t.$hashCode]=n,o[t.$hashCode]=i}}(egret||(egret={})),function(c){var d,f;c.web||(c.web={}),d=null,f={},c.sys.measureText=function(e,t,i,n,r){d||function(){if("canvas"==c.Capabilities.renderMode)d=c.sys.hitTestBuffer.context;else{var e=document.createElement("canvas");d=e.getContext("2d")}d.textAlign="left",d.textBaseline="middle"}();var a="";r&&(a+="italic "),n&&(a+="bold "),a+=(i||12)+"px ";var s=0,o=f[a+=t||"Arial"]||(f[a]={});d.font=a;for(var h=e.length,l=0;l<h;l++){var u=e.charCodeAt(l);s+=o[u]||(o[u]=d.measureText(e.charAt(l)).width)}return s}}(egret||(egret={})),function(l){!function(e){function o(e,t){var i=document.createElement("canvas");isNaN(e)||isNaN(t)||(i.width=e,i.height=t),l.$toBitmapData(i);var n=i.getContext("2d");if(void 0===n.imageSmoothingEnabled){for(var r=["webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled"],a=r.length-1;0<=a;a--){var s=r[a];if(void 0!==n[s])break}try{Object.defineProperty(n,"imageSmoothingEnabled",{get:function(){return this[s]},set:function(e){this[s]=e}})}catch(e){n.imageSmoothingEnabled=n[s]}}return i}var h,t=function(){function e(e,t){this.surface=o(e,t),this.context=this.surface.getContext("2d")}var t=__define,i=e.prototype;return t(i,"width",function(){return this.surface.width}),t(i,"height",function(){return this.surface.height}),i.resize=function(e,t,i){var n=this.surface;if(i){var r=!1;n.width<e&&(n.width=e,r=!0),n.height<t&&(n.height=t,r=!0),r||(this.context.globalCompositeOperation="source-over",this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1)}else n.width!=e&&(n.width=e),n.height!=t&&(n.height=t);this.clear()},i.resizeTo=function(e,t,i,n){h||(h=o());this.context;var r=this.surface,a=h,s=a.getContext("2d");h=r,this.context=s,(this.surface=a).width=Math.max(e,257),a.height=Math.max(t,257),s.setTransform(1,0,0,1,0,0),s.drawImage(r,i,n),r.height=1,r.width=1},i.setDirtyRegionPolicy=function(e){},i.beginClip=function(e,t,i){t=+t||0,i=+i||0;var n=this.context;n.save(),n.beginPath(),n.setTransform(1,0,0,1,t,i);for(var r=e.length,a=0;a<r;a++){var s=e[a];n.clearRect(s.minX,s.minY,s.width,s.height),n.rect(s.minX,s.minY,s.width,s.height)}n.clip()},i.endClip=function(){this.context.restore()},i.getPixel=function(e,t){return this.context.getImageData(e,t,1,1).data},i.toDataURL=function(e,t){return this.surface.toDataURL(e,t)},i.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.surface.width,this.surface.height)},i.destroy=function(){this.surface.width=this.surface.height=0},e}();e.CanvasRenderBuffer=t,l.registerClass(t,"egret.web.CanvasRenderBuffer",["egret.sys.RenderBuffer"])}(l.web||(l.web={}))}(egret||(egret={})),function(l){var e,t;e=l.web||(l.web={}),t=function(n){function e(e,t){var i=this;n.call(this),this.onTouchBegin=function(e){var t=i.getLocation(e);i.touch.onTouchBegin(t.x,t.y,e.identifier)},this.onTouchMove=function(e){var t=i.getLocation(e);i.touch.onTouchMove(t.x,t.y,e.identifier)},this.onTouchEnd=function(e){var t=i.getLocation(e);i.touch.onTouchEnd(t.x,t.y,e.identifier)},this.scaleX=1,this.scaleY=1,this.rotation=0,this.canvas=t,this.touch=new l.sys.TouchHandler(e),this.addListeners()}__extends(e,n);__define;var t=e.prototype;return t.addListeners=function(){var t=this;window.navigator.msPointerEnabled?(this.canvas.addEventListener("MSPointerDown",function(e){e.identifier=e.pointerId,t.onTouchBegin(e),t.prevent(e)},!1),this.canvas.addEventListener("MSPointerMove",function(e){e.identifier=e.pointerId,t.onTouchMove(e),t.prevent(e)},!1),this.canvas.addEventListener("MSPointerUp",function(e){e.identifier=e.pointerId,t.onTouchEnd(e),t.prevent(e)},!1)):(l.Capabilities.$isMobile||this.addMouseListener(),this.addTouchListener())},t.addMouseListener=function(){this.canvas.addEventListener("mousedown",this.onTouchBegin),this.canvas.addEventListener("mousemove",this.onTouchMove),this.canvas.addEventListener("mouseup",this.onTouchEnd)},t.addTouchListener=function(){var n=this;this.canvas.addEventListener("touchstart",function(e){for(var t=e.changedTouches.length,i=0;i<t;i++)n.onTouchBegin(e.changedTouches[i]);n.prevent(e)},!1),this.canvas.addEventListener("touchmove",function(e){for(var t=e.changedTouches.length,i=0;i<t;i++)n.onTouchMove(e.changedTouches[i]);n.prevent(e)},!1),this.canvas.addEventListener("touchend",function(e){for(var t=e.changedTouches.length,i=0;i<t;i++)n.onTouchEnd(e.changedTouches[i]);n.prevent(e)},!1),this.canvas.addEventListener("touchcancel",function(e){for(var t=e.changedTouches.length,i=0;i<t;i++)n.onTouchEnd(e.changedTouches[i]);n.prevent(e)},!1)},t.prevent=function(e){e.stopPropagation(),1==e.isScroll||this.canvas.userTyping||e.preventDefault()},t.getLocation=function(e){e.identifier=+e.identifier||0;var t=document.documentElement,i=this.canvas.getBoundingClientRect(),n=i.left+window.pageXOffset-t.clientLeft,r=i.top+window.pageYOffset-t.clientTop,a=e.pageX-n,s=a,o=e.pageY-r,h=o;return 90==this.rotation?(s=o,h=i.width-a):-90==this.rotation&&(s=i.height-o,h=a),s/=this.scaleX,h/=this.scaleY,l.$TempPoint.setTo(Math.round(s),Math.round(h))},t.updateScaleMode=function(e,t,i){this.scaleX=e,this.scaleY=t,this.rotation=i},t.$updateMaxTouches=function(){this.touch.$initMaxTouches()},e}(l.HashObject),e.WebTouchHandler=t,l.registerClass(t,"egret.web.WebTouchHandler")}(egret||(egret={})),function(l){var e,t;e=l.web||(l.web={}),t=function(t){function e(e){t.call(this),this.isActivate=!0,this.stage=e,this.registerListener()}__extends(e,t);__define;return e.prototype.registerListener=function(){var e,t,i=this,n=function(){i.isActivate&&(i.isActivate=!1,i.stage.dispatchEvent(new l.Event(l.Event.DEACTIVATE)))},r=function(){i.isActivate||(i.isActivate=!0,i.stage.dispatchEvent(new l.Event(l.Event.ACTIVATE)))};window.addEventListener("focus",r,!1),window.addEventListener("blur",n,!1),void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden?(e="webkitHidden",t="webkitvisibilitychange"):void 0!==document.oHidden&&(e="oHidden",t="ovisibilitychange"),"onpageshow"in window&&"onpagehide"in window&&(window.addEventListener("pageshow",r,!1),window.addEventListener("pagehide",n,!1)),e&&t&&document.addEventListener(t,function(){document[e]?n():r()},!1);var a=navigator.userAgent,s=/micromessenger/gi.test(a),o=/mqq/gi.test(a);if((/mobile.*qq/gi.test(a)||s)&&(o=!1),o){var h=window.browser||{};h.execWebFn=h.execWebFn||{},h.execWebFn.postX5GamePlayerMessage=function(e){var t=e.type;"app_enter_background"==t?n():"app_enter_foreground"==t&&r()},window.browser=h}},e}(l.HashObject),e.WebHideHandler=t,l.registerClass(t,"egret.web.WebHideHandler")}(egret||(egret={})),function(h){!function(e){var a=function(){function e(){}__define;return e.QQ_AUDIO=1,e.WEB_AUDIO=2,e.HTML5_AUDIO=3,e}();e.AudioType=a,h.registerClass(a,"egret.web.AudioType");var s=function(){function e(){}__define;return e.WPHONE=1,e.IOS=2,e.ADNROID=3,e}();e.SystemOSType=s,h.registerClass(s,"egret.web.SystemOSType");var t=function(e){function r(){e.call(this)}__extends(r,e);__define;return r._init=function(){var e=navigator.userAgent.toLowerCase();if(r.ua=e,h.Capabilities.$isMobile=-1!=e.indexOf("mobile")||-1!=e.indexOf("android"),r._canUseBlob=!1,r._audioType=a.HTML5_AUDIO,r._AudioClass=h.web.HtmlSound,r._audioMustLoad=!0,0<=e.indexOf("windows phone"))r._System_OS=s.WPHONE,r._audioMustLoad=!1,h.Capabilities.$os="Windows Phone";else if(0<=e.indexOf("android")){if(r._System_OS=s.ADNROID,0<=e.indexOf("ucbrowser")&&(r._audioMustLoad=!1),h.Capabilities.$os="Android",r._System_OS=s.ADNROID,window.hasOwnProperty("QZAppExternal")&&0<=e.indexOf("qzone")){r._audioType=a.QQ_AUDIO,r._AudioClass=h.web.QQSound;var t=document.getElementsByTagName("base");if(t&&0<t.length)r._QQRootPath=t[0].baseURI;else{var i=window.location.href.indexOf("?");-1==i&&(i=window.location.href.length);var n=window.location.href.substring(0,i);n=n.substring(0,n.lastIndexOf("/")),r._QQRootPath=n+"/"}}}else 0<=e.indexOf("iphone")||0<=e.indexOf("ipad")||0<=e.indexOf("ipod")?(h.Capabilities.$os="iOS",r._System_OS=s.IOS,7<=r.getIOSVersion()&&(r._canUseBlob=!0,r._AudioClass=h.web.WebAudioSound,r._audioType=a.WEB_AUDIO)):-1!=e.indexOf("windows nt")?h.Capabilities.$os="Windows PC":-1!=e.indexOf("mac os")&&(h.Capabilities.$os="Mac OS");window.URL||window.webkitURL||(r._canUseBlob=!1),window.AudioContext||window.webkitAudioContext||window.mozAudioContext||r._audioType!=a.WEB_AUDIO||(r._audioType=a.HTML5_AUDIO,r._AudioClass=h.web.HtmlSound),h.Sound=r._AudioClass},r.getIOSVersion=function(){var e=r.ua.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/)[0];return parseInt(e.match(/\d(_\d)*/)[0])||0},r.checkHtml5Support=function(){var e=(navigator.language||navigator.browserLanguage).toLowerCase().split("-");1<e.length&&(e[1]=e[1].toUpperCase()),h.Capabilities.$language=e.join("-")},r._canUseBlob=!1,r._audioType=0,r._audioMustLoad=!1,r._QQRootPath="",r._System_OS=0,r.ua="",r}(h.HashObject);e.Html5Capatibility=t,h.registerClass(t,"egret.web.Html5Capatibility"),t._init();var r=null;function o(e,t){if(e in t)return"";e=e.charAt(0).toUpperCase()+e.substring(1,e.length);for(var i=["webkit","ms","Moz","O"],n=0;n<i.length;n++){if(i[n]+e in t)return i[n]}return""}e.getPrefixStyleName=function(e,t){var i="";if(null!=t)i=o(e,t);else{if(null==r){var n=document.createElement("div").style;r=o("transform",n)}i=r}return""==i?e:i+e.charAt(0).toUpperCase()+e.substring(1,e.length)},e.getPrefix=o}(h.web||(h.web={}))}(egret||(egret={})),function(u){!function(h){var l=!1;window.isNaN=function(e){return(e=+e)!=e},u.runEgret=function(e){if(!l){l=!0,e||(e={}),"webgl"==e.renderMode&&h.WebGLUtils.checkCanUseWebGL()?(u.sys.RenderBuffer=h.WebGLRenderBuffer,u.sys.systemRenderer=new h.WebGLRenderer,u.sys.hitTestBuffer=new h.WebGLRenderBuffer(3,3),u.DisplayObject.prototype.$setHasDisplayList=function(){},u.Capabilities.renderMode="webgl"):(u.sys.RenderBuffer=h.CanvasRenderBuffer,u.sys.systemRenderer=new u.CanvasRenderer,u.sys.hitTestBuffer=new h.CanvasRenderBuffer(3,3),u.Capabilities.renderMode="canvas"),s=u.sys.$ticker,(o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame)||(o=function(e){return window.setTimeout(e,1e3/60)}),o.call(window,function e(){s.update(),o.call(window,e)}),e.screenAdapter?u.sys.screenAdapter=e.screenAdapter:u.sys.screenAdapter||(u.sys.screenAdapter=new u.sys.DefaultScreenAdapter);for(var t=document.querySelectorAll(".egret-player"),i=t.length,n=0;n<i;n++){var r=t[n],a=new h.WebPlayer(r,e);r["egret-player"]=a}}var s,o},u.updateAllScreens=function(){if(l)for(var e=document.querySelectorAll(".egret-player"),t=e.length,i=0;i<t;i++)e[i]["egret-player"].updateScreenSize()};var e=NaN;function t(){e=NaN,u.updateAllScreens()}window.addEventListener("resize",function(){isNaN(e)&&(e=window.setTimeout(t,300))})}(u.web||(u.web={}))}(egret||(egret={})),DEBUG){var language=navigator.language||navigator.browserLanguage||"en_US";(language=language.replace("-","_"))in egret.$locale_strings&&(egret.$language=language)}!function(r){var e,t;e=r.web||(r.web={}),t=function(){function n(){}__define;return n.detect=function(){var e=r.Capabilities,t=navigator.userAgent.toLowerCase();e.$isMobile=-1!=t.indexOf("mobile")||-1!=t.indexOf("android"),e.$isMobile?t.indexOf("windows")<0&&(-1!=t.indexOf("iphone")||-1!=t.indexOf("ipad")||-1!=t.indexOf("ipod"))?e.$os="iOS":-1!=t.indexOf("android")&&-1!=t.indexOf("linux")?e.$os="Android":-1!=t.indexOf("windows")&&(e.$os="Windows Phone"):-1!=t.indexOf("windows nt")?e.$os="Windows PC":-1!=t.indexOf("mac os")&&(e.$os="Mac OS");var i=(navigator.language||navigator.browserLanguage).toLowerCase().split("-");1<i.length&&(i[1]=i[1].toUpperCase()),e.$language=i.join("-"),n.injectUIntFixOnIE9()},n.injectUIntFixOnIE9=function(){if(/msie 9.0/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)){document.write("\x3c!-- IEBinaryToArray_ByteStr --\x3e\r\n<script type='text/vbscript' language='VBScript'>\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n   IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n   Dim lastIndex\r\n   lastIndex = LenB(Binary)\r\n   if lastIndex mod 2 Then\r\n       IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n   Else\r\n       IEBinaryToArray_ByteStr_Last = \"\"\r\n   End If\r\nEnd Function\r\n<\/script>\r\n\x3c!-- convertResponseBodyToText --\x3e\r\n<script>\r\nvar convertResponseBodyToText = function (binary) {\r\n   var byteMapping = {};\r\n   for ( var i = 0; i < 256; i++ ) {\r\n       for ( var j = 0; j < 256; j++ ) {\r\n           byteMapping[ String.fromCharCode( i + j * 256 ) ] =\r\n           String.fromCharCode(i) + String.fromCharCode(j);\r\n       }\r\n   }\r\n   var rawBytes = IEBinaryToArray_ByteStr(binary);\r\n   var lastChr = IEBinaryToArray_ByteStr_Last(binary);\r\n   return rawBytes.replace(/[\\s\\S]/g,                           function( match ) { return byteMapping[match]; }) + lastChr;\r\n};\r\n<\/script>\r\n")}},n}(),e.WebCapability=t,r.registerClass(t,"egret.web.WebCapability"),t.detect()}(egret||(egret={})),function(i){!function(e){function t(e){if(window.location){var t=location.search;if(""==t)return"";for(var i=(t=t.slice(1)).split("&"),n=i.length,r=0;r<n;r++){var a=i[r].split("=");if(a[0]==e)return a[1]}}return""}(i.web||(i.web={})).getOption=t,i.getOption=t}()}(egret||(egret={})),function(v){var u,e;u=v.web||(v.web={}),e=function(i){function e(e,t){i.call(this),this.init(e,t),this.initOrientation()}__extends(e,i);__define;var t=e.prototype;return t.init=function(e,t){var i=this.readOption(e,t),n=new v.Stage;n.$screen=this,n.$scaleMode=i.scaleMode,n.$orientation=i.orientation,n.$maxTouches=i.maxTouches,n.frameRate=i.frameRate,n.textureScaleFactor=i.textureScaleFactor;var r=new v.sys.RenderBuffer,a=r.surface;this.attachCanvas(e,a);var s=new u.WebTouchHandler(n,a),o=new v.sys.Player(r,n,i.entryClassName),h=new v.web.WebHideHandler(n),l=new u.HTMLInput;o.showPaintRect(i.showPaintRect),(i.showFPS||i.showLog)&&o.displayFPS(i.showFPS,i.showLog,i.logFilter,i.fpsStyles),this.playerOption=i,this.container=e,this.canvas=a,this.stage=n,this.stage=n,this.player=o,this.webTouchHandler=s,this.webInput=l,this.webHide=h,v.web.$cacheTextAdapter(l,n,e,a),this.updateScreenSize(),this.updateMaxTouches(),o.start()},t.initOrientation=function(){var e=this;window.addEventListener("orientationchange",function(){window.setTimeout(function(){v.StageOrientationEvent.dispatchStageOrientationEvent(e.stage,v.StageOrientationEvent.ORIENTATION_CHANGE)},350)})},t.readOption=function(e,t){var i={};i.entryClassName=e.getAttribute("data-entry-class"),i.scaleMode=e.getAttribute("data-scale-mode")||v.StageScaleMode.NO_SCALE,i.frameRate=+e.getAttribute("data-frame-rate")||30,i.contentWidth=+e.getAttribute("data-content-width")||480,i.contentHeight=+e.getAttribute("data-content-height")||800,i.orientation=e.getAttribute("data-orientation")||v.OrientationMode.AUTO,i.maxTouches=+e.getAttribute("data-multi-fingered")||2,i.textureScaleFactor=+e.getAttribute("texture-scale-factor")||1,"webgl"==t.renderMode?i.showPaintRect=!1:i.showPaintRect="true"==e.getAttribute("data-show-paint-rect"),i.showFPS="true"==e.getAttribute("data-show-fps");for(var n=(e.getAttribute("data-show-fps-style")||"").split(","),r={},a=0;a<n.length;a++){var s=n[a].split(":");r[s[0]]=s[1]}return i.fpsStyles=r,i.showLog="true"==e.getAttribute("data-show-log"),i.logFilter=e.getAttribute("data-log-filter"),i},t.attachCanvas=function(e,t){var i=t.style;i.cursor="inherit",i.position="absolute",i.top="0",i.bottom="0",i.left="0",i.right="0",e.appendChild(t),(i=e.style).overflow="hidden",i.position="relative",i.webkitTransform="translateZ(0)"},t.updateScreenSize=function(){var e=this.canvas;if(!e.userTyping){var t=this.playerOption,i=this.container.getBoundingClientRect(),n=!1,r=this.stage.$orientation;r!=v.OrientationMode.AUTO&&(n=r!=v.OrientationMode.PORTRAIT&&i.height>i.width||r==v.OrientationMode.PORTRAIT&&i.width>i.height);var a=n?i.height:i.width,s=n?i.width:i.height,o=v.sys.screenAdapter.calculateStageSize(this.stage.$scaleMode,a,s,t.contentWidth,t.contentHeight),h=o.stageWidth,l=o.stageHeight,u=o.displayWidth,c=o.displayHeight;e.width!==h&&(e.width=h),e.height!==l&&(e.height=l),e.style[v.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px",e.style.width=u+"px",e.style.height=c+"px";var d=0;n?r==v.OrientationMode.LANDSCAPE?(d=90,e.style.top=(i.height-u)/2+"px",e.style.left=(i.width+c)/2+"px"):(d=-90,e.style.top=(i.height+u)/2+"px",e.style.left=(i.width-c)/2+"px"):(e.style.top=(i.height-c)/2+"px",e.style.left=(i.width-u)/2+"px");var f="rotate("+d+"deg)";e.style[v.web.getPrefixStyleName("transform")]=f;var g=u/h,p=c/l;this.webTouchHandler.updateScaleMode(g,p,d),this.webInput.$updateSize(),this.player.updateStageSize(h,l)}},t.setContentSize=function(e,t){var i=this.playerOption;i.contentWidth=e,i.contentHeight=t,this.updateScreenSize()},t.updateMaxTouches=function(){this.webTouchHandler.$updateMaxTouches()},e}(v.HashObject),u.WebPlayer=e,v.registerClass(e,"egret.web.WebPlayer",["egret.sys.Screen"])}(egret||(egret={})),function(g){!function(e){var d,f;function o(e,t){try{return function(e,t){d||(d=document.createElement("canvas"),f=d.getContext("2d"));var i=e.$getTextureWidth(),n=e.$getTextureHeight();null==t&&((t=g.$TempRectangle).x=0,t.y=0,t.width=i,t.height=n),t.x=Math.min(t.x,i-1),t.y=Math.min(t.y,n-1),t.width=Math.min(t.width,i-t.x),t.height=Math.min(t.height,n-t.y);var r=t.width,a=t.height,s=d;s.style.width=r+"px",s.style.height=a+"px",d.width=r,d.height=a;var o=e,h=Math.round(o._offsetX),l=Math.round(o._offsetY),u=o._bitmapWidth,c=o._bitmapHeight;return f.drawImage(o._bitmapData,o._bitmapX+t.x/g.$TextureScaleFactor,o._bitmapY+t.y/g.$TextureScaleFactor,u*t.width/i,c*t.height/n,h,l,t.width,t.height),s}(this,t).toDataURL(e)}catch(e){g.$error(1033)}return null}g.Texture.prototype.toDataURL=o,g.Texture.prototype.saveToFile=function(e,t,i){var n=o.call(this,e,i);if(null!=n){var r=n.replace(/^data:image[^;]*/,"data:image/octet-stream"),a=document.createElement("a");a.download=t,a.href=r;var s=document.createEvent("HTMLEvents");s.initEvent("click",!1,!1),a.dispatchEvent(s)}},g.Texture.prototype.getPixel32=function(e,t){var i=g.sys.hitTestBuffer;i.resize(3,3);var n=i.context;n.translate||(n=i),n.translate(1-e,1-t);var r=this._bitmapWidth,a=this._bitmapHeight,s=g.$TextureScaleFactor;n.drawImage(this._bitmapData,this._bitmapX,this._bitmapY,r,this._bitmapHeight,this._offsetX,this._offsetY,r*s,a*s),n.$drawWebGL&&n.$drawWebGL();try{var o=i.getPixel(1,1)}catch(e){throw console.log(this),new Error(g.sys.tr(1039))}return o};var t=g.Texture.prototype.dispose;g.Texture.prototype.dispose=function(){e.WebGLUtils.deleteWebGLTexture(this._bitmapData),t.call(this)}}(g.web||(g.web={}))}(egret||(egret={})),function(i){!function(e){var t=function(){function e(e,t){this.nodeType=e,this.parent=t}__define;return e}();e.XMLNode=t,i.registerClass(t,"egret.web.XMLNode");var p=function(a){function e(e,t,i,n,r){a.call(this,1,t),this.attributes={},this.children=[],this.localName=e,this.prefix=i,this.namespace=n,this.name=r}__extends(e,a);__define;return e}(t);e.XML=p,i.registerClass(p,"egret.web.XML");var v=function(i){function e(e,t){i.call(this,3,t),this.text=e}__extends(e,i);__define;return e}(t);e.XMLText=v,i.registerClass(v,"egret.web.XMLText");var a=new DOMParser;function m(e,t){if("parsererror"==e.localName)throw new Error(e.textContent);for(var i=new p(e.localName,t,e.prefix,e.namespaceURI,e.nodeName),n=e.attributes,r=i.attributes,a=n.length,s=0;s<a;s++){var o=n[s],h=o.name;0!=h.indexOf("xmlns:")&&(r[h]=o.value,i["$"+h]=o.value)}var l=e.childNodes;a=l.length;var u=i.children;for(s=0;s<a;s++){var c=l[s],d=c.nodeType,f=null;if(1==d)f=m(c,i);else if(3==d){var g=c.textContent.trim();g&&(f=new v(g,i))}f&&u.push(f)}return i}i.XML={parse:function(e){for(var t=a.parseFromString(e,"text/xml"),i=t.childNodes.length,n=0;n<i;n++){var r=t.childNodes[n];if(1==r.nodeType)return m(r,null)}return null}}}(i.web||(i.web={}))}(egret||(egret={})),function(n){var e,t;e=n.web||(n.web={}),t=function(e){function t(){var i=this;e.apply(this,arguments),this.onChange=function(e){var t=new n.OrientationEvent(n.Event.CHANGE);t.beta=e.beta,t.gamma=e.gamma,t.alpha=e.alpha,i.dispatchEvent(t)}}__extends(t,e);__define;var i=t.prototype;return i.start=function(){window.addEventListener("deviceorientation",this.onChange)},i.stop=function(){window.removeEventListener("deviceorientation",this.onChange)},t}(n.EventDispatcher),e.WebDeviceOrientation=t,n.registerClass(t,"egret.web.WebDeviceOrientation",["egret.DeviceOrientation"])}(egret||(egret={})),egret.DeviceOrientation=egret.web.WebDeviceOrientation,function(r){var e,t;e=r.web||(r.web={}),t=function(t){function e(e){var n=this;t.call(this),this.onUpdate=function(e){var t=new r.GeolocationEvent(r.Event.CHANGE),i=e.coords;t.altitude=i.altitude,t.heading=i.heading,t.accuracy=i.accuracy,t.latitude=i.latitude,t.longitude=i.longitude,t.speed=i.speed,t.altitudeAccuracy=i.altitudeAccuracy,n.dispatchEvent(t)},this.onError=function(e){var t=r.GeolocationEvent.UNAVAILABLE;e.code==e.PERMISSION_DENIED&&(t=r.GeolocationEvent.PERMISSION_DENIED);var i=new r.GeolocationEvent(r.IOErrorEvent.IO_ERROR);i.errorType=t,i.errorMessage=e.message,n.dispatchEvent(i)},this.geolocation=navigator.geolocation}__extends(e,t);__define;var i=e.prototype;return i.start=function(){var e=this.geolocation;e?this.watchId=e.watchPosition(this.onUpdate,this.onError):this.onError({code:2,message:r.sys.tr(3004),PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2})},i.stop=function(){this.geolocation.clearWatch(this.watchId)},e}(r.EventDispatcher),e.WebGeolocation=t,r.registerClass(t,"egret.web.WebGeolocation",["egret.Geolocation"]),r.Geolocation=r.web.WebGeolocation}(egret||(egret={})),function(s){var e,t;e=s.web||(s.web={}),t=function(e){function t(){var a=this;e.apply(this,arguments),this.onChange=function(e){var t=new s.MotionEvent(s.Event.CHANGE),i={x:e.acceleration.x,y:e.acceleration.y,z:e.acceleration.z},n={x:e.accelerationIncludingGravity.x,y:e.accelerationIncludingGravity.y,z:e.accelerationIncludingGravity.z},r={alpha:e.rotationRate.alpha,beta:e.rotationRate.beta,gamma:e.rotationRate.gamma};t.acceleration=i,t.accelerationIncludingGravity=n,t.rotationRate=r,a.dispatchEvent(t)}}__extends(t,e);__define;var i=t.prototype;return i.start=function(){window.addEventListener("devicemotion",this.onChange)},i.stop=function(){window.removeEventListener("devicemotion",this.onChange)},t}(s.EventDispatcher),e.WebMotion=t,s.registerClass(t,"egret.web.WebMotion",["egret.Motion"]),s.Motion=s.web.WebMotion}(egret||(egret={})),function(i){!function(e){if(DEBUG){var t;Object.defineProperty(i.Logger,"logLevel",{set:function(e){switch(null==t&&(t={error:console.error,debug:console.debug,warn:console.warn,info:console.info,log:console.log}),e){case i.Logger.OFF:console.error=function(){};case i.Logger.ERROR:console.warn=function(){};case i.Logger.WARN:console.info=function(){},console.log=function(){};case i.Logger.INFO:console.debug=function(){}}switch(e){case i.Logger.ALL:case i.Logger.DEBUG:console.debug=t.debug;case i.Logger.INFO:console.log=t.log,console.info=t.info;case i.Logger.WARN:console.warn=t.warn;case i.Logger.ERROR:console.error=t.error}},enumerable:!0,configurable:!0})}}(i.web||(i.web={}))}(egret||(egret={})),function(o){var e,t;e=o.web||(o.web={}),t=function(){function s(){}__define;return s.compileProgram=function(e,t,i){var n=s.compileFragmentShader(e,i),r=s.compileVertexShader(e,t),a=e.createProgram();return e.attachShader(a,r),e.attachShader(a,n),e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)||o.$warn(1020),a},s.compileFragmentShader=function(e,t){return s._compileShader(e,t,e.FRAGMENT_SHADER)},s.compileVertexShader=function(e,t){return s._compileShader(e,t,e.VERTEX_SHADER)},s._compileShader=function(e,t,i){var n=e.createShader(i);return e.shaderSource(n,t),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)?n:null},s.checkCanUseWebGL=function(){if(null==s.canUseWebGL)try{var e=document.createElement("canvas");s.canUseWebGL=!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){s.canUseWebGL=!1}return s.canUseWebGL},s.deleteWebGLTexture=function(e){if(e){var t=e.webGLTexture;if(t)for(var i in t){var n=t[i];n.glContext.deleteTexture(n)}e.webGLTexture=null}},s}(),e.WebGLUtils=t,o.registerClass(t,"egret.web.WebGLUtils")}(egret||(egret={})),function(e){var n,t;n=e.web||(e.web={}),t=function(){function e(e){this.defaultVertexSrc="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.x, aColor.x, aColor.x, aColor.x);\n}",this.gl=null,this.program=null,this.fragmentSrc="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nuniform float uPureColor;\nvoid main(void) {\nif(uPureColor == 1.0) {\ngl_FragColor = vColor ;\n} else {\ngl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;\n}\n}",this.uniforms=null,this.gl=e}__define;var t=e.prototype;return t.init=function(){var e=this.gl,t=n.WebGLUtils.compileProgram(e,this.defaultVertexSrc,this.fragmentSrc);for(var i in e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.dimensions=e.getUniformLocation(t,"dimensions"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord"),this.colorAttribute=e.getAttribLocation(t,"aColor"),this.uPureColor=e.getUniformLocation(t,"uPureColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute],this.uniforms)this.uniforms[i].uniformLocation=e.getUniformLocation(t,i);this.initUniforms(),this.program=t},t.initUniforms=function(){if(this.uniforms){var e,t=this.gl;for(var i in this.uniforms){var n=(e=this.uniforms[i]).type;"mat2"===n||"mat3"===n||"mat4"===n?(e.glMatrix=!0,e.glValueLength=1,"mat2"===n?e.glFunc=t.uniformMatrix2fv:"mat3"===n?e.glFunc=t.uniformMatrix3fv:"mat4"===n&&(e.glFunc=t.uniformMatrix4fv)):(e.glFunc=t["uniform"+n],e.glValueLength="2f"===n||"2i"===n?2:"3f"===n||"3i"===n?3:"4f"===n||"4i"===n?4:1)}}},t.syncUniforms=function(){if(this.uniforms){var e,t=this.gl;for(var i in this.uniforms)1===(e=this.uniforms[i]).glValueLength?!0===e.glMatrix?e.glFunc.call(t,e.uniformLocation,e.transpose,e.value):e.glFunc.call(t,e.uniformLocation,e.value):2===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y):3===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y,e.value.z):4===e.glValueLength&&e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y,e.value.z,e.value.w)}},e}(),n.EgretShader=t,e.registerClass(t,"egret.web.EgretShader")}(egret||(egret={})),function(e){var i,t;i=e.web||(e.web={}),t=function(){function e(e){this.gl=null,this.program=null,this.projectionVector=null,this.offsetVector=null,this.tintColor=null,this.aVertexPosition=null,this.colorAttribute=null,this.attributes=null,this.translationMatrix=null,this.alpha=null,this.fragmentSrc="precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n   gl_FragColor = vColor;\n}",this.vertexSrc="attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nuniform float alpha;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void) {\n   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);\n   v -= offsetVector.xyx;\n   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}",this.gl=e,this.init()}__define;return e.prototype.init=function(){var e=this.gl,t=i.WebGLUtils.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.tintColor=e.getUniformLocation(t,"tint"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.colorAttribute=e.getAttribLocation(t,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=e.getUniformLocation(t,"translationMatrix"),this.alpha=e.getUniformLocation(t,"alpha"),this.program=t},e}(),i.PrimitiveShader=t,e.registerClass(t,"egret.web.PrimitiveShader")}(egret||(egret={})),function(e){var t,i;t=e.web||(e.web={}),i=function(t){function e(e){t.call(this,e),this.fragmentSrc="precision mediump float;uniform vec2 blur;uniform sampler2D uSampler;varying vec2 vTextureCoord;void main(){gl_FragColor = vec4(0.0);gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.028 * blur.x, -0.028 * blur.y))) * 0.0044299121055113265;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.024 * blur.x, -0.024 * blur.y))) * 0.00895781211794;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.020 * blur.x, -0.020 * blur.y))) * 0.0215963866053;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.016 * blur.x, -0.016 * blur.y))) * 0.0443683338718;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.012 * blur.x, -0.012 * blur.y))) * 0.0776744219933;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.008 * blur.x, -0.008 * blur.y))) * 0.115876621105;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.004 * blur.x, -0.004 * blur.y))) * 0.147308056121;gl_FragColor += texture2D(uSampler, vTextureCoord) * 0.159576912161;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.004 * blur.x,  0.004 * blur.y))) * 0.147308056121;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.008 * blur.x,  0.008 * blur.y))) * 0.115876621105;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.012 * blur.x,  0.012 * blur.y))) * 0.0776744219933;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.016 * blur.x,  0.016 * blur.y))) * 0.0443683338718;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.020 * blur.x,  0.020 * blur.y))) * 0.0215963866053;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.024 * blur.x,  0.024 * blur.y))) * 0.00895781211794;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.028 * blur.x,  0.028 * blur.y))) * 0.0044299121055113265;}",this.uniforms={blur:{type:"2f",value:{x:2,y:2}}},this.init()}__extends(e,t);__define;return e}(t.EgretShader),t.BlurShader=i,e.registerClass(i,"egret.web.BlurShader")}(egret||(egret={})),function(e){var t,i;t=e.web||(e.web={}),i=function(t){function e(e){t.call(this,e),this.fragmentSrc="precision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform float invert;\nuniform mat4 matrix;\nuniform vec4 colorAdd;\nuniform sampler2D uSampler;\nvoid main(void) {\nvec4 texColor = texture2D(uSampler, vTextureCoord);\nvec4 locColor = texColor * matrix;\nif(texColor.a != 0.0){\nlocColor += colorAdd;\n}\ngl_FragColor = vColor*vec4(locColor.rgb*locColor.a,locColor.a);\n}",this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},colorAdd:{type:"4f",value:{x:0,y:0,z:0,w:0}}},this.init()}__extends(e,t);__define;return e}(t.EgretShader),t.ColorTransformShader=i,e.registerClass(i,"egret.web.ColorTransformShader")}(egret||(egret={})),function(e){var i,t;i=e.web||(e.web={}),t=function(){function e(e){this.gl=null,this.maxAttibs=10,this.attribState=[],this.tempAttribState=[],this.currentShader=null,this.defaultShader=null,this.primitiveShader=null,this.colorTransformShader=null,this.blurShader=null;for(var t=0;t<this.maxAttibs;t++)this.attribState[t]=!1;this.setContext(e)}__define;var t=e.prototype;return t.setContext=function(e){this.gl=e,this.primitiveShader=new i.PrimitiveShader(e),this.defaultShader=new i.EgretShader(e),this.defaultShader.init(),this.colorTransformShader=new i.ColorTransformShader(e),this.blurShader=new i.BlurShader(e),this.activateShader(this.defaultShader)},t.activateShader=function(e){this.currentShader!=e&&(this.gl.useProgram(e.program),this.setAttribs(e.attributes),this.currentShader=e)},t.setAttribs=function(e){var t,i;for(i=this.tempAttribState.length,t=0;t<i;t++)this.tempAttribState[t]=!1;for(i=e.length,t=0;t<i;t++){var n=e[t];this.tempAttribState[n]=!0}var r=this.gl;for(i=this.attribState.length,t=0;t<i;t++)this.attribState[t]!==this.tempAttribState[t]&&(this.attribState[t]=this.tempAttribState[t],this.tempAttribState[t]?r.enableVertexAttribArray(t):r.disableVertexAttribArray(t))},e}(),i.WebGLShaderManager=t,e.registerClass(t,"egret.web.WebGLShaderManager")}(egret||(egret={})),function(e){var t,i;t=e.web||(e.web={}),i=function(){function e(e,t,i,n){void 0===n&&(n=!0),this.gl=e,this.width=t||1,this.height=i||1,this.useFrameBuffer=n,this.texture=this.createTexture(),this.frameBuffer=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0),this.stencilBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.width,this.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.stencilBuffer),e.bindFramebuffer(e.FRAMEBUFFER,null)}__define;var t=e.prototype;return t.resize=function(e,t){var i=this.gl;this.width=e||1,this.height=t||1,i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,this.width,this.height,0,i.RGBA,i.UNSIGNED_BYTE,null),i.bindTexture(i.TEXTURE_2D,null),i.bindFramebuffer(i.FRAMEBUFFER,this.frameBuffer),i.bindRenderbuffer(i.RENDERBUFFER,this.stencilBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,this.width,this.height),i.bindFramebuffer(i.FRAMEBUFFER,null)},t.getFrameBuffer=function(){return this.useFrameBuffer?this.frameBuffer:null},t.createTexture=function(){var e=this.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),t},e}(),t.WebGLRenderTarget=i,e.registerClass(i,"egret.web.WebGLRenderTarget")}(egret||(egret={})),function(a){var s,e;s=a.web||(a.web={}),e=function(){function o(e,t){var i,n,r;this.dirtyRegionPolicy=!0,this._dirtyRegionPolicy=!0,this.glID=null,this.size=2e3,this.vertices=null,this.vertSize=5,this.indices=null,this.projectionX=NaN,this.projectionY=NaN,this.shaderManager=null,this.contextLost=!1,this.currentBaseTexture=null,this.currentBatchSize=0,this.drawData=[],this.$drawCalls=0,this.$computeDrawCall=!1,this.globalMatrix=new a.Matrix,this.savedGlobalMatrix=new a.Matrix,this._globalAlpha=1,this.$stencilList=[],this.stencilHandleCount=0,this.surface=(i=e,n=t,r=document.createElement("canvas"),isNaN(i)||isNaN(n)||(r.width=i,r.height=n),a.$toBitmapData(r),r),this.initWebGL(),this.rootRenderTarget=new s.WebGLRenderTarget(this.context,this.surface.width,this.surface.height),this.currentRenderTarget=this.rootRenderTarget,this.rebindRenderTarget()}var e=__define,t=o.prototype;return t.createRenderTarget=function(){var e=new s.WebGLRenderTarget(this.context,this.surface.width,this.surface.height);return this.rebindRenderTarget(),e},t.setRenderTarget=function(e){this.currentRenderTarget=e,this.rebindRenderTarget()},t.resetRenderTarget=function(){this.currentRenderTarget=this.rootRenderTarget,this.rebindRenderTarget()},t.rebindRenderTarget=function(){var e=this.context;e.bindFramebuffer(e.FRAMEBUFFER,this.currentRenderTarget.getFrameBuffer())},e(t,"width",function(){return this.surface.width}),e(t,"height",function(){return this.surface.height}),t.resize=function(e,t,i){var n=this.surface;i?(n.width<e&&(n.width=e),n.height<t&&(n.height=t)):(n.width!=e&&(n.width=e),n.height!=t&&(n.height=t)),this.currentRenderTarget.resize(this.surface.width,this.surface.height),this.rebindRenderTarget(),this.onResize(),this.clear()},t.resizeTo=function(e,t,i,n){var r=this.surface,a=r.width,s=r.height;this.surface.width=e,this.surface.height=t,this.drawFrameBufferToSurface(0,0,a,s,i,n,a,s,!0)},t.setDirtyRegionPolicy=function(e){this.dirtyRegionPolicy="on"==e},t.beginClip=function(e,t,i){this._dirtyRegionPolicy?(this.rootRenderTarget.useFrameBuffer=!0,this.rebindRenderTarget()):(this.rootRenderTarget.useFrameBuffer=!1,this.rebindRenderTarget(),this.clear()),t=+t||0,i=+i||0,this.setTransform(1,0,0,1,t,i);var n=e.length;if(1==n&&0==e[0].minX&&0==e[0].minY&&e[0].width==this.surface.width&&e[0].height==this.surface.height)return this.maskPushed=!1,void(this.rootRenderTarget.useFrameBuffer&&this.clear());for(var r=0;r<n;r++){var a=e[r];this.clearRect(a.minX,a.minY,a.width,a.height)}0<n?(this.pushMask(e),this.maskPushed=!0,this.offsetX=t,this.offsetY=i):this.maskPushed=!1},t.endClip=function(){this.maskPushed&&(this.setTransform(1,0,0,1,this.offsetX,this.offsetY),this.popMask())},t.getPixel=function(e,t){var i=this.context,n=new Uint8Array(4),r=this.currentRenderTarget.useFrameBuffer;return this.currentRenderTarget.useFrameBuffer=!0,this.rebindRenderTarget(),i.readPixels(e,t,1,1,i.RGBA,i.UNSIGNED_BYTE,n),this.currentRenderTarget.useFrameBuffer=r,this.rebindRenderTarget(),n},t.toDataURL=function(e,t){return this.surface.toDataURL(e,t)},t.clear=function(){if(0!=this.surface.width&&0!=this.surface.height){var e=this.context;e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)}},t.clearRect=function(e,t,i,n){this.setGlobalCompositeOperation("destination-out"),this.drawRect(e,t,i,n),this.setGlobalCompositeOperation("source-over")},t.destroy=function(){this.surface.width=this.surface.height=0},t.onResize=function(){this.projectionX=this.surface.width/2,this.projectionY=-this.surface.height/2,this.context&&this.context.viewport(0,0,this.surface.width,this.surface.height)},t.initWebGL=function(){this.onResize(),this.surface.addEventListener("webglcontextlost",this.handleContextLost.bind(this),!1),this.surface.addEventListener("webglcontextrestored",this.handleContextRestored.bind(this),!1);var e=4*this.size*this.vertSize,t=6*this.size;this.vertices=new Float32Array(e),this.indices=new Uint16Array(t);for(var i=0,n=0;i<t;i+=6,n+=4)this.indices[i+0]=n+0,this.indices[i+1]=n+1,this.indices[i+2]=n+2,this.indices[i+3]=n+0,this.indices[i+4]=n+2,this.indices[i+5]=n+3;this.getWebGLContext(),this.shaderManager=new s.WebGLShaderManager(this.context)},t.handleContextLost=function(){this.contextLost=!0},t.handleContextRestored=function(){this.initWebGL(),this.contextLost=!1},t.getWebGLContext=function(){for(var e,t={stencil:!0},i=["webgl","experimental-webgl"],n=0;n<i.length;n++){try{e=this.surface.getContext(i[n],t)}catch(e){}if(e)break}e||a.$error(1021),this.setContext(e),this.setGlobalCompositeOperation("source-over")},t.setContext=function(e){(this.context=e).id=o.glContextId++,this.glID=e.id,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW),e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),e.colorMask(!0,!0,!0,!0)},t.drawImage=function(e,t,i,n,r,a,s,o,h,l,u){if(!this.contextLost&&e){this.createWebGLTexture(e);var c=e.webGLTexture[this.glID];c&&this.drawTexture(c,t,i,n,r,a,s,o,h,l,u)}},t.drawTexture=function(e,t,i,n,r,a,s,o,h,l,u){if(!this.contextLost&&e){var c=e;this.currentBatchSize>=this.size-1?(this.$drawWebGL(),this.currentBaseTexture=c,this.drawData.push({type:0,texture:this.currentBaseTexture,count:0})):c!==this.currentBaseTexture&&(this.currentBaseTexture=c,this.drawData.push({type:0,texture:this.currentBaseTexture,count:0})),this.drawUvRect(t,i,n,r,a,s,o,h,l,u),this.currentBatchSize++,this.drawData[this.drawData.length-1].count++}},t.drawRect=function(e,t,i,n){this.contextLost||(this.currentBatchSize>=this.size-1?(this.$drawWebGL(),this.drawData.push({type:1,rect:1,count:0})):1<this.drawData.length&&this.drawData[this.drawData.length-2].rect||this.drawData.push({type:1,rect:1,count:0}),this.drawUvRect(0,0,i,n,e,t,i,n,i,n),this.currentBatchSize++,this.drawData[this.drawData.length-1].count++,this.currentBaseTexture=null)},t.drawUvRect=function(e,t,i,n,r,a,s,o,h,l){var u=h,c=l,d=this.globalMatrix,f=d.a,g=d.b,p=d.c,v=d.d,m=d.tx,b=d.ty;0==r&&0==a||d.append(1,0,0,1,r,a),i/s==1&&n/o==1||d.append(s/i,0,0,o/n,0,0);var x=d.a,w=d.b,E=d.c,y=d.d,T=d.tx,_=d.ty;d.a=f,d.b=g,d.c=p,d.d=v,d.tx=m,d.ty=b;var S=i,C=n;e/=u,t/=c,i/=u,n/=c;var R=this.vertices,L=4*this.currentBatchSize*this.vertSize,D=this._globalAlpha;R[L++]=T,R[L++]=_,R[L++]=e,R[L++]=t,R[L++]=D,R[L++]=x*S+T,R[L++]=w*S+_,R[L++]=i+e,R[L++]=t,R[L++]=D,R[L++]=x*S+E*C+T,R[L++]=y*C+w*S+_,R[L++]=i+e,R[L++]=n+t,R[L++]=D,R[L++]=E*C+T,R[L++]=y*C+_,R[L++]=e,R[L++]=n+t,R[L++]=D},t.$drawWebGL=function(){if(!(0==this.currentBatchSize&&0==this.drawData.length||this.contextLost)){this.start();var e=this.context,t=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);e.bufferSubData(e.ARRAY_BUFFER,0,t);for(var i=this.drawData.length,n=0,r=0;r<i;r++){var a=this.drawData[r];switch(a.type){case 0:n+=this.drawTextureElements(a,n);break;case 1:n+=this.drawRectElements(a,n);break;case 2:n+=this.drawPushMaskElements(a,n);break;case 3:n+=this.drawPopMaskElements(a,n);break;case 4:var s=o.blendModesForGL[a.value];s&&this.context.blendFunc(s[0],s[1])}4!=a.type&&this.$computeDrawCall&&this.$drawCalls++}this.drawData.length=0,this.currentBatchSize=0,this.currentBaseTexture=null}},t.start=function(){if(!this.contextLost){var e,t=this.context;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e="colorTransform"==this.filterType?this.shaderManager.colorTransformShader:"blur"==this.filterType?this.shaderManager.blurShader:this.shaderManager.defaultShader,this.shaderManager.activateShader(e),e.syncUniforms(),t.uniform2f(e.projectionVector,this.projectionX,this.projectionY),this.switchDrawingTextureState(!0);var i=4*this.vertSize;t.vertexAttribPointer(e.aVertexPosition,2,t.FLOAT,!1,i,0),t.vertexAttribPointer(e.aTextureCoord,2,t.FLOAT,!1,i,8),t.vertexAttribPointer(e.colorAttribute,2,t.FLOAT,!1,i,16)}},t.createWebGLTexture=function(e){var t=e;if(t.webGLTexture||(t.webGLTexture={}),!t.webGLTexture[this.glID]){var i=this.createTexture(t);t.webGLTexture[this.glID]=i}},t.createTexture=function(e){var t=this.context,i=t.createTexture();if(i)return(i.glContext=t).bindTexture(t.TEXTURE_2D,i),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindTexture(t.TEXTURE_2D,null),i;this.contextLost=!0},t.onRenderFinish=function(){this.$drawCalls=0,this.currentRenderTarget==this.rootRenderTarget&&(!this._dirtyRegionPolicy&&this.dirtyRegionPolicy&&this.drawSurfaceToFrameBuffer(0,0,this.surface.width,this.surface.height,0,0,this.surface.width,this.surface.height,!0),this._dirtyRegionPolicy&&this.drawFrameBufferToSurface(0,0,this.surface.width,this.surface.height,0,0,this.surface.width,this.surface.height),this._dirtyRegionPolicy=this.dirtyRegionPolicy)},t.drawFrameBufferToSurface=function(e,t,i,n,r,a,s,o,h){void 0===h&&(h=!1);var l=this.context;this.currentRenderTarget.useFrameBuffer=!1,this.rebindRenderTarget(),l.disable(l.STENCIL_TEST),this.globalMatrix.setTo(1,0,0,-1,0,this.surface.height),this._globalAlpha=1,this.setGlobalCompositeOperation("source-over"),h&&this.clear(),this.drawTexture(this.currentRenderTarget.texture,e,t,i,n,r,a,s,o,i,n),this.$drawWebGL(),this.currentRenderTarget.useFrameBuffer=!0,this.rebindRenderTarget(),this.maskPushed&&l.enable(l.STENCIL_TEST)},t.drawSurfaceToFrameBuffer=function(e,t,i,n,r,a,s,o,h){void 0===h&&(h=!1);var l=this.context;this.currentRenderTarget.useFrameBuffer=!0,this.rebindRenderTarget(),l.disable(l.STENCIL_TEST),this.globalMatrix.setTo(1,0,0,1,0,0),this._globalAlpha=1,this.setGlobalCompositeOperation("source-over"),h&&this.clear(),this.drawImage(this.surface,e,t,i,n,r,a,s,o,i,n),this.$drawWebGL(),this.currentRenderTarget.useFrameBuffer=!1,this.rebindRenderTarget(),this.maskPushed&&l.enable(l.STENCIL_TEST)},t.setTransform=function(e,t,i,n,r,a){this.globalMatrix.setTo(e,t,i,n,r,a)},t.transform=function(e,t,i,n,r,a){this.globalMatrix.append(e,t,i,n,r,a)},t.translate=function(e,t){this.globalMatrix.translate(e,t)},t.saveTransform=function(){this.savedGlobalMatrix.copyFrom(this.globalMatrix)},t.restoreTransform=function(){this.globalMatrix.copyFrom(this.savedGlobalMatrix)},t.setGlobalAlpha=function(e){this._globalAlpha=e},t.setGlobalCompositeOperation=function(e){this.currentBlendMode!=e&&(this.drawData.push({type:4,value:e}),this.currentBlendMode=e,this.currentBaseTexture=null)},t.pushMask=function(e){this.$stencilList.push(e),this.currentBatchSize>=this.size-1&&this.$drawWebGL(),this.drawData.push({type:2,pushMask:e,count:0}),this.drawMask(e),this.currentBaseTexture=null},t.popMask=function(){var e=this.$stencilList.pop();this.currentBatchSize>=this.size-1&&this.$drawWebGL(),this.drawData.push({type:3,popMask:e,count:0}),this.drawMask(e),this.currentBaseTexture=null},t.drawMask=function(e){if(!this.contextLost){var t=e.length;if(t)for(var i=0;i<t;i++){var n=e[i];this.drawUvRect(0,0,n.width,n.height,n.minX,n.minY,n.width,n.height,n.width,n.height),this.currentBatchSize++,this.drawData[this.drawData.length-1].count++}else this.drawUvRect(0,0,e.width,e.height,e.x,e.y,e.width,e.height,e.width,e.height),this.currentBatchSize++,this.drawData[this.drawData.length-1].count++}},t.switchDrawingTextureState=function(e){if(e!=this.drawingTexture){var t=this.context,i=this.shaderManager.defaultShader;e?t.uniform1f(i.uPureColor,0):t.uniform1f(i.uPureColor,1),this.drawingTexture=e}},t.drawTextureElements=function(e,t){this.switchDrawingTextureState(!0);var i=this.context;i.bindTexture(i.TEXTURE_2D,e.texture);var n=6*e.count;return i.drawElements(i.TRIANGLES,n,i.UNSIGNED_SHORT,2*t),n},t.drawRectElements=function(e,t){this.switchDrawingTextureState(!1);var i=this.context;i.bindTexture(i.TEXTURE_2D,null);var n=6*e.count;return i.drawElements(i.TRIANGLES,n,i.UNSIGNED_SHORT,2*t),n},t.drawPushMaskElements=function(e,t){this.switchDrawingTextureState(!1);var i=this.context;0==this.stencilHandleCount&&(i.enable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT));var n=this.stencilHandleCount;this.stencilHandleCount++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,n,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR),i.bindTexture(i.TEXTURE_2D,null);var r=6*e.count;return i.drawElements(i.TRIANGLES,r,i.UNSIGNED_SHORT,2*t),i.stencilFunc(i.EQUAL,n+1,255),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),r},t.drawPopMaskElements=function(e,t){this.switchDrawingTextureState(!1);var i=this.context;if(this.stencilHandleCount--,0==this.stencilHandleCount)return i.disable(i.STENCIL_TEST),r=6*e.count;var n=this.stencilHandleCount;i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,n+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR),i.bindTexture(i.TEXTURE_2D,null);var r=6*e.count;return i.drawElements(i.TRIANGLES,r,i.UNSIGNED_SHORT,2*t),i.stencilFunc(i.EQUAL,n,255),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),r},o.initBlendMode=function(){(o.blendModesForGL={})["source-over"]=[1,771],o.blendModesForGL.lighter=[770,1],o.blendModesForGL["destination-out"]=[0,771],o.blendModesForGL["destination-in"]=[0,770]},o.glContextId=0,o.blendModesForGL=null,o}(),s.WebGLRenderBuffer=e,a.registerClass(e,"egret.web.WebGLRenderBuffer",["egret.sys.RenderBuffer"]),e.initBlendMode()}(egret||(egret={})),function(L){var D,A,$,B,e;D=L.web||(L.web={}),A=["source-over","lighter","destination-out"],$="source-over",B=[],e=function(){function e(){this.nestLevel=0}__define;var t=e.prototype;return t.render=function(e,t,i,n,r){this.nestLevel++;var a=t,s=r?e:null;this.drawDisplayObject(e,a,n,i,null,null,s),a.$drawWebGL();var o=a.$drawCalls;if(a.onRenderFinish(),this.nestLevel--,0===this.nestLevel){6<B.length&&(B.length=6);for(var h=B.length,l=0;l<h;l++)B[l].resize(0,0)}return o},t.drawDisplayObject=function(e,t,i,n,r,a,s){var o,h=0;if(r&&!s?(r.isDirty&&(h+=r.drawToSurface()),o=r.$renderNode):o=e.$getRenderNode(),o){if(i){var l=o.renderRegion;if(a&&!a.intersects(l))o.needRedraw=!1;else if(!o.needRedraw)for(var u=i.length,c=0;c<u;c++)if(l.intersects(i[c])){o.needRedraw=!0;break}}else o.needRedraw=!0;var d,f;if(o.needRedraw)h++,s?(d=e.$getConcatenatedAlphaAt(s,e.$getConcatenatedAlpha()),f=L.Matrix.create().copyFrom(e.$getConcatenatedMatrix()),e.$getConcatenatedMatrixAt(s,f),n.$preMultiplyInto(f,f),t.setTransform(f.a,f.b,f.c,f.d,f.tx,f.ty),L.Matrix.release(f)):(d=o.renderAlpha,f=o.renderMatrix,t.setTransform(f.a,f.b,f.c,f.d,f.tx+n.tx,f.ty+n.ty)),t.setGlobalAlpha(d),this.renderNode(o,t),o.needRedraw=!1}if(r&&!s)return h;var g=e.$children;if(g)for(var p=g.length,v=0;v<p;v++){var m=g[v];!m.$visible||m.$alpha<=0||m.$maskedObject||(0!==m.$blendMode||m.$mask&&(m.$mask.$parentDisplayList||s)?h+=this.drawWithClip(m,t,i,n,a,s):m.$scrollRect||m.$maskRect?h+=this.drawWithScrollRect(m,t,i,n,a,s):m.isFPS?(t.$drawWebGL(),t.$computeDrawCall=!1,this.drawDisplayObject(m,t,i,n,m.$displayList,a,s),t.$drawWebGL(),t.$computeDrawCall=!0):h+=this.drawDisplayObject(m,t,i,n,m.$displayList,a,s))}return h},t.drawWithClip=function(e,t,i,n,r,a){var s=0,o=0!==e.$blendMode;if(o){var h=A[e.$blendMode];h||(h=$)}var l,u,c=e.$scrollRect?e.$scrollRect:e.$maskRect,d=e.$mask,f=L.Matrix.create();if(f.copyFrom(e.$getConcatenatedMatrix()),e.$parentDisplayList){var g=e.$parentDisplayList.root;g!==e.$stage&&e.$getConcatenatedMatrixAt(g,f)}if(d){var p=d.$getOriginalBounds();l=L.sys.Region.create(),(C=L.Matrix.create()).copyFrom(d.$getConcatenatedMatrix()),l.updateRegion(p,C),L.Matrix.release(C)}if(c&&(u=L.sys.Region.create()).updateRegion(c,f),u&&l?(u.intersect(l),L.sys.Region.release(l)):!u&&l&&(u=l),u){if(u.isEmpty()||r&&!r.intersects(u))return L.sys.Region.release(u),L.Matrix.release(f),s}else u=L.sys.Region.create(),p=e.$getOriginalBounds(),u.updateRegion(p,f);var v=!1;if(i){for(var m=i.length,b=0;b<m;b++)if(u.intersects(i[b])){v=!0;break}}else v=!0;if(!v)return L.sys.Region.release(u),L.Matrix.release(f),s;if(d||e.$children&&0!=e.$children.length){var x=this.createRenderBuffer(u.width,u.height);if(!x.context)return s+=this.drawDisplayObject(e,t,i,n,e.$displayList,r,a),L.sys.Region.release(u),L.Matrix.release(f),s;if(c){C=f;x.setTransform(C.a,C.b,C.c,C.d,C.tx-u.minX,C.ty-u.minY),x.pushMask(c)}x.setTransform(1,0,0,1,-u.minX,-u.minY);R=L.Matrix.create().setTo(1,0,0,1,-u.minX,-u.minY);if(s+=this.drawDisplayObject(e,x,i,R,e.$displayList,u,a?e:null),L.Matrix.release(R),d){var w=this.createRenderBuffer(u.width,u.height);if(!w.context)return s+=this.drawDisplayObject(e,t,i,n,e.$displayList,r,a),c&&x.popMask(),B.push(x),L.sys.Region.release(u),L.Matrix.release(f),s;w.setTransform(1,0,0,1,-u.minX,-u.minY),R=L.Matrix.create().setTo(1,0,0,1,-u.minX,-u.minY);var E=this.drawDisplayObject(d,w,i,R,d.$displayList,u,a?d:null);if(L.Matrix.release(R),0<E){s+=E,x.setGlobalCompositeOperation("destination-in"),x.setTransform(1,0,0,1,0,0),x.setGlobalAlpha(1),w.$drawWebGL(),w.onRenderFinish(),D.WebGLUtils.deleteWebGLTexture(w.surface);var y=w.surface.width,T=w.surface.height;x.drawImage(w.surface,0,0,y,T,0,0,y,T,y,T)}B.push(w)}if(0<s){s++,o&&t.setGlobalCompositeOperation(h),t.setGlobalAlpha(1),t.setTransform(1,0,0,1,u.minX+n.tx,u.minY+n.ty),x.$drawWebGL(),x.onRenderFinish(),D.WebGLUtils.deleteWebGLTexture(x.surface);var _=x.surface.width,S=x.surface.height;t.drawImage(x.surface,0,0,_,S,0,0,_,S,_,S),o&&t.setGlobalCompositeOperation($)}return x.setGlobalCompositeOperation($),c&&x.popMask(),B.push(x),L.sys.Region.release(u),L.Matrix.release(f),s}if(c){var C=f;t.setTransform(C.a,C.b,C.c,C.d,C.tx-u.minX,C.ty-u.minY),t.pushMask(c)}var R=L.Matrix.create().setTo(1,0,0,1,0,0);return o&&t.setGlobalCompositeOperation(h),s+=this.drawDisplayObject(e,t,i,R,e.$displayList,u,null),L.Matrix.release(R),o&&t.setGlobalCompositeOperation($),c&&t.pushMask(c),L.sys.Region.release(u),L.Matrix.release(f),s},t.drawWithScrollRect=function(e,t,i,n,r,a){var s=0,o=e.$scrollRect?e.$scrollRect:e.$maskRect;if(0==o.width||0==o.height)return s;var h=L.Matrix.create();if(h.copyFrom(e.$getConcatenatedMatrix()),e.$parentDisplayList){var l=e.$parentDisplayList.root;l!==e.$stage&&e.$getConcatenatedMatrixAt(l,h)}var u=L.sys.Region.create();if(o.isEmpty()||u.updateRegion(o,h),u.isEmpty()||r&&!r.intersects(u))return L.sys.Region.release(u),L.Matrix.release(h),s;var c=!1;if(i){for(var d=i.length,f=0;f<d;f++)if(u.intersects(i[f])){c=!0;break}}else c=!0;return c&&(t.setTransform(h.a,h.b,h.c,h.d,h.tx+n.tx,h.ty+n.ty),t.pushMask(o),s+=this.drawDisplayObject(e,t,i,n,e.$displayList,u,a),t.setTransform(h.a,h.b,h.c,h.d,h.tx+n.tx,h.ty+n.ty),t.popMask()),L.sys.Region.release(u),L.Matrix.release(h),s},t.drawNodeToBuffer=function(e,t,i,n){t.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),this.renderNode(e,t,n),t.$drawWebGL(),t.onRenderFinish()},t.renderNode=function(e,t,i){switch(e.type){case 1:this.renderBitmap(e,t);break;case 2:this.renderText(e,t);break;case 3:this.renderGraphics(e,t,i);break;case 4:this.renderGroup(e,t);break;case 5:t.setTransform(e.drawData[0],e.drawData[1],e.drawData[2],e.drawData[3],e.drawData[4],e.drawData[5]);break;case 6:t.setGlobalAlpha(e.drawData[0])}},t.renderBitmap=function(e,t){var i=e.image,n=e.drawData,r=n.length,a=0,s=e.matrix;for(s&&(t.saveTransform(),t.transform(s.a,s.b,s.c,s.d,s.tx,s.ty));a<r;)t.drawImage(i,n[a++],n[a++],n[a++],n[a++],n[a++],n[a++],n[a++],n[a++],e.imageWidth,e.imageHeight);s&&t.restoreTransform()},t.renderText=function(e,t){var i=e.width-e.x,n=e.height-e.y;if(0!=e.drawData.length&&(e.$canvasRenderBuffer&&e.$canvasRenderBuffer.context?e.$canvasRenderBuffer.resize(i,n,!0):(e.$canvasRenderer=new L.CanvasRenderer,e.$canvasRenderBuffer=new D.CanvasRenderBuffer(i,n)),e.$canvasRenderBuffer.context)){(e.x||e.y)&&(e.dirtyRender&&e.$canvasRenderBuffer.context.translate(-e.x,-e.y),t.transform(1,0,0,1,e.x,e.y));var r=e.$canvasRenderBuffer.surface;e.dirtyRender&&(D.WebGLUtils.deleteWebGLTexture(r),e.$canvasRenderer.renderText(e,e.$canvasRenderBuffer.context)),t.drawImage(r,0,0,i,n,0,0,i,n,r.width,r.height),(e.x||e.y)&&(e.dirtyRender&&e.$canvasRenderBuffer.context.translate(e.x,e.y),t.transform(1,0,0,1,-e.x,-e.y)),e.dirtyRender=!1}},t.renderGraphics=function(e,t,i){var n=e.width,r=e.height;if(!(n<=0||r<=0)&&(e.$canvasRenderBuffer&&e.$canvasRenderBuffer.context?e.dirtyRender&&e.$canvasRenderBuffer.resize(n,r,!0):(e.$canvasRenderer=new L.CanvasRenderer,e.$canvasRenderBuffer=new D.CanvasRenderBuffer(n,r)),e.$canvasRenderBuffer.context)){(e.x||e.y)&&(e.dirtyRender&&e.$canvasRenderBuffer.context.translate(-e.x,-e.y),t.transform(1,0,0,1,e.x,e.y));var a=e.$canvasRenderBuffer.surface;e.dirtyRender&&(D.WebGLUtils.deleteWebGLTexture(a),e.$canvasRenderer.renderGraphics(e,e.$canvasRenderBuffer.context,i)),t.drawImage(a,0,0,n,r,0,0,n,r,a.width,a.height),(e.x||e.y)&&(e.dirtyRender&&e.$canvasRenderBuffer.context.translate(e.x,e.y),t.transform(1,0,0,1,-e.x,-e.y)),e.dirtyRender=!1}},t.renderGroup=function(e,t){for(var i=e.drawData,n=i.length,r=0;r<n;r++){var a=i[r];this.renderNode(a,t)}},t.createRenderBuffer=function(e,t){var i=B.pop();return i?i.resize(e,t,!0):(i=new D.WebGLRenderBuffer(e,t)).$computeDrawCall=!1,i},e}(),D.WebGLRenderer=e,L.registerClass(e,"egret.web.WebGLRenderer",["egret.sys.SystemRenderer"])}(egret||(egret={}));
var egret_4399_h5api={initGame:function(i,n,e,a){h5api.initGame(i,n,e,a)},progress:function(i){h5api.progress(i)},isWeixinBrowser:function(){return h5api.isWeixinBrowser()},share:function(i){h5api.share(i)},moreGame:function(){h5api.moreGame()},submitScore:function(i,n,e){h5api.submitScore(i,function(i){n.call(e,i)})},getRank:function(n,e){h5api.getRank(function(i){n.call(e,i)})}};
var egret;!function(t){var n=function(){function n(){t.$error(1014)}__define;return n.get=function(n){return n<-1&&(n=-1),1<n&&(n=1),function(t){return 0==n?t:n<0?t*(t*-n+1+n):t*((2-t)*n+(1-n))}},n.getPowIn=function(n){return function(t){return Math.pow(t,n)}},n.getPowOut=function(n){return function(t){return 1-Math.pow(1-t,n)}},n.getPowInOut=function(n){return function(t){return(t*=2)<1?.5*Math.pow(t,n):1-.5*Math.abs(Math.pow(2-t,n))}},n.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},n.sineOut=function(t){return Math.sin(t*Math.PI/2)},n.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},n.getBackIn=function(n){return function(t){return t*t*((n+1)*t-n)}},n.getBackOut=function(n){return function(t){return--t*t*((n+1)*t+n)+1}},n.getBackInOut=function(n){return n*=1.525,function(t){return(t*=2)<1?t*t*((n+1)*t-n)*.5:.5*((t-=2)*t*((n+1)*t+n)+2)}},n.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},n.circOut=function(t){return Math.sqrt(1- --t*t)},n.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},n.bounceIn=function(t){return 1-n.bounceOut(1-t)},n.bounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},n.bounceInOut=function(t){return t<.5?.5*n.bounceIn(2*t):.5*n.bounceOut(2*t-1)+.5},n.getElasticIn=function(e,i){var s=2*Math.PI;return function(t){if(0==t||1==t)return t;var n=i/s*Math.asin(1/e);return-e*Math.pow(2,10*(t-=1))*Math.sin((t-n)*s/i)}},n.getElasticOut=function(e,i){var s=2*Math.PI;return function(t){if(0==t||1==t)return t;var n=i/s*Math.asin(1/e);return e*Math.pow(2,-10*t)*Math.sin((t-n)*s/i)+1}},n.getElasticInOut=function(e,i){var s=2*Math.PI;return function(t){var n=i/s*Math.asin(1/e);return(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-n)*s/i)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-n)*s/i)*.5+1}},n.quadIn=n.getPowIn(2),n.quadOut=n.getPowOut(2),n.quadInOut=n.getPowInOut(2),n.cubicIn=n.getPowIn(3),n.cubicOut=n.getPowOut(3),n.cubicInOut=n.getPowInOut(3),n.quartIn=n.getPowIn(4),n.quartOut=n.getPowOut(4),n.quartInOut=n.getPowInOut(4),n.quintIn=n.getPowIn(5),n.quintOut=n.getPowOut(5),n.quintInOut=n.getPowInOut(5),n.backIn=n.getBackIn(1.7),n.backOut=n.getBackOut(1.7),n.backInOut=n.getBackInOut(1.7),n.elasticIn=n.getElasticIn(1,.3),n.elasticOut=n.getElasticOut(1,.3),n.elasticInOut=n.getElasticInOut(1,.3*1.5),n}();t.Ease=n,t.registerClass(n,"egret.Ease")}(egret||(egret={})),function(u){var t=function(i){function l(t,n,e){i.call(this),this._target=null,this._useTicks=!1,this.ignoreGlobalPause=!1,this.loop=!1,this.pluginData=null,this._steps=null,this._actions=null,this.paused=!1,this.duration=0,this._prevPos=-1,this.position=null,this._prevPosition=0,this._stepPosition=0,this.passive=!1,this.initialize(t,n,e)}__extends(l,i);__define;var t=l.prototype;return l.get=function(t,n,e,i){return void 0===n&&(n=null),void 0===e&&(e=null),void 0===i&&(i=!1),i&&l.removeTweens(t),new l(t,n,e)},l.removeTweens=function(t){if(t.tween_count){for(var n=l._tweens,e=n.length-1;0<=e;e--)n[e]._target==t&&(n[e].paused=!0,n.splice(e,1));t.tween_count=0}},l.pauseTweens=function(t){if(t.tween_count)for(var n=u.Tween._tweens,e=n.length-1;0<=e;e--)n[e]._target==t&&(n[e].paused=!0)},l.resumeTweens=function(t){if(t.tween_count)for(var n=u.Tween._tweens,e=n.length-1;0<=e;e--)n[e]._target==t&&(n[e].paused=!1)},l.tick=function(t,n){void 0===n&&(n=!1);var e=t-l._lastTime;l._lastTime=t;for(var i=l._tweens.concat(),s=i.length-1;0<=s;s--){var u=i[s];n&&!u.ignoreGlobalPause||u.paused||u.tick(u._useTicks?1:e)}return!1},l._register=function(t,n){var e=t._target,i=l._tweens;if(n)e&&(e.tween_count=0<e.tween_count?e.tween_count+1:1),i.push(t),l._inited||(l._lastTime=u.getTimer(),u.sys.$ticker.$startTick(l.tick,null),l._inited=!0);else{e&&e.tween_count--;for(var s=i.length;s--;)if(i[s]==t)return void i.splice(s,1)}},l.removeAllTweens=function(){for(var t=l._tweens,n=0,e=t.length;n<e;n++){var i=t[n];i.paused=!0,i._target.tweenjs_count=0}t.length=0},t.initialize=function(t,n,e){this._target=t,n&&(this._useTicks=n.useTicks,this.ignoreGlobalPause=n.ignoreGlobalPause,this.loop=n.loop,n.onChange&&this.addEventListener("change",n.onChange,n.onChangeObj),n.override&&l.removeTweens(t)),this.pluginData=e||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],n&&n.paused?this.paused=!0:l._register(this,!0),n&&null!=n.position&&this.setPosition(n.position,l.NONE)},t.setPosition=function(t,n){void 0===n&&(n=1),t<0&&(t=0);var e=t,i=!1;if(e>=this.duration&&(this.loop?e%=this.duration:(e=this.duration,i=!0)),e==this._prevPos)return i;var s=this._prevPos;if(this.position=this._prevPos=e,this._prevPosition=t,this._target)if(i)this._updateTargetProps(null,1);else if(0<this._steps.length){for(var u=0,r=this._steps.length;u<r&&!(this._steps[u].t>e);u++);var o=this._steps[u-1];this._updateTargetProps(o,(this._stepPosition=e-o.t)/o.d)}return i&&this.setPaused(!0),0!=n&&0<this._actions.length&&(this._useTicks?this._runActions(e,e):1==n&&e<s?(s!=this.duration&&this._runActions(s,this.duration),this._runActions(0,e,!0)):this._runActions(s,e)),this.dispatchEventWith("change"),i},t._runActions=function(t,n,e){void 0===e&&(e=!1);var i=t,s=n,u=-1,r=this._actions.length,o=1;for(n<t&&(i=n,s=t,u=r,r=o=-1);(u+=o)!=r;){var a=this._actions[u],h=a.t;(h==s||i<h&&h<s||e&&h==t)&&a.f.apply(a.o,a.p)}},t._updateTargetProps=function(t,n){var e,i,s,u,r,o;if(t||1!=n){if(this.passive=!!t.v,this.passive)return;t.e&&(n=t.e(n,0,1,1)),e=t.p0,i=t.p1}else this.passive=!1,e=i=this._curQueueProps;for(var a in this._initQueueProps){null==(u=e[a])&&(e[a]=u=this._initQueueProps[a]),null==(r=i[a])&&(i[a]=r=u),s=u==r||0==n||1==n||"number"!=typeof u?1==n?r:u:u+(r-u)*n;var h=!1;if(o=l._plugins[a])for(var c=0,p=o.length;c<p;c++){var _=o[c].tween(this,a,s,e,i,n,!!t&&e==i,!t);_==l.IGNORE?h=!0:s=_}h||(this._target[a]=s)}},t.setPaused=function(t){return this.paused=t,l._register(this,!t),this},t._cloneProps=function(t){var n={};for(var e in t)n[e]=t[e];return n},t._addStep=function(t){return 0<t.d&&(this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},t._appendQueueProps=function(t){var n,e,i,s,u;for(var r in t)if(void 0===this._initQueueProps[r]){if(e=this._target[r],n=l._plugins[r])for(i=0,s=n.length;i<s;i++)e=n[i].init(this,r,e);this._initQueueProps[r]=this._curQueueProps[r]=void 0===e?null:e}else e=this._curQueueProps[r];for(var r in t){if(e=this._curQueueProps[r],n=l._plugins[r])for(u=u||{},i=0,s=n.length;i<s;i++)n[i].step&&n[i].step(this,r,e,t[r],u);this._curQueueProps[r]=t[r]}return u&&this._appendQueueProps(u),this._curQueueProps},t._addAction=function(t){return t.t=this.duration,this._actions.push(t),this},t._set=function(t,n){for(var e in t)n[e]=t[e]},t.wait=function(t,n){if(null==t||t<=0)return this;var e=this._cloneProps(this._curQueueProps);return this._addStep({d:t,p0:e,p1:e,v:n})},t.to=function(t,n,e){return void 0===e&&(e=void 0),(isNaN(n)||n<0)&&(n=0),this._addStep({d:n||0,p0:this._cloneProps(this._curQueueProps),e:e,p1:this._cloneProps(this._appendQueueProps(t))})},t.call=function(t,n,e){return void 0===n&&(n=void 0),void 0===e&&(e=void 0),this._addAction({f:t,p:e||[],o:n||this._target})},t.set=function(t,n){return void 0===n&&(n=null),this._addAction({f:this._set,o:this,p:[t,n||this._target]})},t.play=function(t){return t||(t=this),this.call(t.setPaused,t,[!1])},t.pause=function(t){return t||(t=this),this.call(t.setPaused,t,[!0])},t.tick=function(t){this.paused||this.setPosition(this._prevPosition+t)},l.NONE=0,l.LOOP=1,l.REVERSE=2,l._tweens=[],l.IGNORE={},l._plugins={},l._inited=!1,l._lastTime=0,l}(u.EventDispatcher);u.Tween=t,u.registerClass(t,"egret.Tween")}(egret||(egret={}));
var RES,egret;!function(e){var t=function(){function e(e,t,r){this.groupName="",this.data=null,this._loaded=!1,this.name=e,this.url=t,this.type=r}var t=__define,r=e.prototype;return t(r,"loaded",function(){return this.data?this.data.loaded:this._loaded},function(e){this.data&&(this.data.loaded=e),this._loaded=e}),r.toString=function(){return'[ResourceItem name="'+this.name+'" url="'+this.url+'" type="'+this.type+'"]'},e.TYPE_XML="xml",e.TYPE_IMAGE="image",e.TYPE_BIN="bin",e.TYPE_TEXT="text",e.TYPE_JSON="json",e.TYPE_SHEET="sheet",e.TYPE_FONT="font",e.TYPE_SOUND="sound",e}();e.ResourceItem=t,egret.registerClass(t,"RES.ResourceItem")}(RES||(RES={})),function(r){var e=function(){function e(){this.keyMap={},this.groupDic={},r.configInstance=this}__define;var t=e.prototype;return t.getGroupByName=function(e){var t=new Array;if(!this.groupDic[e])return t;for(var r=this.groupDic[e],i=r.length,s=0;s<i;s++){var n=r[s];t.push(this.parseResourceItem(n))}return t},t.getRawGroupByName=function(e){return this.groupDic[e]?this.groupDic[e]:[]},t.createGroup=function(e,t,r){if(void 0===r&&(r=!1),!r&&this.groupDic[e]||!t||0==t.length)return!1;for(var i=this.groupDic,s=[],n=t.length,a=0;a<n;a++){var o=t[a],u=i[o];if(u)for(var l=u.length,c=0;c<l;c++){var h=u[c];-1==s.indexOf(h)&&s.push(h)}else(h=this.keyMap[o])?-1==s.indexOf(h)&&s.push(h):egret.$warn(3200,o)}return 0!=s.length&&(this.groupDic[e]=s,!0)},t.parseConfig=function(e,t){if(e){var r=e.resources;if(r)for(var i=r.length,s=0;s<i;s++){var n=r[s],a=n.url;a&&-1==a.indexOf("://")&&(n.url=t+a),this.addItemToKeyMap(n)}var o=e.groups;if(o)for(i=o.length,s=0;s<i;s++){for(var u=o[s],l=[],c=u.keys.split(","),h=c.length,f=0;f<h;f++){var d=c[f].trim();(n=this.keyMap[d])&&-1==l.indexOf(n)&&l.push(n)}this.groupDic[u.name]=l}}},t.addSubkey=function(e,t){var r=this.keyMap[t];r&&!this.keyMap[e]&&(this.keyMap[e]=r)},t.addItemToKeyMap=function(e){if(this.keyMap[e.name]||(this.keyMap[e.name]=e),e.hasOwnProperty("subkeys"))for(var t=e.subkeys.split(","),r=(e.subkeys=t).length,i=0;i<r;i++){var s=t[i];null==this.keyMap[s]&&(this.keyMap[s]=e)}},t.getName=function(e){var t=this.keyMap[e];return t?t.name:""},t.getType=function(e){var t=this.keyMap[e];return t?t.type:""},t.getRawResourceItem=function(e){return this.keyMap[e]},t.getResourceItem=function(e){var t=this.keyMap[e];return t?this.parseResourceItem(t):null},t.parseResourceItem=function(e){var t=new r.ResourceItem(e.name,e.url,e.type);return t.data=e,t},e}();r.ResourceConfig=e,egret.registerClass(e,"RES.ResourceConfig")}(RES||(RES={})),function(a){var e=function(e){function t(){e.call(this),this.thread=2,this.loadingCount=0,this.callBack=null,this.resInstance=null,this.groupTotalDic={},this.numLoadedDic={},this.itemListDic={},this.groupErrorDic={},this.retryTimesDic={},this.maxRetryTimes=3,this.failedList=new Array,this.priorityQueue={},this.lazyLoadList=new Array,this.analyzerDic={},this.queueIndex=0}__extends(t,e);__define;var r=t.prototype;return r.isGroupInLoading=function(e){return void 0!==this.itemListDic[e]},r.loadGroup=function(e,t,r){if(void 0===r&&(r=0),!this.itemListDic[t]&&t){if(!e||0==e.length){egret.$warn(3201,t);var i=new a.ResourceEvent(a.ResourceEvent.GROUP_LOAD_ERROR);return i.groupName=t,void this.dispatchEvent(i)}this.priorityQueue[r]?this.priorityQueue[r].push(t):this.priorityQueue[r]=[t];for(var s=(this.itemListDic[t]=e).length,n=0;n<s;n++){e[n].groupName=t}this.groupTotalDic[t]=e.length,this.numLoadedDic[t]=0,this.next()}},r.loadItem=function(e){this.lazyLoadList.push(e),e.groupName="",this.next()},r.next=function(){for(;this.loadingCount<this.thread;){var e=this.getOneResourceItem();if(!e)break;if(this.loadingCount++,e.loaded)this.onItemComplete(e);else this.resInstance.$getAnalyzerByType(e.type).loadFile(e,this.onItemComplete,this)}},r.getOneResourceItem=function(){if(0<this.failedList.length)return this.failedList.shift();var e=Number.NEGATIVE_INFINITY;for(var t in this.priorityQueue)e=Math.max(e,t);var r=this.priorityQueue[e];if(!r||0==r.length)return 0==this.lazyLoadList.length?null:this.lazyLoadList.pop();for(var i,s=r.length,n=0;n<s&&(this.queueIndex>=s&&(this.queueIndex=0),!(0<(i=this.itemListDic[r[this.queueIndex]]).length));n++)this.queueIndex++;return 0==i.length?null:i.shift()},r.onItemComplete=function(e){this.loadingCount--;var t=e.groupName;if(!e.loaded){var r=this.retryTimesDic[e.name]||1;if(!(r>this.maxRetryTimes))return this.retryTimesDic[e.name]=r+1,this.failedList.push(e),void this.next();delete this.retryTimesDic[e.name],a.ResourceEvent.dispatchResourceEvent(this.resInstance,a.ResourceEvent.ITEM_LOAD_ERROR,t,e)}if(t){this.numLoadedDic[t]++;var i=this.numLoadedDic[t],s=this.groupTotalDic[t];if(e.loaded||(this.groupErrorDic[t]=!0),a.ResourceEvent.dispatchResourceEvent(this.resInstance,a.ResourceEvent.GROUP_PROGRESS,t,e,i,s),i==s){var n=this.groupErrorDic[t];this.removeGroupName(t),delete this.groupTotalDic[t],delete this.numLoadedDic[t],delete this.itemListDic[t],delete this.groupErrorDic[t],n?a.ResourceEvent.dispatchResourceEvent(this,a.ResourceEvent.GROUP_LOAD_ERROR,t):a.ResourceEvent.dispatchResourceEvent(this,a.ResourceEvent.GROUP_COMPLETE,t)}}else this.callBack.call(this.resInstance,e);this.next()},r.removeGroupName=function(e){for(var t in this.priorityQueue){for(var r=this.priorityQueue[t],i=r.length,s=0,n=!1,a=(i=r.length,0);a<i;a++){if(r[a]==e){r.splice(s,1),n=!0;break}s++}if(n){0==r.length&&delete this.priorityQueue[t];break}}},t}(egret.EventDispatcher);a.ResourceLoader=e,egret.registerClass(e,"RES.ResourceLoader")}(RES||(RES={})),function(e){var t=function(i){function u(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1),i.call(this,e,t,r),this.itemsLoaded=0,this.itemsTotal=0,this.groupName="",this.resItem=null}__extends(u,i);__define;return u.dispatchResourceEvent=function(e,t,r,i,s,n){void 0===r&&(r=""),void 0===i&&(i=null),void 0===s&&(s=0),void 0===n&&(n=0);var a=egret.Event.create(u,t);a.groupName=r,a.resItem=i,a.itemsLoaded=s,a.itemsTotal=n;var o=e.dispatchEvent(a);return egret.Event.release(a),o},u.ITEM_LOAD_ERROR="itemLoadError",u.CONFIG_COMPLETE="configComplete",u.CONFIG_LOAD_ERROR="configLoadError",u.GROUP_PROGRESS="groupProgress",u.GROUP_COMPLETE="groupComplete",u.GROUP_LOAD_ERROR="groupLoadError",u}(egret.Event);e.ResourceEvent=t,egret.registerClass(t,"RES.ResourceEvent")}(RES||(RES={})),function(i){var e=function(e){function t(){e.call(this),this.resourceConfig=null,this.resourceConfig=i.configInstance}__extends(t,e);__define;var r=t.prototype;return r.addSubkey=function(e,t){this.resourceConfig.addSubkey(e,t)},r.loadFile=function(e,t,r){},r.getRes=function(e){},r.destroyRes=function(e){return!1},t.getStringPrefix=function(e){if(!e)return"";var t=e.indexOf(".");return-1!=t?e.substring(0,t):""},t.getStringTail=function(e){if(!e)return"";var t=e.indexOf(".");return-1!=t?e.substring(t+1):""},t}(egret.HashObject);i.AnalyzerBase=e,egret.registerClass(e,"RES.AnalyzerBase")}(RES||(RES={})),function(s){var e=function(e){function t(){e.call(this),this.fileDic={},this.resItemDic=[],this._dataFormat=egret.HttpResponseType.ARRAY_BUFFER,this.recycler=[]}__extends(t,e);__define;var r=t.prototype;return r.loadFile=function(e,t,r){if(this.fileDic[e.name])t.call(r,e);else{var i=this.getRequest();this.resItemDic[i.hashCode]={item:e,func:t,thisObject:r},i.open(s.$getVirtualUrl(e.url)),i.send()}},r.getRequest=function(){var e=this.recycler.pop();return e||((e=new egret.HttpRequest).addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),e.responseType=this._dataFormat,e},r.onLoadFinish=function(e){var t=e.target,r=this.resItemDic[t.hashCode];delete this.resItemDic[t.hashCode];var i=r.item,s=r.func;i.loaded=e.type==egret.Event.COMPLETE,i.loaded&&this.analyzeData(i,t.response),this.recycler.push(t),s.call(r.thisObject,i)},r.analyzeData=function(e,t){var r=e.name;this.fileDic[r]||""!=t&&!t||(this.fileDic[r]=t)},r.getRes=function(e){return this.fileDic[e]},r.hasRes=function(e){return null!=this.getRes(e)},r.destroyRes=function(e){return!!this.fileDic[e]&&(this.onResourceDestroy(this.fileDic[e]),delete this.fileDic[e],!0)},r.onResourceDestroy=function(e){},t}(s.AnalyzerBase);s.BinAnalyzer=e,egret.registerClass(e,"RES.BinAnalyzer")}(RES||(RES={})),function(s){var e=function(e){function t(){e.call(this),this.fileDic={},this.resItemDic=[],this.recycler=[]}__extends(t,e);__define;var r=t.prototype;return r.loadFile=function(e,t,r){if(this.fileDic[e.name])t.call(r,e);else{var i=this.getLoader();this.resItemDic[i.$hashCode]={item:e,func:t,thisObject:r},i.load(s.$getVirtualUrl(e.url))}},r.getLoader=function(){var e=this.recycler.pop();return e||((e=new egret.ImageLoader).addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),e},r.onLoadFinish=function(e){var t=e.$target,r=this.resItemDic[t.$hashCode];delete this.resItemDic[t.$hashCode];var i=r.item,s=r.func;if(i.loaded=e.$type==egret.Event.COMPLETE,i.loaded){var n=new egret.Texture;n._setBitmapData(t.data),this.analyzeData(i,n)}this.recycler.push(t),s.call(r.thisObject,i)},r.analyzeData=function(e,t){var r=e.name;if(!this.fileDic[r]&&t){this.fileDic[r]=t;var i=e.data;if(i&&i.scale9grid){var s=i.scale9grid.split(",");t.scale9Grid=new egret.Rectangle(parseInt(s[0]),parseInt(s[1]),parseInt(s[2]),parseInt(s[3]))}}},r.getRes=function(e){return this.fileDic[e]},r.hasRes=function(e){return null!=this.getRes(e)},r.destroyRes=function(e){return!!this.fileDic[e]&&(this.onResourceDestroy(this.fileDic[e]),delete this.fileDic[e],!0)},r.onResourceDestroy=function(e){e.dispose()},t}(s.AnalyzerBase);s.ImageAnalyzer=e,egret.registerClass(e,"RES.ImageAnalyzer")}(RES||(RES={})),function(e){var t=function(e){function t(){e.call(this),this._dataFormat=egret.HttpResponseType.TEXT}__extends(t,e);__define;return t}(e.BinAnalyzer);e.TextAnalyzer=t,egret.registerClass(t,"RES.TextAnalyzer")}(RES||(RES={})),function(e){var t=function(e){function t(){e.call(this),this._dataFormat=egret.HttpResponseType.TEXT}__extends(t,e);__define;return t.prototype.analyzeData=function(t,r){var e=t.name;if(!this.fileDic[e]&&r)try{var i=r;this.fileDic[e]=JSON.parse(i)}catch(e){egret.$warn(1017,t.url,r)}},t}(e.BinAnalyzer);e.JsonAnalyzer=t,egret.registerClass(t,"RES.JsonAnalyzer")}(RES||(RES={})),function(s){var e=function(e){function t(){e.call(this),this.sheetMap={},this.textureMap={},this.recyclerIamge=[],this._dataFormat=egret.HttpResponseType.TEXT}__extends(t,e);__define;var r=t.prototype;return r.getRes=function(e){var t=this.fileDic[e];if(t||(t=this.textureMap[e]),!t){var r=s.AnalyzerBase.getStringPrefix(e);if(t=this.fileDic[r]){var i=s.AnalyzerBase.getStringTail(e);t=t.getTexture(i)}}return t},r.onLoadFinish=function(e){var t=e.target,r=this.resItemDic[t.$hashCode];delete this.resItemDic[t.hashCode];var i=r.item,s=r.func;if(i.loaded=e.type==egret.Event.COMPLETE,i.loaded)if(t instanceof egret.HttpRequest){i.loaded=!1;var n=this.analyzeConfig(i,t.response);if(n)return this.loadImage(n,r),void this.recycler.push(t)}else{var a=new egret.Texture;a._setBitmapData(t.data),this.analyzeBitmap(i,a)}t instanceof egret.HttpRequest?this.recycler.push(t):this.recyclerIamge.push(t),s.call(r.thisObject,i)},r.analyzeConfig=function(t,r){var e,i=t.name,s="";try{var n=r;e=JSON.parse(n)}catch(e){egret.$warn(1017,t.url,r)}return e&&(this.sheetMap[i]=e,s=this.getRelativePath(t.url,e.file)),s},r.analyzeBitmap=function(e,t){var r=e.name;if(!this.fileDic[r]&&t){var i=this.sheetMap[r];delete this.sheetMap[r];var s=e.data&&e.data.subkeys?"":r,n=this.parseSpriteSheet(t,i,s);this.fileDic[r]=n}},r.getRelativePath=function(e,t){var r=(e=e.split("\\").join("/")).match(/#.*|\?.*/),i="";r&&(i=r[0]);var s=e.lastIndexOf("/");return(e=-1!=s?e.substring(0,s+1)+t:t)+i},r.parseSpriteSheet=function(e,t,r){var i=t.frames;if(!i)return null;var s=new egret.SpriteSheet(e),n=this.textureMap;for(var a in i){var o=i[a];e=s.createTexture(a,o.x,o.y,o.w,o.h,o.offX,o.offY,o.sourceW,o.sourceH);if(o.scale9grid){var u=o.scale9grid.split(",");e.scale9Grid=new egret.Rectangle(parseInt(u[0]),parseInt(u[1]),parseInt(u[2]),parseInt(u[3]))}null==n[a]&&(n[a]=e,r&&this.addSubkey(a,r))}return s},r.destroyRes=function(e){var t=this.fileDic[e];if(t){var r;for(var i in delete this.fileDic[e],t._textureMap)null==r&&(r=t._textureMap[i],this.onResourceDestroy(r),r=null),delete this.textureMap[i];return!0}return!1},r.loadImage=function(e,t){var r=this.getImageLoader();this.resItemDic[r.hashCode]=t,r.load(s.$getVirtualUrl(e))},r.getImageLoader=function(){var e=this.recyclerIamge.pop();return e||((e=new egret.ImageLoader).addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),e},r.onResourceDestroy=function(e){e&&e.dispose()},t}(s.BinAnalyzer);s.SheetAnalyzer=e,egret.registerClass(e,"RES.SheetAnalyzer")}(RES||(RES={})),function(e){var t=function(e){function t(){e.call(this)}__extends(t,e);__define;var r=t.prototype;return r.analyzeConfig=function(e,t){var r,i=e.name,s="";try{var n=t;r=JSON.parse(n)}catch(e){}return r?s=this.getRelativePath(e.url,r.file):(r=t,s=this.getTexturePath(e.url,r)),this.sheetMap[i]=r,s},r.analyzeBitmap=function(e,t){var r=e.name;if(!this.fileDic[r]&&t){var i=this.sheetMap[r];delete this.sheetMap[r];var s=new egret.BitmapFont(t,i);this.fileDic[r]=s}},r.getTexturePath=function(e,t){var r,i="",s=t.split("\n")[2];return-1!=(r=s.indexOf('file="'))&&(r=(s=s.substring(r+6)).indexOf('"'),i=s.substring(0,r)),e=-1!=(r=(e=e.split("\\").join("/")).lastIndexOf("/"))?e.substring(0,r+1)+i:i},r.onResourceDestroy=function(e){e&&e.dispose()},t}(e.SheetAnalyzer);e.FontAnalyzer=t,egret.registerClass(t,"RES.FontAnalyzer")}(RES||(RES={})),function(s){var e=function(e){function t(){e.call(this),this.soundDic={},this.resItemDic=[]}__extends(t,e);__define;var r=t.prototype;return r.loadFile=function(e,t,r){if(this.soundDic[e.name])t.call(r,e);else{var i=new egret.Sound;i.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),i.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this),this.resItemDic[i.$hashCode]={item:e,func:t,thisObject:r},i.load(s.$getVirtualUrl(e.url)),e.data&&(i.type=e.data.soundType)}},r.onLoadFinish=function(e){var t=e.$target;t.removeEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),t.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this);var r=this.resItemDic[t.$hashCode];delete this.resItemDic[t.$hashCode];var i=r.item,s=r.func;i.loaded=e.$type==egret.Event.COMPLETE,i.loaded&&this.analyzeData(i,t),s.call(r.thisObject,i)},r.analyzeData=function(e,t){var r=e.name;!this.soundDic[r]&&t&&(this.soundDic[r]=t)},r.getRes=function(e){return this.soundDic[e]},r.hasRes=function(e){return!!this.getRes(e)},r.destroyRes=function(e){return!!this.soundDic[e]&&(delete this.soundDic[e],!0)},t}(s.AnalyzerBase);s.SoundAnalyzer=e,egret.registerClass(e,"RES.SoundAnalyzer")}(RES||(RES={})),function(e){var t=function(e){function t(){e.call(this),this._dataFormat=egret.HttpResponseType.TEXT}__extends(t,e);__define;return t.prototype.analyzeData=function(e,t){var r=e.name;if(!this.fileDic[r]&&t)try{var i=t,s=egret.XML.parse(i);this.fileDic[r]=s}catch(e){}},t}(e.BinAnalyzer);e.XMLAnalyzer=t,egret.registerClass(t,"RES.XMLAnalyzer")}(RES||(RES={})),RES||(RES={}),function(e){var t,r;t=e.web||(e.web={}),r=function(e){function t(){e.call(this),this._versionInfo={}}__extends(t,e);__define;var r=t.prototype;return r.fetchVersion=function(e){e.onSuccess(null)},r.getChangeList=function(){return[]},r.getVirtualUrl=function(e){return e},t}(egret.EventDispatcher),t.Html5VersionController=r,egret.registerClass(r,"RES.web.Html5VersionController",["RES.VersionController","RES.IVersionController"]),egret.Capabilities.runtimeType==egret.RuntimeType.WEB&&(e.VersionController=r)}(RES||(RES={})),function(e){var t,r;t=e.native||(e.native={}),r=function(){function e(){this._versionInfo={},this._versionPath="",this._localFileArr=[]}__define;var t=e.prototype;return t.fetchVersion=function(r){if(DEBUG)r.onSuccess(null);else{var i=this;if(i._versionPath="all.manifest",i._versionInfo=i.getLocalData(i._versionPath),null!=i._versionInfo){var s=0,e=function(e){if(e)for(var t=0;t<e.length;t++)e[t]&&""!=e[t]&&i._localFileArr.push("resource/"+e[t]);2==++s&&r.onSuccess(null)};i.getList(e,"assets","resource"),i.getList(e,"update","resource")}else egret.callLater(function(){r.onFail(1,null)},i)}},t.getList=function(t,e,r){void 0===r&&(r="");var i=egret.PromiseObject.create();i.onSuccessFunc=function(e){t(e)},i.onErrorFunc=function(){console.error("list files error")},"assets"==e?egret_native.Game.listResource(r,i):egret_native.Game.listUpdate(r,i)},t.getChangeList=function(){var e=[],t=this._localFileArr;for(var r in this._versionInfo)t.indexOf(this.getVirtualUrl(r))<0&&e.push({url:this.getVirtualUrl(r),size:this._versionInfo[r].s});return e},t.getVirtualUrl=function(e){return DEBUG?e:this._versionInfo&&this._versionInfo[e]?"resource/"+this._versionInfo[e].v.substring(0,2)+"/"+this._versionInfo[e].v+"_"+this._versionInfo[e].s+"."+e.substring(e.lastIndexOf(".")+1):e},t.getLocalData=function(e){if(egret_native.readUpdateFileSync&&egret_native.readResourceFileSync){var t=egret_native.readUpdateFileSync(e);if(null!=t)return JSON.parse(t);if(null!=(t=egret_native.readResourceFileSync(e)))return JSON.parse(t)}return null},e}(),t.NativeVersionController=r,egret.registerClass(r,"RES.native.NativeVersionController",["RES.VersionController","RES.IVersionController"]),egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE&&(e.VersionController=r)}(RES||(RES={})),function(l){l.registerAnalyzer=function(e,t){n.registerAnalyzer(e,t)},l.registerVersionController=function(e){n.$registerVersionController(e)},l.getVersionController=function(){return n.vcs},l.loadConfig=function(e,t,r){void 0===t&&(t=""),void 0===r&&(r="json"),n.loadConfig(e,t,r)},l.loadGroup=function(e,t){void 0===t&&(t=0),n.loadGroup(e,t)},l.isGroupLoaded=function(e){return n.isGroupLoaded(e)},l.getGroupByName=function(e){return n.getGroupByName(e)},l.createGroup=function(e,t,r){return void 0===r&&(r=!1),n.createGroup(e,t,r)},l.hasRes=function(e){return n.hasRes(e)},l.parseConfig=function(e,t){void 0===t&&(t=""),n.parseConfig(e,t)},l.getRes=function(e){return n.getRes(e)},l.getResAsync=function(e,t,r){n.getResAsync(e,t,r)},l.getResByUrl=function(e,t,r,i){void 0===i&&(i=""),n.getResByUrl(e,t,r,i)},l.destroyRes=function(e,t){return n.destroyRes(e,t)},l.setMaxLoadingThread=function(e){n.setMaxLoadingThread(e)},l.setMaxRetryTimes=function(e){n.setMaxRetryTimes(e)},l.addEventListener=function(e,t,r,i,s){void 0===i&&(i=!1),void 0===s&&(s=0),n.addEventListener(e,t,r,i,s)},l.removeEventListener=function(e,t,r,i){void 0===i&&(i=!1),n.removeEventListener(e,t,r,i)},l.$getVirtualUrl=function(e){return n.vcs?n.vcs.getVirtualUrl(e):e};var e=function(e){function u(){e.call(this),this.analyzerDic={},this.analyzerClassMap={},this.configItemList=[],this.callLaterFlag=!1,this.configComplete=!1,this.loadedGroups=[],this.groupNameList=[],this.asyncDic={},this._loadedUrlTypes={},this.init()}__extends(u,e);__define;var t=u.prototype;return t.$getAnalyzerByType=function(e){var t=this.analyzerDic[e];if(!t){var r=this.analyzerClassMap[e];if(!r)return DEBUG&&egret.$error(3203,e),null;t=this.analyzerDic[e]=new r}return t},t.registerAnalyzer=function(e,t){this.analyzerClassMap[e]=t},t.$registerVersionController=function(e){this.vcs=e},t.init=function(){this.vcs=new l.VersionController;var e=this.analyzerClassMap;e[l.ResourceItem.TYPE_BIN]=l.BinAnalyzer,e[l.ResourceItem.TYPE_IMAGE]=l.ImageAnalyzer,e[l.ResourceItem.TYPE_TEXT]=l.TextAnalyzer,e[l.ResourceItem.TYPE_JSON]=l.JsonAnalyzer,e[l.ResourceItem.TYPE_SHEET]=l.SheetAnalyzer,e[l.ResourceItem.TYPE_FONT]=l.FontAnalyzer,e[l.ResourceItem.TYPE_SOUND]=l.SoundAnalyzer,e[l.ResourceItem.TYPE_XML]=l.XMLAnalyzer,this.resConfig=new l.ResourceConfig,this.resLoader=new l.ResourceLoader,this.resLoader.callBack=this.onResourceItemComp,(this.resLoader.resInstance=this).resLoader.addEventListener(l.ResourceEvent.GROUP_COMPLETE,this.onGroupComp,this),this.resLoader.addEventListener(l.ResourceEvent.GROUP_LOAD_ERROR,this.onGroupError,this)},t.loadConfig=function(e,t,r){void 0===r&&(r="json");var i={url:e,resourceRoot:t,type:r};this.configItemList.push(i),this.callLaterFlag||(egret.callLater(this.startLoadConfig,this),this.callLaterFlag=!0)},t.startLoadConfig=function(){var r=this;this.callLaterFlag=!1;var e=this.configItemList;this.configItemList=[];for(var t=(this.loadingConfigList=e).length,i=[],s=0;s<t;s++){var n=e[s],a=new l.ResourceItem(n.url,n.url,n.type);i.push(a)}var o={onSuccess:function(e){r.resLoader.loadGroup(i,u.GROUP_CONFIG,Number.MAX_VALUE)},onFail:function(e,t){l.ResourceEvent.dispatchResourceEvent(r,l.ResourceEvent.CONFIG_LOAD_ERROR)}};this.vcs?this.vcs.fetchVersion(o):this.resLoader.loadGroup(i,u.GROUP_CONFIG,Number.MAX_VALUE)},t.isGroupLoaded=function(e){return-1!=this.loadedGroups.indexOf(e)},t.getGroupByName=function(e){return this.resConfig.getGroupByName(e)},t.loadGroup=function(e,t){if(void 0===t&&(t=0),-1==this.loadedGroups.indexOf(e)){if(!this.resLoader.isGroupInLoading(e))if(this.configComplete){var r=this.resConfig.getGroupByName(e);this.resLoader.loadGroup(r,e,t)}else this.groupNameList.push({name:e,priority:t})}else l.ResourceEvent.dispatchResourceEvent(this,l.ResourceEvent.GROUP_COMPLETE,e)},t.createGroup=function(e,t,r){if(void 0===r&&(r=!1),r){var i=this.loadedGroups.indexOf(e);-1!=i&&this.loadedGroups.splice(i,1)}return this.resConfig.createGroup(e,t,r)},t.onGroupComp=function(e){if(e.groupName==u.GROUP_CONFIG){for(var t=this.loadingConfigList.length,r=0;r<t;r++){var i=this.loadingConfigList[r],s=this.$getAnalyzerByType(i.type),n=s.getRes(i.url);s.destroyRes(i.url),this.resConfig.parseConfig(n,i.resourceRoot)}this.configComplete=!0,this.loadingConfigList=null,l.ResourceEvent.dispatchResourceEvent(this,l.ResourceEvent.CONFIG_COMPLETE),this.loadDelayGroups()}else this.loadedGroups.push(e.groupName),this.dispatchEvent(e)},t.loadDelayGroups=function(){var e=this.groupNameList;this.groupNameList=[];for(var t=e.length,r=0;r<t;r++){var i=e[r];this.loadGroup(i.name,i.priority)}},t.onGroupError=function(e){e.groupName==u.GROUP_CONFIG?(this.loadingConfigList=null,l.ResourceEvent.dispatchResourceEvent(this,l.ResourceEvent.CONFIG_LOAD_ERROR)):this.dispatchEvent(e)},t.hasRes=function(e){var t=this.resConfig.getType(e);if(""==t){var r=l.AnalyzerBase.getStringPrefix(e);if(""==(t=this.resConfig.getType(r)))return!1}return!0},t.parseConfig=function(e,t){this.resConfig.parseConfig(e,t),this.configComplete||this.loadingConfigList||(this.configComplete=!0,this.loadDelayGroups())},t.getRes=function(e){var t=this.resConfig.getType(e);if(""==t){var r=l.AnalyzerBase.getStringPrefix(e);if(""==(t=this.resConfig.getType(r)))return null}return this.$getAnalyzerByType(t).getRes(e)},t.getResAsync=function(e,t,r){var i=this.resConfig.getType(e),s=this.resConfig.getName(e);if(""!=i||(s=l.AnalyzerBase.getStringPrefix(e),""!=(i=this.resConfig.getType(s)))){var n=this.$getAnalyzerByType(i).getRes(e);if(n)egret.$callAsync(t,r,n,e);else{var a={key:e,compFunc:t,thisObject:r};if(this.asyncDic[s])this.asyncDic[s].push(a);else{this.asyncDic[s]=[a];var o=this.resConfig.getResourceItem(s);this.resLoader.loadItem(o)}}}else egret.$callAsync(t,r)},t.getResByUrl=function(e,t,r,i){if(void 0===i&&(i=""),e){i||(i=this.getTypeByUrl(e)),null!=this._loadedUrlTypes[e]&&this._loadedUrlTypes[e]!=i&&egret.$warn(3202),this._loadedUrlTypes[e]=i;var s=e,n=this.$getAnalyzerByType(i).getRes(s);if(n)egret.$callAsync(t,r,n,e);else{var a={key:s,compFunc:t,thisObject:r};if(this.asyncDic[s])this.asyncDic[s].push(a);else{this.asyncDic[s]=[a];var o=new l.ResourceItem(s,e,i);this.resLoader.loadItem(o)}}}else egret.$callAsync(t,r)},t.getTypeByUrl=function(e){var t,r=e.substr(e.lastIndexOf(".")+1);switch(r&&(r=r.toLowerCase()),r){case l.ResourceItem.TYPE_XML:case l.ResourceItem.TYPE_JSON:case l.ResourceItem.TYPE_SHEET:t=r;break;case"png":case"jpg":case"gif":case"jpeg":case"bmp":t=l.ResourceItem.TYPE_IMAGE;break;case"fnt":t=l.ResourceItem.TYPE_FONT;break;case"txt":t=l.ResourceItem.TYPE_TEXT;break;case"mp3":case"ogg":case"mpeg":case"wav":case"m4a":case"mp4":case"aiff":case"wma":case"mid":t=l.ResourceItem.TYPE_SOUND;break;default:t=l.ResourceItem.TYPE_BIN}return t},t.onResourceItemComp=function(e){var t=this.asyncDic[e.name];delete this.asyncDic[e.name];for(var r=this.$getAnalyzerByType(e.type),i=t.length,s=0;s<i;s++){var n=t[s],a=r.getRes(n.key);n.compFunc.call(n.thisObject,a,n.key)}},t.destroyRes=function(e,t){void 0===t&&(t=!0);var r=this.resConfig.getRawGroupByName(e);if(r&&0<r.length){var i=this.loadedGroups.indexOf(e);-1!=i&&this.loadedGroups.splice(i,1);for(var s=r.length,n=0;n<s;n++){var a=r[n];if(!t&&this.isResInLoadedGroup(a.name));else a.loaded=!1,this.$getAnalyzerByType(a.type).destroyRes(a.name),this.removeLoadedGroupsByItemName(a.name)}return!0}var o=this.resConfig.getType(e);if(""==o)return null!=(o=this._loadedUrlTypes[e])&&""!=o&&(delete this._loadedUrlTypes[e],this.$getAnalyzerByType(o).destroyRes(e),!0);(a=this.resConfig.getRawResourceItem(e)).loaded=!1;var u=this.$getAnalyzerByType(o).destroyRes(e);return this.removeLoadedGroupsByItemName(a.name),u},t.removeLoadedGroupsByItemName=function(e){for(var t=this.loadedGroups,r=t.length,i=0;i<r;i++)for(var s=this.resConfig.getRawGroupByName(t[i]),n=s.length,a=0;a<n;a++){if(s[a].name==e){t.splice(i,1),i--,r=t.length;break}}},t.isResInLoadedGroup=function(e){for(var t=this.loadedGroups,r=t.length,i=0;i<r;i++)for(var s=this.resConfig.getRawGroupByName(t[i]),n=s.length,a=0;a<n;a++){if(s[a].name==e)return!0}return!1},t.setMaxLoadingThread=function(e){e<1&&(e=1),this.resLoader.thread=e},t.setMaxRetryTimes=function(e){e=Math.max(e,0),this.resLoader.maxRetryTimes=e},u.GROUP_CONFIG="RES__CONFIG",u}(egret.EventDispatcher);egret.registerClass(e,"Resource");var n=new e}(RES||(RES={})),function(i){var e=function(e){function t(){e.call(this),this.sheetMap={},this.recyclerIamge=[],this._dataFormat=egret.HttpResponseType.TEXT}__extends(t,e);__define;var r=t.prototype;return r.onLoadFinish=function(e){var t=e.target,r=this.resItemDic[t.$hashCode];delete this.resItemDic[t.hashCode];var i=r.item,s=r.func;if(i.loaded=e.type==egret.Event.COMPLETE,i.loaded)if(t instanceof egret.HttpRequest){i.loaded=!1;var n=this.analyzeConfig(i,t.response);if(n)return this.loadImage(n,r),void this.recycler.push(t)}else this.analyzeBitmap(i,t.data);t instanceof egret.HttpRequest?this.recycler.push(t):this.recyclerIamge.push(t),s.call(r.thisObject,i)},r.analyzeConfig=function(t,r){var e,i=t.name,s="";try{var n=r;e=JSON.parse(n)}catch(e){egret.$warn(1017,t.url,r)}if(e)if((this.sheetMap[i]=e).file)s=this.getRelativePath(t.url,e.file);else{var a=t.url.split("?"),o=a[0].split("/");o[o.length-1]=o[o.length-1].split(".")[0]+".png",s="";for(var u=0;u<o.length;u++)s+=o[u]+(u<o.length-1?"/":"");2==a.length&&(s+=a[2])}return s},r.analyzeBitmap=function(e,t){var r=e.name;if(!this.fileDic[r]&&t){var i=this.sheetMap[r];delete this.sheetMap[r];var s=e.data&&e.data.subkeys?"":r,n=this.parseAnimation(t,i,s);this.fileDic[r]=n}},r.getRelativePath=function(e,t){var r=(e=e.split("\\").join("/")).lastIndexOf("/");return e=-1!=r?e.substring(0,r+1)+t:t},r.parseAnimation=function(e,t,r){for(var i,s=Object.keys(t.mc),n=t.mc[s[0]].frames,a=n.length,o=0;o<a;o++){i=t.res[n[o].res];var u=new egret.Texture;u._bitmapData=e,u.$initData(i.x,i.y,i.w,i.h,n[o].x,n[o].y,n[o].sourceW,n[o].sourceH,e.width,e.height)}return[]},r.destroyRes=function(e){return!!this.fileDic[e]&&(delete this.fileDic[e],!0)},r.loadImage=function(e,t){var r=this.getImageLoader();this.resItemDic[r.hashCode]=t,r.load(i.$getVirtualUrl(e))},r.getImageLoader=function(){var e=this.recyclerIamge.pop();return e||((e=new egret.ImageLoader).addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),e},t}(i.BinAnalyzer);i.AnimationAnalyzer=e,egret.registerClass(e,"RES.AnimationAnalyzer")}(RES||(RES={})),function(e){e.$locale_strings=e.$locale_strings||{},e.$locale_strings.en_US=e.$locale_strings.en_US||{};var t=e.$locale_strings.en_US;t[3200]="RES.createGroup() passed in non-existed key value in configuration: {0}",t[3201]='RES loaded non-existed or empty resource group:"{0}"',t[3202]="Do not use the different types of ways to load the same material!",t[3203]="Can't find the analyzer of the specified file type:{0} Please register the specified analyzer in the initialization of the project first,then start the resource loading process"}(egret||(egret={})),function(e){e.$locale_strings=e.$locale_strings||{},e.$locale_strings.zh_CN=e.$locale_strings.zh_CN||{};var t=e.$locale_strings.zh_CN;t[3200]="RES.createGroup(): {0}",t[3201]='RES:"{0}"',t[3202]="",t[3203]=":{0} "}(egret||(egret={}));
var eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,EXML,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui,eui;!function(a){var t=function(){function t(){}__define;return t.bindProperty=function(t,e,i,n){var s=a.Watcher.watch(t,e,null,null);if(s){var r=function(t){i[n]=t};s.setHandler(r,null),r(s.getValue())}return s},t.bindHandler=function(t,e,i,n){var s=a.Watcher.watch(t,e,i,n);return s&&i.call(n,s.getValue()),s},t}();a.Binding=t,egret.registerClass(t,"eui.Binding")}(eui||(eui={})),function(o){var h="__listeners__",l=0;function u(t,e){for(var i=t[h],n=i.length,s=0;s<n;s+=2){var r=i[s],a=i[s+1];r.call(a,e)}}var t=function(){function r(t,e,i,n){this.isExecuting=!1,this.property=t,this.handler=e,this.next=n,this.thisObject=i}__define;var t=r.prototype;return r.watch=function(t,e,i,n){if(DEBUG&&(e||egret.$error(1003,"chain")),0<e.length){var s=new r(e.shift(),i,n,r.watch(null,e,i,n));return s.reset(t),s}return null},r.checkBindable=function(t,e){var i=t.__bindables__;if(i&&-1!=i.indexOf(e))return!0;var n=egret.is(t,"egret.IEventDispatcher");n||t[h]||(t[h]=[]);var s=function t(e,i){var n=Object.getOwnPropertyDescriptor(e,i);if(n)return n;var s=Object.getPrototypeOf(e);return s?t(s,i):null}(t,e);if(s&&s.set&&s.get){var r=s.set;s.set=function(t){this[e]!=t&&(r.call(this,t),n?o.PropertyEvent.dispatchPropertyEvent(this,o.PropertyEvent.PROPERTY_CHANGE,e):u(this,e))}}else{if(s&&(s.get||s.set))return!1;var a="_"+ ++l+e;t[a]=s?s.value:null,s={enumerable:!0,configurable:!0,get:function(){return this[a]},set:function(t){this[a]!=t&&(this[a]=t,n?o.PropertyEvent.dispatchPropertyEvent(this,o.PropertyEvent.PROPERTY_CHANGE,e):u(this,e))}}}Object.defineProperty(t,e,s),o.registerBindable(t,e)},t.unwatch=function(){this.reset(null),this.handler=null,this.next&&(this.next.handler=null)},t.getValue=function(){return this.next?this.next.getValue():this.getHostPropertyValue()},t.setHandler=function(t,e){this.handler=t,this.thisObject=e,this.next&&this.next.setHandler(t,e)},t.reset=function(t){var e=this.host;if(e)if(egret.is(e,"egret.IEventDispatcher"))e.removeEventListener(o.PropertyEvent.PROPERTY_CHANGE,this.wrapHandler,this);else{var i,n=(i=e[h]).indexOf(this);i.splice(n-1,2)}(this.host=t)&&(r.checkBindable(t,this.property),egret.is(t,"egret.IEventDispatcher")?t.addEventListener(o.PropertyEvent.PROPERTY_CHANGE,this.wrapHandler,this,!1,100):((i=t[h]).push(this.onPropertyChange),i.push(this)));this.next&&this.next.reset(this.getHostPropertyValue())},t.getHostPropertyValue=function(){return this.host?this.host[this.property]:null},t.wrapHandler=function(t){this.onPropertyChange(t.property)},t.onPropertyChange=function(t){if(t==this.property&&!this.isExecuting)try{this.isExecuting=!0,this.next&&this.next.reset(this.getHostPropertyValue()),this.handler.call(this.thisObject,this.getValue())}finally{this.isExecuting=!1}},r}();o.Watcher=t,egret.registerClass(t,"eui.Watcher")}(eui||(eui={})),(eui||(eui={})).registerProperty=function(t,e,i,n){DEBUG&&(t||egret.$error(1003,"classDefinition"),t.prototype||egret.$error(1012,"classDefinition"),e||egret.$error(1003,"property"),i||egret.$error(1003,"type"));var s=t.prototype;s.__meta__=s.__meta__||{},s.__meta__[e]=i,n&&(s.__defaultProperty__=e)},function(t){var n="__bindables__";t.registerBindable=function(t,e){if(DEBUG&&(t||egret.$error(1003,"instance"),e||egret.$error(1003,"property")),t.hasOwnProperty(n))t[n].push(e);else{var i=[e];t[n]&&(i=t[n].concat(i)),t[n]=i}}}(eui||(eui={})),function(r){var t=function(e){function t(t){e.call(this),this._source=t||[]}__extends(t,e);var i=__define,n=t.prototype;return i(n,"source",function(){return this._source},function(t){t||(t=[]),this._source=t,this.dispatchCoEvent(r.CollectionEventKind.RESET)}),n.refresh=function(){this.dispatchCoEvent(r.CollectionEventKind.REFRESH)},i(n,"length",function(){return this._source.length}),n.addItem=function(t){this._source.push(t),this.dispatchCoEvent(r.CollectionEventKind.ADD,this._source.length-1,-1,[t])},n.addItemAt=function(t,e){(e<0||e>this._source.length)&&DEBUG&&egret.$error(1007),this._source.splice(e,0,t),this.dispatchCoEvent(r.CollectionEventKind.ADD,e,-1,[t])},n.getItemAt=function(t){return this._source[t]},n.getItemIndex=function(t){for(var e=this._source.length,i=0;i<e;i++)if(this._source[i]===t)return i;return-1},n.itemUpdated=function(t){var e=this.getItemIndex(t);-1!=e&&this.dispatchCoEvent(r.CollectionEventKind.UPDATE,e,-1,[t])},n.removeAll=function(){var t=this._source.concat();this._source.length=0,this.dispatchCoEvent(r.CollectionEventKind.REMOVE,0,-1,t)},n.removeItemAt=function(t){if(!(t<0||t>=this._source.length)){var e=this._source.splice(t,1)[0];return this.dispatchCoEvent(r.CollectionEventKind.REMOVE,t,-1,[e]),e}DEBUG&&egret.$error(1007)},n.replaceItemAt=function(t,e){if(!(e<0||e>=this._source.length)){var i=this._source.splice(e,1,t)[0];return this.dispatchCoEvent(r.CollectionEventKind.REPLACE,e,-1,[t],[i]),i}DEBUG&&egret.$error(1007)},n.replaceAll=function(t){t||(t=[]);for(var e=t.length,i=this._source.length,n=e;n<i;n++)this.removeItemAt(e);for(n=0;n<e;n++)i<=n?this.addItemAt(t[n],n):this.replaceItemAt(t[n],n);this._source=t},n.dispatchCoEvent=function(t,e,i,n,s){r.CollectionEvent.dispatchCollectionEvent(this,r.CollectionEvent.COLLECTION_CHANGE,t,e,i,n,s)},t}(egret.EventDispatcher);r.ArrayCollection=t,egret.registerClass(t,"eui.ArrayCollection",["eui.ICollection","egret.IEventDispatcher"]),r.registerProperty(t,"source","Array",!0),DEBUG&&egret.$markReadOnly(t,"length")}(eui||(eui={})),function(t){!function(t){var e=function(t){function e(){t.call(this),this.targetLevel=Number.POSITIVE_INFINITY,this.invalidatePropertiesFlag=!1,this.invalidateClientPropertiesFlag=!1,this.invalidatePropertiesQueue=new n,this.invalidateSizeFlag=!1,this.invalidateClientSizeFlag=!1,this.invalidateSizeQueue=new n,this.invalidateDisplayListFlag=!1,this.invalidateDisplayListQueue=new n,this.eventDisplay=new egret.Bitmap,this.listenersAttached=!1}__extends(e,t);__define;var i=e.prototype;return i.invalidateProperties=function(t){this.invalidatePropertiesFlag||(this.invalidatePropertiesFlag=!0,this.listenersAttached||this.attachListeners()),this.targetLevel<=t.$nestLevel&&(this.invalidateClientPropertiesFlag=!0),this.invalidatePropertiesQueue.insert(t)},i.validateProperties=function(){for(var t=this.invalidatePropertiesQueue,e=t.shift();e;)e.$stage&&e.validateProperties(),e=t.shift();t.isEmpty()&&(this.invalidatePropertiesFlag=!1)},i.invalidateSize=function(t){this.invalidateSizeFlag||(this.invalidateSizeFlag=!0,this.listenersAttached||this.attachListeners()),this.targetLevel<=t.$nestLevel&&(this.invalidateClientSizeFlag=!0),this.invalidateSizeQueue.insert(t)},i.validateSize=function(){for(var t=this.invalidateSizeQueue,e=t.pop();e;)e.$stage&&e.validateSize(),e=t.pop();t.isEmpty()&&(this.invalidateSizeFlag=!1)},i.invalidateDisplayList=function(t){this.invalidateDisplayListFlag||(this.invalidateDisplayListFlag=!0,this.listenersAttached||this.attachListeners()),this.invalidateDisplayListQueue.insert(t)},i.validateDisplayList=function(){for(var t=this.invalidateDisplayListQueue,e=t.shift();e;)e.$stage&&e.validateDisplayList(),e=t.shift();t.isEmpty()&&(this.invalidateDisplayListFlag=!1)},i.attachListeners=function(){this.eventDisplay.addEventListener(egret.Event.ENTER_FRAME,this.doPhasedInstantiationCallBack,this),this.eventDisplay.addEventListener(egret.Event.RENDER,this.doPhasedInstantiationCallBack,this),egret.sys.$invalidateRenderFlag=!0,this.listenersAttached=!0},i.doPhasedInstantiationCallBack=function(t){this.eventDisplay.removeEventListener(egret.Event.ENTER_FRAME,this.doPhasedInstantiationCallBack,this),this.eventDisplay.removeEventListener(egret.Event.RENDER,this.doPhasedInstantiationCallBack,this),this.doPhasedInstantiation()},i.doPhasedInstantiation=function(){this.invalidatePropertiesFlag&&this.validateProperties(),this.invalidateSizeFlag&&this.validateSize(),this.invalidateDisplayListFlag&&this.validateDisplayList(),this.invalidatePropertiesFlag||this.invalidateSizeFlag||this.invalidateDisplayListFlag?this.attachListeners():this.listenersAttached=!1},i.validateClient=function(t){var e,i=!1,n=this.targetLevel;this.targetLevel===Number.POSITIVE_INFINITY&&(this.targetLevel=t.$nestLevel);for(var s=this.invalidatePropertiesQueue,r=this.invalidateSizeQueue,a=this.invalidateDisplayListQueue;!i;){for(i=!0,e=s.removeSmallestChild(t);e;)e.$stage&&e.validateProperties(),e=s.removeSmallestChild(t);for(s.isEmpty()&&(this.invalidatePropertiesFlag=!1),this.invalidateClientPropertiesFlag=!1,e=r.removeLargestChild(t);e;){if(e.$stage&&e.validateSize(),this.invalidateClientPropertiesFlag&&(e=s.removeSmallestChild(t))){s.insert(e),i=!1;break}e=r.removeLargestChild(t)}for(r.isEmpty()&&(this.invalidateSizeFlag=!1),this.invalidateClientPropertiesFlag=!1,this.invalidateClientSizeFlag=!1,e=a.removeSmallestChild(t);e;){if(e.$stage&&e.validateDisplayList(),this.invalidateClientPropertiesFlag&&(e=s.removeSmallestChild(t))){s.insert(e),i=!1;break}if(this.invalidateClientSizeFlag&&(e=r.removeLargestChild(t))){r.insert(e),i=!1;break}e=a.removeSmallestChild(t)}a.isEmpty()&&(this.invalidateDisplayListFlag=!1)}n===Number.POSITIVE_INFINITY&&(this.targetLevel=Number.POSITIVE_INFINITY)},e}(egret.EventDispatcher);t.Validator=e,egret.registerClass(e,"eui.sys.Validator");var n=function(){function t(){this.depthBins={},this.minDepth=0,this.maxDepth=-1}__define;var e=t.prototype;return e.insert=function(t){var e=t.$nestLevel;this.maxDepth<this.minDepth?this.minDepth=this.maxDepth=e:(e<this.minDepth&&(this.minDepth=e),e>this.maxDepth&&(this.maxDepth=e));var i=this.depthBins[e];i||(i=this.depthBins[e]=new s),i.insert(t)},e.pop=function(){var t,e=this.minDepth;if(e<=this.maxDepth){for(var i=this.depthBins[this.maxDepth];!i||0===i.length;){if(this.maxDepth--,this.maxDepth<e)return null;i=this.depthBins[this.maxDepth]}for(t=i.pop();!(i&&0!=i.length||(this.maxDepth--,this.maxDepth<e));)i=this.depthBins[this.maxDepth]}return t},e.shift=function(){var t,e=this.maxDepth;if(this.minDepth<=e){for(var i=this.depthBins[this.minDepth];!i||0===i.length;){if(this.minDepth++,this.minDepth>e)return null;i=this.depthBins[this.minDepth]}for(t=i.pop();!(i&&0!=i.length||(this.minDepth++,this.minDepth>e));)i=this.depthBins[this.minDepth]}return t},e.removeLargestChild=function(t){for(var e=t.$hashCode,i=t.$nestLevel,n=this.maxDepth,s=i;s<=n;){var r=this.depthBins[n];if(r&&0<r.length){if(n===i){if(r.map[e])return r.remove(t),t}else{if(!egret.is(t,"egret.DisplayObjectContainer"))break;for(var a=r.items,o=r.length,h=0;h<o;h++){var l=a[h];if(t.contains(l))return r.remove(l),l}}n--}else if(n==this.maxDepth&&this.maxDepth--,--n<s)break}return null},e.removeSmallestChild=function(t){for(var e=t.$nestLevel,i=e,n=this.maxDepth,s=t.$hashCode;i<=n;){var r=this.depthBins[i];if(r&&0<r.length){if(i===e){if(r.map[s])return r.remove(t),t}else{if(!egret.is(t,"egret.DisplayObjectContainer"))break;for(var a=r.items,o=r.length,h=0;h<o;h++){var l=a[h];if(t.contains(l))return r.remove(l),l}}i++}else if(i==this.minDepth&&this.minDepth++,n<++i)break}return null},e.isEmpty=function(){return this.minDepth>this.maxDepth},t}();egret.registerClass(n,"DepthQueue");var s=function(){function t(){this.map={},this.items=[],this.length=0}__define;var e=t.prototype;return e.insert=function(t){var e=t.$hashCode;this.map[e]||(this.map[e]=!0,this.length++,this.items.push(t))},e.pop=function(){var t=this.items.pop();return t&&(this.length--,0===this.length?this.map={}:this.map[t.$hashCode]=!1),t},e.remove=function(t){var e=this.items.indexOf(t);0<=e&&(this.items.splice(e,1),this.length--,0===this.length?this.map={}:this.map[t.$hashCode]=!1)},t}();egret.registerClass(s,"DepthBin")}(t.sys||(t.sys={}))}(eui||(eui={})),function(h){!function(d){var a="eui.UIComponent";function c(t){return 1===t.a&&0===t.b&&0===t.c&&1===t.d}var s=new d.Validator,r=function(t){function e(){t.call(this),this.initializeUIValues()}__extends(e,t);var i=__define,n=e.prototype;return n.initializeUIValues=function(){this.$UIComponent={0:NaN,1:NaN,2:NaN,3:NaN,4:NaN,5:NaN,6:NaN,7:NaN,8:NaN,9:NaN,10:0,11:0,12:0,13:1e5,14:0,15:1e5,16:0,17:0,18:NaN,19:NaN,20:0,21:0,22:0,23:0,24:!0,25:!0,26:!0,27:!1,28:!1,29:!1},this.$includeInLayout=!0,this.$touchEnabled=!0},n.createChildren=function(){},n.childrenCreated=function(){},n.commitProperties=function(){var t=this.$UIComponent;t[22]==t[10]&&t[23]==t[11]||(this.dispatchEventWith(egret.Event.RESIZE),t[22]=t[10],t[23]=t[11]),t[20]==this.$getX()&&t[21]==this.$getY()||(h.UIEvent.dispatchUIEvent(this,h.UIEvent.MOVE),t[20]=this.$getX(),t[21]=this.$getY())},n.measure=function(){},n.updateDisplayList=function(t,e){},i(n,"includeInLayout",function(){return this.$includeInLayout},function(t){t=!!t,this.$includeInLayout!==t&&(this.$includeInLayout=!0,this.invalidateParentLayout(),this.$includeInLayout=t)}),n.$onAddToStage=function(t,e){this.$super.$onAddToStage.call(this,t,e),this.checkInvalidateFlag();var i=this.$UIComponent;i[29]||(i[29]=!0,this.createChildren(),this.childrenCreated(),h.UIEvent.dispatchUIEvent(this,h.UIEvent.CREATION_COMPLETE))},n.checkInvalidateFlag=function(t){var e=this.$UIComponent;e[24]&&s.invalidateProperties(this),e[25]&&s.invalidateSize(this),e[26]&&s.invalidateDisplayList(this)},i(n,"left",function(){return this.$UIComponent[0]},function(t){t=+t;var e=this.$UIComponent;e[0]!==t&&(e[0]=t,this.invalidateParentLayout())}),i(n,"right",function(){return this.$UIComponent[1]},function(t){t=+t;var e=this.$UIComponent;e[1]!==t&&(e[1]=t,this.invalidateParentLayout())}),i(n,"top",function(){return this.$UIComponent[2]},function(t){t=+t;var e=this.$UIComponent;e[2]!==t&&(e[2]=t,this.invalidateParentLayout())}),i(n,"bottom",function(){return this.$UIComponent[3]},function(t){t=+t;var e=this.$UIComponent;e[3]!=t&&(e[3]=t,this.invalidateParentLayout())}),i(n,"horizontalCenter",function(){return this.$UIComponent[4]},function(t){t=+t;var e=this.$UIComponent;e[4]!==t&&(e[4]=t,this.invalidateParentLayout())}),i(n,"verticalCenter",function(){return this.$UIComponent[5]},function(t){t=+t;var e=this.$UIComponent;e[5]!==t&&(e[5]=t,this.invalidateParentLayout())}),i(n,"percentWidth",function(){return this.$UIComponent[6]},function(t){t=+t;var e=this.$UIComponent;e[6]!==t&&(e[6]=t,this.invalidateParentLayout())}),i(n,"percentHeight",function(){return this.$UIComponent[7]},function(t){t=+t;var e=this.$UIComponent;e[7]!==t&&(e[7]=t,this.invalidateParentLayout())}),i(n,"explicitWidth",function(){return this.$UIComponent[8]}),i(n,"explicitHeight",function(){return this.$UIComponent[9]}),n.$getWidth=function(){return this.validateSizeNow(),this.$UIComponent[10]},n.$setWidth=function(t){t=+t;var e=this.$UIComponent;return!(t<0||e[10]===t&&e[8]===t)&&(e[8]=t,isNaN(t)&&this.invalidateSize(),this.invalidateProperties(),this.invalidateDisplayList(),this.invalidateParentLayout(),!0)},n.validateSizeNow=function(){this.validateSize(!0),this.updateFinalSize()},n.$getHeight=function(){return this.validateSizeNow(),this.$UIComponent[11]},n.$setHeight=function(t){t=+t;var e=this.$UIComponent;return!(t<0||e[11]===t&&e[9]===t)&&(e[9]=t,isNaN(t)&&this.invalidateSize(),this.invalidateProperties(),this.invalidateDisplayList(),this.invalidateParentLayout(),!0)},n.$setScaleX=function(t){var e=this.$super.$setScaleX.call(this,t);return e&&this.invalidateParentLayout(),e},n.$setScaleY=function(t){var e=this.$super.$setScaleY.call(this,t);return e&&this.invalidateParentLayout(),e},i(n,"minWidth",function(){return this.$UIComponent[12]},function(t){t=+t||0;var e=this.$UIComponent;t<0||e[12]===t||(e[12]=t,this.invalidateSize(),this.invalidateParentLayout())}),i(n,"maxWidth",function(){return this.$UIComponent[13]},function(t){t=+t||0;var e=this.$UIComponent;t<0||e[13]===t||(e[13]=t,this.invalidateSize(),this.invalidateParentLayout())}),i(n,"minHeight",function(){return this.$UIComponent[14]},function(t){t=+t||0;var e=this.$UIComponent;t<0||e[14]===t||(e[14]=t,this.invalidateSize(),this.invalidateParentLayout())}),i(n,"maxHeight",function(){return this.$UIComponent[15]},function(t){t=+t||0;var e=this.$UIComponent;t<0||e[15]===t||(e[15]=t,this.invalidateSize(),this.invalidateParentLayout())}),n.setMeasuredSize=function(t,e){var i=this.$UIComponent;i[16]=Math.ceil(+t||0),i[17]=Math.ceil(+e||0)},n.setActualSize=function(t,e){var i=!1,n=this.$UIComponent;n[10]!==t&&(n[10]=t,i=!0),n[11]!==e&&(n[11]=e,i=!0),i&&(this.invalidateDisplayList(),this.dispatchEventWith(egret.Event.RESIZE))},n.$setX=function(t){var e=this.$super.$setX.call(this,t);return e&&(this.invalidateParentLayout(),this.invalidateProperties()),e},n.$setY=function(t){var e=this.$super.$setY.call(this,t);return e&&(this.invalidateParentLayout(),this.invalidateProperties()),e},n.invalidateProperties=function(){var t=this.$UIComponent;t[24]||(t[24]=!0,this.$stage&&s.invalidateProperties(this))},n.validateProperties=function(){var t=this.$UIComponent;t[24]&&(this.commitProperties(),t[24]=!1)},n.invalidateSize=function(){var t=this.$UIComponent;t[25]||(t[25]=!0,this.$stage&&s.invalidateSize(this))},n.validateSize=function(t){if(t){var e=this.$children;if(e)for(var i=e.length,n=0;n<i;n++){var s=e[n];egret.is(s,a)&&s.validateSize(!0)}}var r=this.$UIComponent;r[25]&&(this.measureSizes()&&(this.invalidateDisplayList(),this.invalidateParentLayout()),r[25]=!1)},n.measureSizes=function(){var t=!1,e=this.$UIComponent;if(!e[25])return t;(isNaN(e[8])||isNaN(e[9]))&&(this.measure(),e[16]<e[12]&&(e[16]=e[12]),e[16]>e[13]&&(e[16]=e[13]),e[17]<e[14]&&(e[17]=e[14]),e[17]>e[15]&&(e[17]=e[15]));var i=this.getPreferredUWidth(),n=this.getPreferredUHeight();return i===e[18]&&n===e[19]||(e[18]=i,e[19]=n,t=!0),t},n.invalidateDisplayList=function(){var t=this.$UIComponent;t[26]||(t[26]=!0,this.$stage&&s.invalidateDisplayList(this))},n.validateDisplayList=function(){var t=this.$UIComponent;t[26]&&(this.updateFinalSize(),this.updateDisplayList(t[10],t[11]),t[26]=!1)},n.updateFinalSize=function(){var t=0,e=0,i=this.$UIComponent;t=i[27]?i[10]:isNaN(i[8])?i[16]:i[8],e=i[28]?i[11]:isNaN(i[9])?i[17]:i[9],this.setActualSize(t,e)},n.validateNow=function(){this.$stage&&s.validateClient(this)},n.invalidateParentLayout=function(){var t=this.$parent;t&&this.$includeInLayout&&egret.is(t,a)&&(t.invalidateSize(),t.invalidateDisplayList())},n.setLayoutBoundsSize=function(t,e){if(t=+t,!((e=+e)<0||t<0)){var i,n,s=this.$UIComponent,r=s[13],a=s[15],o=Math.min(s[12],r),h=Math.min(s[14],a);isNaN(t)?(s[27]=!1,i=this.getPreferredUWidth()):(s[27]=!0,i=Math.max(o,Math.min(r,t))),isNaN(e)?(s[28]=!1,n=this.getPreferredUHeight()):(s[28]=!0,n=Math.max(h,Math.min(a,e)));var l=this.$getMatrix();if(c(l))this.setActualSize(i,n);else{var u=d.MatrixUtil.fitBounds(t,e,l,s[8],s[9],this.getPreferredUWidth(),this.getPreferredUHeight(),o,h,r,a);u||(u=egret.Point.create(o,h)),this.setActualSize(u.x,u.y),egret.Point.release(u)}}},n.setLayoutBoundsPosition=function(t,e){if(!c(this.$getMatrix())){var i=egret.$TempRectangle;this.getLayoutBounds(i),t+=this.$getX()-i.x,e+=this.$getY()-i.y}var n=this.$super.$setX.call(this,t);(this.$super.$setY.call(this,e)||n)&&h.UIEvent.dispatchUIEvent(this,h.UIEvent.MOVE)},n.getLayoutBounds=function(t){var e,i,n=this.$UIComponent;e=n[27]?n[10]:isNaN(n[8])?n[16]:n[8],i=n[28]?n[11]:isNaN(n[9])?n[17]:n[9],this.applyMatrix(t,e,i)},n.getPreferredUWidth=function(){var t=this.$UIComponent;return isNaN(t[8])?t[16]:t[8]},n.getPreferredUHeight=function(){var t=this.$UIComponent;return isNaN(t[9])?t[17]:t[9]},n.getPreferredBounds=function(t){var e=this.getPreferredUWidth(),i=this.getPreferredUHeight();this.applyMatrix(t,e,i)},n.applyMatrix=function(t,e,i){t=t.setTo(0,0,e,i);var n=this.$getMatrix();c(n)?(t.x+=n.tx,t.y+=n.ty):n.$transformBounds(t)},e}(egret.DisplayObject);function u(t,e){if("function"!=typeof t[e])return!1;var i=t[e].toString(),n=i.indexOf("{"),s=i.lastIndexOf("}");return""==(i=i.substring(n+1,s)).trim()}function o(t,e){for(var i in e)"prototype"!=i&&e.hasOwnProperty(i)&&(t[i]=e[i]);for(var n=t.prototype,s=e.prototype,r=Object.keys(s),a=r.length,o=0;o<a;o++){var h=r[o];if("__meta__"!=h&&(!n.hasOwnProperty(h)||u(n,h))){var l=Object.getOwnPropertyDescriptor(s,h);Object.defineProperty(n,h,l)}}}d.UIComponentImpl=r,egret.registerClass(r,"eui.sys.UIComponentImpl",["eui.UIComponent"]),d.mixin=o,d.implementUIComponent=function(t,e,i){o(t,r);var n=t.prototype;n.$super=e.prototype,i&&(n.$childAdded=function(t,e){this.invalidateSize(),this.invalidateDisplayList()},n.$childRemoved=function(t,e){this.invalidateSize(),this.invalidateDisplayList()}),DEBUG&&(egret.$markReadOnly(t,"explicitWidth"),egret.$markReadOnly(t,"explicitHeight"),Object.defineProperty(n,"preferredWidth",{get:function(){var t=egret.$TempRectangle;return this.getPreferredBounds(t),t.width},enumerable:!0,configurable:!0}),Object.defineProperty(n,"preferredHeight",{get:function(){var t=egret.$TempRectangle;return this.getPreferredBounds(t),t.height},enumerable:!0,configurable:!0}),Object.defineProperty(n,"preferredX",{get:function(){var t=egret.$TempRectangle;return this.getPreferredBounds(t),t.x},enumerable:!0,configurable:!0}),Object.defineProperty(n,"preferredY",{get:function(){var t=egret.$TempRectangle;return this.getPreferredBounds(t),t.y},enumerable:!0,configurable:!0}),Object.defineProperty(n,"layoutBoundsX",{get:function(){var t=egret.$TempRectangle;return this.getLayoutBounds(t),t.x},enumerable:!0,configurable:!0}),Object.defineProperty(n,"layoutBoundsY",{get:function(){var t=egret.$TempRectangle;return this.getLayoutBounds(t),t.y},enumerable:!0,configurable:!0}),Object.defineProperty(n,"layoutBoundsWidth",{get:function(){var t=egret.$TempRectangle;return this.getLayoutBounds(t),t.width},enumerable:!0,configurable:!0}),Object.defineProperty(n,"layoutBoundsHeight",{get:function(){var t=egret.$TempRectangle;return this.getLayoutBounds(t),t.height},enumerable:!0,configurable:!0}),Object.defineProperty(n,"measuredWidth",{get:function(){return this.$UIComponent[16]},enumerable:!0,configurable:!0}),Object.defineProperty(n,"measuredHeight",{get:function(){return this.$UIComponent[17]},enumerable:!0,configurable:!0}),Object.defineProperty(n,"layoutWidthExplicitlySet",{get:function(){return this.$UIComponent[27]},enumerable:!0,configurable:!0}),Object.defineProperty(n,"layoutHeightExplicitlySet",{get:function(){return this.$UIComponent[28]},enumerable:!0,configurable:!0}),Object.defineProperty(n,"invalidatePropertiesFlag",{get:function(){return this.$UIComponent[24]},enumerable:!0,configurable:!0}),Object.defineProperty(n,"invalidateSizeFlag",{get:function(){return this.$UIComponent[25]},enumerable:!0,configurable:!0}),Object.defineProperty(n,"invalidateDisplayListFlag",{get:function(){return this.$UIComponent[26]},enumerable:!0,configurable:!0}))}}(h.sys||(h.sys={}))}(eui||(eui={})),function(i){var s=i.sys.UIComponentImpl,t=function(n){function t(t){n.call(this),this.$createChildrenCalled=!1,this.$fontChanged=!1,this._widthConstraint=NaN,this.initializeUIValues(),this.text=t}__extends(t,n);__define;var e=t.prototype;return e.$invalidateContentBounds=function(){n.prototype.$invalidateContentBounds.call(this),this.invalidateSize()},e.$setWidth=function(t){var e=n.prototype.$setWidth.call(this,t),i=s.prototype.$setWidth.call(this,t);return e&&i},e.$setHeight=function(t){var e=n.prototype.$setHeight.call(this,t),i=s.prototype.$setHeight.call(this,t);return e&&i},e.$setText=function(t){var e=n.prototype.$setText.call(this,t);return i.PropertyEvent.dispatchPropertyEvent(this,i.PropertyEvent.PROPERTY_CHANGE,"text"),e},e.$setFont=function(t){this.$BitmapText;return this.$font!=t&&(this.$font=t,this.$createChildrenCalled?this.$parseFont():this.$fontChanged=!0,this.$BitmapText[6]=!0)},e.$parseFont=function(){if(this.$fontChanged=!1,this.$font&&"string"==typeof this.$font){var t=this.$stage.getImplementation("eui.IAssetAdapter");t||(t=new i.DefaultAssetAdapter),t.getAsset(this.$font,this.$onFontChanged,this)}else this.$setFontData(this.$font)},e.$onFontChanged=function(t,e){e===this.$font&&this.$setFontData(t)},e.$setFontData=function(t){return t!=this.$BitmapText[5]&&(this.$BitmapText[5]=t,this.$invalidateContentBounds(),!0)},e.createChildren=function(){this.$fontChanged&&this.$parseFont(),this.$createChildrenCalled=!0},e.childrenCreated=function(){},e.commitProperties=function(){},e.measure=function(){var t=this.$UIComponent,e=this.$BitmapText[0],i=NaN;isNaN(this._widthConstraint)?isNaN(t[8])?1e5!=t[13]&&(i=t[13]):i=t[8]:(i=this._widthConstraint,this._widthConstraint=NaN),n.prototype.$setWidth.call(this,i),this.setMeasuredSize(this.textWidth,this.textHeight),n.prototype.$setWidth.call(this,e)},e.updateDisplayList=function(t,e){n.prototype.$setWidth.call(this,t),n.prototype.$setHeight.call(this,e)},e.invalidateParentLayout=function(){},e.setMeasuredSize=function(t,e){},e.invalidateProperties=function(){},e.validateProperties=function(){},e.invalidateSize=function(){},e.validateSize=function(t){},e.invalidateDisplayList=function(){},e.validateDisplayList=function(){},e.validateNow=function(){},e.setLayoutBoundsSize=function(t,e){if(s.prototype.setLayoutBoundsSize.call(this,t,e),!isNaN(t)&&t!==this._widthConstraint&&0!=t){var i=this.$UIComponent;isNaN(i[9])&&t!=i[16]&&(this._widthConstraint=t,this.invalidateSize())}},e.setLayoutBoundsPosition=function(t,e){},e.getLayoutBounds=function(t){},e.getPreferredBounds=function(t){},t}(egret.BitmapText);i.BitmapLabel=t,egret.registerClass(t,"eui.BitmapLabel",["eui.UIComponent","eui.IDisplayText"]),i.sys.implementUIComponent(t,egret.BitmapText),i.registerBindable(t.prototype,"text")}(eui||(eui={})),function(u){var t=function(i){function t(){i.call(this),this.initializeUIValues(),this.$Component={0:null,1:null,2:"",3:!0,4:!1,5:!1,6:!0,7:!0,8:null},this.$touchEnabled=!0}__extends(t,i);var e=__define,n=t.prototype;return e(n,"hostComponentKey",function(){return this.$Component[0]},function(t){this.$Component[0]=t}),e(n,"skinName",function(){return this.$Component[1]},function(t){var e=this.$Component;if(e[5]=!0,e[1]!=t){if(t)e[1]=t;else if(this.$stage){var i=this.$stage.getImplementation("eui.Theme");if(i){var n=i.getSkinName(this);n&&(e[1]=n)}}this.$parseSkinName()}}),n.$parseSkinName=function(){var t,e=this.skinName;if(e)if(e.prototype)t=new e;else if("string"==typeof e){var i,n=e.trim();if("<"==n.charAt(0))i=EXML.parse(n);else if(!(i=egret.getDefinitionByName(e))&&-1!=n.toLowerCase().indexOf(".exml"))return void EXML.load(e,this.onExmlLoaded,this,!0);i&&(t=new i)}else t=e;this.setSkin(t)},n.onExmlLoaded=function(t,e){if(this.skinName==e){var i=new t;this.setSkin(i)}},e(n,"skin",function(){return this.$Component[8]}),n.setSkin=function(t){!t||t instanceof u.Skin||(t=null,DEBUG&&egret.$error(2202));var e=this.$Component,i=e[8];if(i){for(var n=(o=i.skinParts).length,s=0;s<n;s++){this[h=o[s]]&&this.setSkinPart(h,null)}var r=i.$elementsContent;if(r){n=r.length;for(s=0;s<n;s++){var a=r[s];a.$parent==this&&this.removeChild(a)}}i.hostComponent=null}if(e[8]=t){var o;for(n=(o=t.skinParts).length,s=0;s<n;s++){var h,l=t[h=o[s]];l&&this.setSkinPart(h,l)}if(r=t.$elementsContent)for(s=r.length-1;0<=s;s--)this.addChildAt(r[s],0);t.hostComponent=this}this.invalidateSize(),this.invalidateDisplayList(),this.dispatchEventWith(egret.Event.COMPLETE)},n.setSkinPart=function(t,e){var i=this[t];i&&this.partRemoved(t,i),(this[t]=e)&&this.partAdded(t,e)},n.partAdded=function(t,e){},n.partRemoved=function(t,e){},n.$setTouchChildren=function(t){t=!!t;var e=this.$Component;return e[6]=t,!e[3]||(e[6]=t,i.prototype.$setTouchChildren.call(this,t))},n.$setTouchEnabled=function(t){t=!!t;var e=this.$Component;return e[7]=t,!e[3]||i.prototype.$setTouchEnabled.call(this,t)},e(n,"enabled",function(){return this.$Component[3]},function(t){t=!!t,this.$setEnabled(t)}),n.$setEnabled=function(t){var e=this.$Component;return t!==e[3]&&((e[3]=t)?(this.$touchEnabled=e[7],this.$touchChildren=e[6]):(this.$touchEnabled=!1,this.$touchChildren=!1),this.invalidateState(),!0)},e(n,"currentState",function(){var t=this.$Component;return t[2]?t[2]:this.getCurrentState()},function(t){var e=this.$Component;t!=e[2]&&(e[2]=t,this.invalidateState())}),n.invalidateState=function(){var t=this.$Component;t[4]||(t[4]=!0,this.invalidateProperties())},n.getCurrentState=function(){return""},n.createChildren=function(){var t=this.$Component;if(!t[1]){var e=this.$stage.getImplementation("eui.Theme");if(e){var i=e.getSkinName(this);i&&(t[1]=i,this.$parseSkinName())}}},n.childrenCreated=function(){},n.commitProperties=function(){u.sys.UIComponentImpl.prototype.commitProperties.call(this);var t=this.$Component;t[4]&&(t[4]=!1,t[8]&&(t[8].currentState=this.currentState))},n.measure=function(){u.sys.measure(this);var t=this.$Component[8];if(t){var e=this.$UIComponent;isNaN(t.width)?(e[16]<t.minWidth&&(e[16]=t.minWidth),e[16]>t.maxWidth&&(e[16]=t.maxWidth)):e[16]=t.width,isNaN(t.height)?(e[17]<t.minHeight&&(e[17]=t.minHeight),e[17]>t.maxHeight&&(e[17]=t.maxHeight)):e[17]=t.height}},n.updateDisplayList=function(t,e){u.sys.updateDisplayList(this,t,e)},n.invalidateParentLayout=function(){},n.setMeasuredSize=function(t,e){},n.invalidateProperties=function(){},n.validateProperties=function(){},n.invalidateSize=function(){},n.validateSize=function(t){},n.invalidateDisplayList=function(){},n.validateDisplayList=function(){},n.validateNow=function(){},n.setLayoutBoundsSize=function(t,e){},n.setLayoutBoundsPosition=function(t,e){},n.getLayoutBounds=function(t){},n.getPreferredBounds=function(t){},t}(egret.DisplayObjectContainer);u.Component=t,egret.registerClass(t,"eui.Component",["eui.UIComponent"]),u.registerProperty(t,"skinName","Class"),u.sys.implementUIComponent(t,egret.DisplayObjectContainer,!0),DEBUG&&egret.$markReadOnly(t,"skin")}(eui||(eui={})),function(t){var e=function(t){function e(){t.call(this),this.labelDisplay=null,this._label="",this.iconDisplay=null,this._icon=null,this.touchCaptured=!1,this.touchChildren=!1,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this)}__extends(e,t);var i=__define,n=e.prototype;return i(n,"label",function(){return this._label},function(t){this._label=t,this.labelDisplay&&(this.labelDisplay.text=t)}),i(n,"icon",function(){return this._icon},function(t){this._icon=t,this.iconDisplay&&(this.iconDisplay.source=t)}),n.onTouchCancle=function(t){var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!1,this.invalidateState()},n.onTouchBegin=function(t){this.$stage.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!0,this.invalidateState(),t.updateAfterEvent()},n.onStageTouchEnd=function(t){var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.contains(t.target)&&this.buttonReleased(),this.touchCaptured=!1,this.invalidateState()},n.getCurrentState=function(){return this.enabled?this.touchCaptured?"down":"up":"disabled"},n.partAdded=function(t,e){e===this.labelDisplay?this.labelDisplay.text=this._label:e==this.iconDisplay&&(this.iconDisplay.source=this._icon)},n.buttonReleased=function(){},e}(t.Component);t.Button=e,egret.registerClass(e,"eui.Button")}(eui||(eui={})),function(s){var t=function(n){function t(){n.apply(this,arguments),this.$selected=!1,this.$autoSelected=!0}__extends(t,n);var e=__define,i=t.prototype;return e(i,"selected",function(){return this.$selected},function(t){this.$setSelected(t)}),i.$setSelected=function(t){return(t=!!t)!==this.$selected&&(this.$selected=t,this.invalidateState(),s.PropertyEvent.dispatchPropertyEvent(this,s.PropertyEvent.PROPERTY_CHANGE,"selected"),!0)},i.getCurrentState=function(){var t=n.prototype.getCurrentState.call(this);if(this.$selected){var e=t+"AndSelected",i=this.skin;return i&&i.hasState(e)?e:"disabled"==t?"disabled":"down"}return t},i.buttonReleased=function(){this.$autoSelected&&(this.selected=!this.$selected,this.dispatchEventWith(egret.Event.CHANGE))},t}(s.Button);s.ToggleButton=t,egret.registerClass(t,"eui.ToggleButton"),s.registerBindable(t.prototype,"selected")}(eui||(eui={})),function(t){var e=function(t){function e(){t.call(this)}__extends(e,t);__define;return e}(t.ToggleButton);t.CheckBox=e,egret.registerClass(e,"eui.CheckBox")}(eui||(eui={})),function(o){var t=function(i){function t(t,e){void 0===e&&(e=[]),i.call(this),this.name=t,this.overrides=e}__extends(t,i);__define;return t.prototype.initialize=function(t,e){for(var i=this.overrides,n=i.length,s=0;s<n;s++){var r=i[s];if(r instanceof o.AddItems){var a=t[r.target];a&&a instanceof o.Image&&!a.$parent&&(e.addChild(a),e.removeChild(a))}}},t}(egret.HashObject);o.State=t,egret.registerClass(t,"eui.State")}(eui||(eui={})),function(t){!function(t){var e=function(){function t(){}var e=__define,i=t.prototype;return e(i,"states",function(){return this.$stateValues.states},function(t){t||(t=[]);for(var e=this.$stateValues,i={},n=(e.states=t).length,s=0;s<n;s++){var r=t[s];i[r.name]=r}e.statesMap=i,e.parent&&this.commitCurrentState()}),e(i,"currentState",function(){return this.$stateValues.currentState},function(t){var e=this.$stateValues;e.explicitState=t,e.currentState=t,this.commitCurrentState()}),i.commitCurrentState=function(){var t=this.$stateValues;if(t.parent){if(!t.statesMap[t.currentState]){if(!(0<t.states.length))return;t.currentState=t.states[0].name}if(t.oldState!=t.currentState){var e=t.parent,i=t.statesMap[t.oldState];if(i)for(var n=i.overrides,s=n.length,r=0;r<s;r++)n[r].remove(this,e);if(t.oldState=t.currentState,i=t.statesMap[t.currentState])for(s=(n=i.overrides).length,r=0;r<s;r++)n[r].apply(this,e)}}},i.hasState=function(t){return!!this.$stateValues.statesMap[t]},i.initializeStates=function(t){this.$stateValues.intialized=!0;for(var e=this.states,i=e.length,n=0;n<i;n++)e[n].initialize(this,t)},t}();t.StateClient=e,egret.registerClass(e,"eui.sys.StateClient");var i=function(){function t(){this.intialized=!1,this.statesMap={},this.states=[],this.oldState=null,this.explicitState=null,this.currentState=null,this.parent=null,this.stateIsDirty=!1}__define;return t}();t.StateValues=i,egret.registerClass(i,"eui.sys.StateValues")}(t.sys||(t.sys={}))}(eui||(eui={})),function(r){var t=function(o){function t(){o.call(this),this.$layout=null,this.$stateValues=new r.sys.StateValues,this.initializeUIValues(),this.$Group={0:0,1:0,2:0,3:0,4:!1,5:!1},this.$stateValues.parent=this}__extends(t,o);var e=__define,i=t.prototype;return e(i,"elementsContent",void 0,function(t){if(t)for(var e=t.length,i=0;i<e;i++)this.addChild(t[i])}),e(i,"layout",function(){return this.$layout},function(t){this.$setLayout(t)}),i.$setLayout=function(t){return this.$layout!=t&&(this.$layout&&(this.$layout.target=null),(this.$layout=t)&&(t.target=this),this.invalidateSize(),this.invalidateDisplayList(),!0)},e(i,"contentWidth",function(){return this.$Group[0]}),e(i,"contentHeight",function(){return this.$Group[1]}),i.setContentSize=function(t,e){t=Math.ceil(+t||0),e=Math.ceil(+e||0);var i=this.$Group,n=i[0]!==t,s=i[1]!==e;(n||s)&&(i[0]=t,i[1]=e,n&&r.PropertyEvent.dispatchPropertyEvent(this,r.PropertyEvent.PROPERTY_CHANGE,"contentWidth"),s&&r.PropertyEvent.dispatchPropertyEvent(this,r.PropertyEvent.PROPERTY_CHANGE,"contentHeight"))},e(i,"scrollEnabled",function(){return this.$Group[4]},function(t){t=!!t;var e=this.$Group;t!==e[4]&&(e[4]=t,this.updateScrollRect())}),e(i,"scrollH",function(){return this.$Group[2]},function(t){t=+t||0;var e=this.$Group;t!==e[2]&&(e[2]=t,this.updateScrollRect()&&this.$layout&&this.$layout.scrollPositionChanged(),r.PropertyEvent.dispatchPropertyEvent(this,r.PropertyEvent.PROPERTY_CHANGE,"scrollH"))}),e(i,"scrollV",function(){return this.$Group[3]},function(t){t=+t||0;var e=this.$Group;t!=e[3]&&(e[3]=t,this.updateScrollRect()&&this.$layout&&this.$layout.scrollPositionChanged(),r.PropertyEvent.dispatchPropertyEvent(this,r.PropertyEvent.PROPERTY_CHANGE,"scrollV"))}),i.updateScrollRect=function(){var t=this.$Group,e=t[4];if(e){var i=this.$UIComponent;this.scrollRect=egret.$TempRectangle.setTo(t[2],t[3],i[10],i[11])}else this.$scrollRect&&(this.scrollRect=null);return e},e(i,"numElements",function(){return this.$children.length}),i.getElementAt=function(t){return this.$children[t]},i.getVirtualElementAt=function(t){return this.getElementAt(t)},i.setVirtualElementIndicesInView=function(t,e){},e(i,"touchThrough",function(){return this.$Group[5]},function(t){this.$Group[5]=!!t}),i.$hitTest=function(t,e){var i=o.prototype.$hitTest.call(this,t,e);if(i||this.$Group[5])return i;if(!this.$visible||!this.touchEnabled)return null;var n=this.globalToLocal(t,e,egret.$TempPoint),s=this.$UIComponent,r=egret.$TempRectangle.setTo(0,0,s[10],s[11]),a=this.$scrollRect;return a&&(r.x=a.x,r.y=a.y),r.contains(n.x,n.y)?this:null},i.invalidateState=function(){var t=this.$stateValues;t.stateIsDirty||(t.stateIsDirty=!0,this.invalidateProperties())},i.getCurrentState=function(){return""},i.createChildren=function(){this.$layout||this.$setLayout(new r.BasicLayout),this.initializeStates(this.$stage)},i.childrenCreated=function(){},i.commitProperties=function(){r.sys.UIComponentImpl.prototype.commitProperties.call(this);var t=this.$stateValues;t.stateIsDirty&&(t.stateIsDirty=!1,t.explicitState||(t.currentState=this.getCurrentState(),this.commitCurrentState()))},i.measure=function(){this.$layout?this.$layout.measure():this.setMeasuredSize(0,0)},i.updateDisplayList=function(t,e){this.$layout&&this.$layout.updateDisplayList(t,e),this.updateScrollRect()},i.invalidateParentLayout=function(){},i.setMeasuredSize=function(t,e){},i.invalidateProperties=function(){},i.validateProperties=function(){},i.invalidateSize=function(){},i.validateSize=function(t){},i.invalidateDisplayList=function(){},i.validateDisplayList=function(){},i.validateNow=function(){},i.setLayoutBoundsSize=function(t,e){},i.setLayoutBoundsPosition=function(t,e){},i.getLayoutBounds=function(t){},i.getPreferredBounds=function(t){},t}(egret.DisplayObjectContainer);r.Group=t,egret.registerClass(t,"eui.Group",["eui.IViewport","eui.UIComponent"]),r.sys.implementUIComponent(t,egret.DisplayObjectContainer,!0),r.sys.mixin(t,r.sys.StateClient),r.registerProperty(t,"elementsContent","Array",!0),r.registerProperty(t,"states","State[]"),DEBUG&&(egret.$markReadOnly(t,"contentWidth"),egret.$markReadOnly(t,"contentHeight"),egret.$markReadOnly(t,"numElements"))}(eui||(eui={})),function(u){var t=function(l){function t(){l.call(this),this.$dataProviderChanged=!1,this.$dataProvider=null,this.$indexToRenderer=[],this.$DataGroup={0:!0,1:!1,2:{},3:{},4:!1,5:!1,6:null,7:null,8:!1,9:null,10:!1,11:!1,12:null,13:null,14:!1}}__extends(t,l);var e=__define,i=t.prototype;return e(i,"useVirtualLayout",function(){return this.$layout?this.$layout.$useVirtualLayout:this.$DataGroup[0]},function(t){t=!!t;var e=this.$DataGroup;t!==e[0]&&(e[0]=t,this.$layout&&(this.$layout.useVirtualLayout=t))}),i.$setLayout=function(t){if(t==this.$layout)return!1;this.$layout&&(this.$layout.setTypicalSize(0,0),this.$layout.removeEventListener("useVirtualLayoutChanged",this.onUseVirtualLayoutChanged,this)),this.$layout&&t&&this.$layout.$useVirtualLayout!=t.$useVirtualLayout&&this.onUseVirtualLayoutChanged();var e=l.prototype.$setLayout.call(this,t);if(t){var i=this.$DataGroup[9];i&&t.setTypicalSize(i.width,i.height),t.useVirtualLayout=this.$DataGroup[0],t.addEventListener("useVirtualLayoutChanged",this.onUseVirtualLayoutChanged,this)}return e},i.onUseVirtualLayoutChanged=function(t){var e=this.$DataGroup;e[1]=!0,e[10]=!0,this.removeDataProviderListener(),this.invalidateProperties()},i.setVirtualElementIndicesInView=function(t,e){if(this.$layout&&this.$layout.$useVirtualLayout)for(var i=this.$indexToRenderer,n=Object.keys(i),s=n.length,r=0;r<s;r++){var a=+n[r];(a<t||e<a)&&this.freeRendererByIndex(a)}},i.getElementAt=function(t){return this.$indexToRenderer[t]},i.getVirtualElementAt=function(t){if((t=0|+t)<0||t>=this.$dataProvider.length)return null;var e=this.$indexToRenderer[t];if(!e){var i=this.$dataProvider.getItemAt(t);e=this.createVirtualRenderer(i),this.$indexToRenderer[t]=e,this.updateRenderer(e,t,i);var n=this.$DataGroup;n[4]&&(e.validateNow(),n[4]=!1,this.rendererAdded(e,t,i))}return e},i.freeRendererByIndex=function(t){var e=this.$indexToRenderer[t];e&&(delete this.$indexToRenderer[t],this.doFreeRenderer(e))},i.doFreeRenderer=function(t){var e=this.$DataGroup,i=e[2][t.$hashCode].$hashCode;e[3][i]||(e[3][i]=[]),e[3][i].push(t),t.visible=!1},i.invalidateSize=function(){this.$DataGroup[4]||l.prototype.invalidateSize.call(this)},i.createVirtualRenderer=function(t){var e,i=this.itemToRendererClass(t),n=i.$hashCode,s=this.$DataGroup,r=s[3];return r[n]&&0<r[n].length?((e=r[n].pop()).visible=!0,e):(s[4]=!0,this.createOneRenderer(i))},i.createOneRenderer=function(t){var e=new t,i=this.$DataGroup;return i[2][e.$hashCode]=t,egret.is(e,"eui.IItemRenderer")?(i[13]&&this.setItemRenderSkinName(e,i[13]),this.addChild(e),e):null},i.setItemRenderSkinName=function(t,e){if(t&&t instanceof u.Component){var i=t;i.$Component[5]||(i.skinName=e,i.$Component[5]=!1)}},e(i,"dataProvider",function(){return this.$dataProvider},function(t){this.$setDataProvider(t)}),i.$setDataProvider=function(t){return this.$dataProvider!=t&&(this.removeDataProviderListener(),this.$dataProvider=t,this.$dataProviderChanged=!0,this.$DataGroup[10]=!0,this.invalidateProperties(),this.invalidateSize(),this.invalidateDisplayList(),!0)},i.removeDataProviderListener=function(){this.$dataProvider&&this.$dataProvider.removeEventListener(u.CollectionEvent.COLLECTION_CHANGE,this.onCollectionChange,this)},i.onCollectionChange=function(t){switch(t.kind){case u.CollectionEventKind.ADD:this.itemAddedHandler(t.items,t.location);break;case u.CollectionEventKind.REMOVE:this.itemRemovedHandler(t.items,t.location);break;case u.CollectionEventKind.UPDATE:case u.CollectionEventKind.REPLACE:this.itemUpdatedHandler(t.items[0],t.location);break;case u.CollectionEventKind.RESET:case u.CollectionEventKind.REFRESH:if(this.$layout&&this.$layout.$useVirtualLayout)for(var e=this.$indexToRenderer,i=Object.keys(e),n=i.length,s=0;s<n;s++){var r=+i[s];this.freeRendererByIndex(r)}this.$dataProviderChanged=!0,this.invalidateProperties()}this.invalidateSize(),this.invalidateDisplayList()},i.itemAddedHandler=function(t,e){for(var i=t.length,n=0;n<i;n++)this.itemAdded(t[n],e+n);this.resetRenderersIndices()},i.itemRemovedHandler=function(t,e){for(var i=t.length-1;0<=i;i--)this.itemRemoved(t[i],e+i);this.resetRenderersIndices()},i.itemAdded=function(t,e){if(this.$layout&&this.$layout.elementAdded(e),this.$layout&&this.$layout.$useVirtualLayout)this.$indexToRenderer.splice(e,0,null);else{var i=this.createVirtualRenderer(t);if(this.$indexToRenderer.splice(e,0,i),i){this.updateRenderer(i,e,t);var n=this.$DataGroup;n[4]&&(n[4]=!1,this.rendererAdded(i,e,t))}}},i.itemRemoved=function(t,e){this.$layout&&this.$layout.elementRemoved(e);var i=this.$indexToRenderer[e];this.$indexToRenderer.length>e&&this.$indexToRenderer.splice(e,1),i&&(this.$layout&&this.$layout.$useVirtualLayout?this.doFreeRenderer(i):(this.rendererRemoved(i,e,t),this.removeChild(i)))},i.resetRenderersIndices=function(){var t=this.$indexToRenderer;if(0!=t.length)if(this.$layout&&this.$layout.$useVirtualLayout)for(var e=Object.keys(t),i=e.length,n=0;n<i;n++){var s=+e[n];this.resetRendererItemIndex(s)}else{var r=t.length;for(s=0;s<r;s++)this.resetRendererItemIndex(s)}},i.itemUpdatedHandler=function(t,e){if(!this.$DataGroup[11]){var i=this.$indexToRenderer[e];i&&this.updateRenderer(i,e,t)}},i.resetRendererItemIndex=function(t){var e=this.$indexToRenderer[t];e&&(e.itemIndex=t)},e(i,"itemRenderer",function(){return this.$DataGroup[6]},function(t){var e=this.$DataGroup;e[6]!=t&&(e[6]=t,e[5]=!0,e[8]=!0,e[10]=!0,this.removeDataProviderListener(),this.invalidateProperties())}),e(i,"itemRendererSkinName",function(){return this.$DataGroup[13]},function(t){var e=this.$DataGroup;e[13]!=t&&(e[13]=t,this.$UIComponent[29]&&(e[14]=!0,this.invalidateProperties()))}),e(i,"itemRendererFunction",function(){return this.$DataGroup[7]},function(t){var e=this.$DataGroup;e[7]!=t&&(e[7]=t,e[5]=!0,e[8]=!0,this.removeDataProviderListener(),this.invalidateProperties())}),i.itemToRendererClass=function(t){var e,i=this.$DataGroup;return i[7]&&(e=i[7](t)),e||(e=i[6]),e||(e=u.ItemRenderer),e.$hashCode||(e.$hashCode=egret.$hashCount++),e},i.createChildren=function(){if(!this.$layout){var t=new u.VerticalLayout;t.gap=0,t.horizontalAlign=u.JustifyAlign.CONTENT_JUSTIFY,this.$setLayout(t)}l.prototype.createChildren.call(this)},i.commitProperties=function(){var t=this.$DataGroup;if((t[5]||this.$dataProviderChanged||t[1])&&(this.removeAllRenderers(),this.$layout&&this.$layout.clearVirtualLayoutCache(),this.setTypicalLayoutRect(null),t[1]=!1,t[5]=!1,this.$dataProvider&&this.$dataProvider.addEventListener(u.CollectionEvent.COLLECTION_CHANGE,this.onCollectionChange,this),this.$layout&&this.$layout.$useVirtualLayout?(this.invalidateSize(),this.invalidateDisplayList()):this.createRenderers(),this.$dataProviderChanged&&(this.$dataProviderChanged=!1,this.scrollV=this.scrollH=0)),l.prototype.commitProperties.call(this),t[8]&&(t[8]=!1,this.$dataProvider&&0<this.$dataProvider.length&&(t[12]=this.$dataProvider.getItemAt(0),this.measureRendererSize())),t[14]){t[14]=!1;for(var e=t[13],i=this.$indexToRenderer,n=(a=Object.keys(i)).length,s=0;s<n;s++){var r=a[s];this.setItemRenderSkinName(i[r],e)}var a,o=t[3];for(n=(a=Object.keys(o)).length,s=0;s<n;s++){var h=o[a[s]];for(n=h.length,s=0;s<n;s++)this.setItemRenderSkinName(h[s],e)}}},i.measure=function(){this.$layout&&this.$layout.$useVirtualLayout&&this.ensureTypicalLayoutElement(),l.prototype.measure.call(this)},i.updateDisplayList=function(t,e){var i=this.$layout&&this.$layout.$useVirtualLayout;i&&this.ensureTypicalLayoutElement(),l.prototype.updateDisplayList.call(this,t,e);var n=this.$DataGroup;if(i){var s=n[9];if(s){var r=this.$indexToRenderer[0];if(r){var a=egret.$TempRectangle;r.getPreferredBounds(a),a.width==s.width&&a.height==s.height||(n[9]=null)}}}},i.ensureTypicalLayoutElement=function(){this.$DataGroup[9]||this.$dataProvider&&0<this.$dataProvider.length&&(this.$DataGroup[12]=this.$dataProvider.getItemAt(0),this.measureRendererSize())},i.measureRendererSize=function(){var t=this.$DataGroup;if(t[12]){var e=this.createVirtualRenderer(t[12]);if(e){this.updateRenderer(e,0,t[12]),e.validateNow();var i=egret.$TempRectangle;e.getPreferredBounds(i);var n=new egret.Rectangle(0,0,i.width,i.height);this.$layout&&this.$layout.$useVirtualLayout?(t[4]&&this.rendererAdded(e,0,t[12]),this.doFreeRenderer(e)):this.removeChild(e),this.setTypicalLayoutRect(n),t[4]=!1}else this.setTypicalLayoutRect(null)}else this.setTypicalLayoutRect(null)},i.setTypicalLayoutRect=function(t){this.$DataGroup[9]=t,this.$layout&&(t?this.$layout.setTypicalSize(t.width,t.height):this.$layout.setTypicalSize(0,0))},i.removeAllRenderers=function(){for(var t=this.$indexToRenderer,e=(r=Object.keys(t)).length,i=0;i<e;i++){var n=t[r[i]];n&&(this.rendererRemoved(n,n.itemIndex,n.data),this.removeChild(n))}this.$indexToRenderer=[];var s=this.$DataGroup;if(s[10]){var r,a=s[3];for(e=(r=Object.keys(a)).length,i=0;i<e;i++){var o=a[r[i]];for(e=o.length,i=0;i<e;i++)n=o[i],this.rendererRemoved(n,n.itemIndex,n.data),this.removeChild(n)}s[3]={},s[2]={},s[10]=!1}},i.createRenderers=function(){if(this.$dataProvider)for(var t=0,e=this.$dataProvider.length,i=0;i<e;i++){var n=this.$dataProvider.getItemAt(i),s=this.itemToRendererClass(n),r=this.createOneRenderer(s);r&&(this.$indexToRenderer[t]=r,this.updateRenderer(r,t,n),this.rendererAdded(r,t,n),t++)}},i.updateRenderer=function(t,e,i){var n=this.$DataGroup;return n[11]=!0,t.itemIndex=e,t.data=i,n[11]=!1,t},e(i,"numElements",function(){return this.$dataProvider?this.$dataProvider.length:0}),i.rendererAdded=function(t,e,i){},i.rendererRemoved=function(t,e,i){},t}(u.Group);u.DataGroup=t,egret.registerClass(t,"eui.DataGroup"),u.registerProperty(t,"itemRenderer","Class"),u.registerProperty(t,"itemRendererSkinName","Class"),u.registerProperty(t,"dataProvider","eui.ICollection",!0),DEBUG&&egret.$markReadOnly(t,"numElements")}(eui||(eui={})),function(s){var r=s.sys.UIComponentImpl,t=function(n){function t(){n.call(this),this._widthConstraint=NaN,this.$isShowPrompt=!1,this.$promptColor=6710886,this.$isFocusIn=!1,this.initializeUIValues(),this.type=egret.TextFieldType.INPUT,this.$EditableText={0:null,1:16777215,2:!1}}__extends(t,n);var e=__define,i=t.prototype;return i.$invalidateContentBounds=function(){n.prototype.$invalidateContentBounds.call(this),this.invalidateSize()},i.$setWidth=function(t){var e=n.prototype.$setWidth.call(this,t),i=r.prototype.$setWidth.call(this,t);return e&&i},i.$setHeight=function(t){var e=n.prototype.$setHeight.call(this,t),i=r.prototype.$setHeight.call(this,t);return e&&i},i.$getText=function(){var t=n.prototype.$getText.call(this);return t==this.$EditableText[0]&&(t=""),t},i.$setText=function(t){var e=this.$EditableText[0];e==t&&null!=e||(this.$isShowPrompt=!1,this.textColor=this.$EditableText[1]),this.$isFocusIn||""!=t&&null!=t||(t=e,this.$isShowPrompt=!0,n.prototype.$setTextColor.call(this,this.$promptColor));var i=n.prototype.$setText.call(this,t);return s.PropertyEvent.dispatchPropertyEvent(this,s.PropertyEvent.PROPERTY_CHANGE,"text"),i},i.$onAddToStage=function(t,e){s.sys.UIComponentImpl.prototype.$onAddToStage.call(this,t,e),this.addEventListener(egret.FocusEvent.FOCUS_IN,this.onfocusIn,this),this.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onfocusOut,this)},i.$onRemoveFromStage=function(){s.sys.UIComponentImpl.prototype.$onRemoveFromStage.call(this),this.removeEventListener(egret.FocusEvent.FOCUS_IN,this.onfocusIn,this),this.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onfocusOut,this)},e(i,"prompt",function(){return this.$EditableText[0]},function(t){var e=this.$EditableText,i=e[0];if(i!=t){e[0]=t;var n=this.text;n&&n!=i||this.showPromptText()}}),e(i,"promptColor",function(){return this.$promptColor},function(t){if(t=0|+t,this.$promptColor!=t){this.$promptColor=t;var e=this.text;e&&e!=this.$EditableText[0]||this.showPromptText()}}),i.onfocusOut=function(){this.$isFocusIn=!1,this.text||this.showPromptText()},i.onfocusIn=function(){this.$isFocusIn=!0,this.$isShowPrompt=!1,this.displayAsPassword=this.$EditableText[2];var t=this.$EditableText,e=this.text;e&&e!=t[0]||(this.textColor=t[1],this.text="")},i.showPromptText=function(){var t=this.$EditableText;this.$isShowPrompt=!0,n.prototype.$setTextColor.call(this,this.$promptColor),n.prototype.$setDisplayAsPassword.call(this,!1),this.text=t[0]},i.$setTextColor=function(t){return t=0|+t,this.$EditableText[1]=t,this.$isShowPrompt||n.prototype.$setTextColor.call(this,t),!0},i.$setDisplayAsPassword=function(t){return this.$EditableText[2]=t,this.$isShowPrompt||n.prototype.$setDisplayAsPassword.call(this,t),!0},i.createChildren=function(){this.onfocusOut()},i.childrenCreated=function(){},i.commitProperties=function(){},i.measure=function(){var t=this.$UIComponent,e=this.$TextField[3],i=NaN;isNaN(this._widthConstraint)?isNaN(t[8])?1e5!=t[13]&&(i=t[13]):i=t[8]:(i=this._widthConstraint,this._widthConstraint=NaN),n.prototype.$setWidth.call(this,i),this.setMeasuredSize(this.textWidth,this.textHeight),n.prototype.$setWidth.call(this,e)},i.updateDisplayList=function(t,e){n.prototype.$setWidth.call(this,t),n.prototype.$setHeight.call(this,e)},i.invalidateParentLayout=function(){},i.setMeasuredSize=function(t,e){},i.invalidateProperties=function(){},i.validateProperties=function(){},i.invalidateSize=function(){},i.validateSize=function(t){},i.invalidateDisplayList=function(){},i.validateDisplayList=function(){},i.validateNow=function(){},i.setLayoutBoundsSize=function(t,e){if(r.prototype.setLayoutBoundsSize.call(this,t,e),!isNaN(t)&&t!==this._widthConstraint&&0!=t){var i=this.$UIComponent;isNaN(i[9])&&t!=i[16]&&(this._widthConstraint=t,this.invalidateSize())}},i.setLayoutBoundsPosition=function(t,e){},i.getLayoutBounds=function(t){},i.getPreferredBounds=function(t){},t}(egret.TextField);s.EditableText=t,egret.registerClass(t,"eui.EditableText",["eui.UIComponent","eui.IDisplayText"]),s.sys.implementUIComponent(t,egret.TextField),s.registerBindable(t.prototype,"text")}(eui||(eui={})),function(s){var t=function(t){function e(){t.call(this),this.thumb=null,this.$viewport=null,this.autoVisibility=!0}__extends(e,t);var i=__define,n=e.prototype;return i(n,"viewport",function(){return this.$viewport},function(t){if(t!=this.$viewport){var e=this.$viewport;e&&(e.removeEventListener(s.PropertyEvent.PROPERTY_CHANGE,this.onPropertyChanged,this),e.removeEventListener(egret.Event.RESIZE,this.onViewportResize,this)),(this.$viewport=t)&&(t.addEventListener(s.PropertyEvent.PROPERTY_CHANGE,this.onPropertyChanged,this),t.addEventListener(egret.Event.RESIZE,this.onViewportResize,this)),this.invalidateDisplayList()}}),n.onViewportResize=function(t){this.invalidateDisplayList()},n.onPropertyChanged=function(t){},e}(s.Component);s.ScrollBarBase=t,egret.registerClass(t,"eui.ScrollBarBase")}(eui||(eui={})),function(t){var e=function(c){function t(){c.apply(this,arguments)}__extends(t,c);__define;var e=t.prototype;return e.updateDisplayList=function(t,e){c.prototype.updateDisplayList.call(this,t,e);var i=this.thumb,n=this.$viewport;if(i&&n){var s=egret.$TempRectangle;i.getPreferredBounds(s);var r=s.width,a=s.y,o=n.scrollH,h=n.contentWidth,l=n.width;if(o<=0){var u=r*(1- -o/(.5*l));u=Math.max(5,Math.round(u)),i.setLayoutBoundsSize(u,NaN),i.setLayoutBoundsPosition(0,a)}else if(h-l<=o)u=r*(1-(o-h+l)/(.5*l)),u=Math.max(5,Math.round(u)),i.setLayoutBoundsSize(u,NaN),i.setLayoutBoundsPosition(t-u,a);else{var d=(t-r)*o/(h-l);i.setLayoutBoundsSize(NaN,NaN),i.setLayoutBoundsPosition(d,a)}}},e.onPropertyChanged=function(t){switch(t.property){case"scrollH":case"contentWidth":this.invalidateDisplayList()}},t}(t.ScrollBarBase);t.HScrollBar=e,egret.registerClass(e,"eui.HScrollBar")}(eui||(eui={})),function(s){var t=function(i){function t(){i.call(this),this.$Range={0:100,1:!1,2:0,3:!1,4:0,5:0,6:!1,7:1,8:!1,9:!1}}__extends(t,i);var e=__define,n=t.prototype;return e(n,"maximum",function(){return this.$Range[0]},function(t){t=+t||0;var e=this.$Range;t!==e[0]&&(e[0]=t,e[1]=!0,this.invalidateProperties(),this.invalidateDisplayList())}),e(n,"minimum",function(){return this.$Range[2]},function(t){t=+t||0;var e=this.$Range;t!==e[2]&&(e[2]=t,e[3]=!0,this.invalidateProperties(),this.invalidateDisplayList())}),e(n,"value",function(){var t=this.$Range;return t[6]?t[5]:t[4]},function(t){t=+t||0,this.$setValue(t)}),n.$setValue=function(t){if(t===this.value)return!1;var e=this.$Range;return e[5]=t,e[6]=!0,this.invalidateProperties(),!0},e(n,"snapInterval",function(){return this.$Range[7]},function(t){var e=this.$Range;e[9]=!0,(t=+t||0)!==e[7]&&(isNaN(t)?(e[7]=1,e[9]=!1):e[7]=t,e[8]=!0,this.invalidateProperties())}),n.commitProperties=function(){i.prototype.commitProperties.call(this);var t=this.$Range;if(t[2]>t[0]&&(t[1]?t[0]=t[2]:t[2]=t[0]),t[6]||t[1]||t[3]||t[8]){var e=t[6]?t[5]:t[4];t[6]=!1,t[1]=!1,t[3]=!1,t[8]=!1,this.setValue(this.nearestValidValue(e,t[7]))}},n.nearestValidSize=function(t){var e=this.snapInterval;if(0==e)return t;var i=Math.round(t/e)*e;return Math.abs(i)<e?e:i},n.nearestValidValue=function(t,e){var i=this.$Range;if(0==e)return Math.max(i[2],Math.min(i[0],t));var n=i[0]-i[2],s=1;if(t-=i[2],e!=Math.round(e)){var r=(1+e).toString().split(".");n*=s=Math.pow(10,r[1].length),t=Math.round(t*s),e=Math.round(e*s)}var a=Math.max(0,Math.floor(t/e)*e),o=Math.min(n,Math.floor((t+e)/e)*e);return((o-a)/2<=t-a?o:a)/s+i[2]},n.setValue=function(t){var e=this.$Range;e[4]!==t&&(e[0]>e[2]?e[4]=Math.min(e[0],Math.max(e[2],t)):e[4]=t,e[6]=!1,this.invalidateDisplayList(),s.PropertyEvent.dispatchPropertyEvent(this,s.PropertyEvent.PROPERTY_CHANGE,"value"))},n.updateDisplayList=function(t,e){i.prototype.updateDisplayList.call(this,t,e),this.updateSkinDisplayList()},n.updateSkinDisplayList=function(){},t}(s.Component);s.Range=t,egret.registerClass(t,"eui.Range"),s.registerBindable(t.prototype,"value")}(eui||(eui={})),function(u){var t=function(i){function t(){i.call(this),this.trackHighlight=null,this.thumb=null,this.track=null,this.$SliderBase={0:0,1:0,2:0,3:0,4:null,5:null,6:300,7:0,8:0,9:!0},this.maximum=10,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this)}__extends(t,i);var e=__define,n=t.prototype;return e(n,"slideDuration",function(){return this.$SliderBase[6]},function(t){this.$SliderBase[6]=+t||0}),n.pointToValue=function(t,e){return this.minimum},e(n,"liveDragging",function(){return this.$SliderBase[9]},function(t){this.$SliderBase[9]=!!t}),e(n,"pendingValue",function(){return this.$SliderBase[7]},function(t){t=+t||0;var e=this.$SliderBase;t!==e[7]&&(e[7]=t,this.invalidateDisplayList())}),n.setValue=function(t){this.$SliderBase[7]=t,i.prototype.setValue.call(this,t)},n.partAdded=function(t,e){i.prototype.partAdded.call(this,t,e),e==this.thumb?(this.thumb.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onThumbTouchBegin,this),this.thumb.addEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this)):e==this.track?(this.track.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTrackTouchBegin,this),this.track.addEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this)):e===this.trackHighlight&&(this.trackHighlight.touchEnabled=!1,egret.is(this.trackHighlight,"egret.DisplayObjectContainer")&&(this.trackHighlight.touchChildren=!1))},n.partRemoved=function(t,e){i.prototype.partRemoved.call(this,t,e),e==this.thumb?(this.thumb.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onThumbTouchBegin,this),this.thumb.removeEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this)):e==this.track&&(this.track.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTrackTouchBegin,this),this.track.removeEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this))},n.onTrackOrThumbResize=function(t){this.updateSkinDisplayList()},n.onThumbTouchBegin=function(t){var e=this.$SliderBase;e[5]&&e[5].isPlaying&&this.stopAnimation();var i=this.$stage;i.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStageTouchMove,this),i.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this);var n=this.thumb.globalToLocal(t.stageX,t.stageY,egret.$TempPoint);e[0]=n.x,e[1]=n.y,u.UIEvent.dispatchUIEvent(this,u.UIEvent.CHANGE_START)},n.onStageTouchMove=function(t){var e=this.$SliderBase;e[2]=t.$stageX,e[3]=t.$stageY;var i=this.track;if(i){var n=i.globalToLocal(e[2],e[3],egret.$TempPoint),s=this.pointToValue(n.x-e[0],n.y-e[1]);s=this.nearestValidValue(s,this.snapInterval),this.updateWhenTouchMove(s),t.updateAfterEvent()}},n.updateWhenTouchMove=function(t){t!=this.$SliderBase[7]&&(this.liveDragging?(this.setValue(t),this.dispatchEventWith(egret.Event.CHANGE)):this.pendingValue=t)},n.onStageTouchEnd=function(t){var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStageTouchMove,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),u.UIEvent.dispatchUIEvent(this,u.UIEvent.CHANGE_END);var i=this.$SliderBase;this.liveDragging||this.value==i[7]||(this.setValue(i[7]),this.dispatchEventWith(egret.Event.CHANGE))},n.onTouchBegin=function(t){this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.stageTouchEndHandler,this),this.$SliderBase[4]=t.$target},n.stageTouchEndHandler=function(t){var e=t.$target,i=this.$SliderBase;t.$currentTarget.removeEventListener(egret.TouchEvent.TOUCH_END,this.stageTouchEndHandler,this),i[4]!=e&&this.contains(e)&&egret.TouchEvent.dispatchTouchEvent(this,egret.TouchEvent.TOUCH_TAP,!0,!0,t.$stageX,t.$stageY,t.touchPointID),i[4]=null},n.$animationUpdateHandler=function(t){this.pendingValue=t.currentValue},n.animationEndHandler=function(t){this.setValue(this.$SliderBase[8]),this.dispatchEventWith(egret.Event.CHANGE),u.UIEvent.dispatchUIEvent(this,u.UIEvent.CHANGE_END)},n.stopAnimation=function(){this.$SliderBase[5].stop(),this.setValue(this.nearestValidValue(this.pendingValue,this.snapInterval)),this.dispatchEventWith(egret.Event.CHANGE),u.UIEvent.dispatchUIEvent(this,u.UIEvent.CHANGE_END)},n.onTrackTouchBegin=function(t){var e=this.thumb?this.thumb.width:0,i=this.thumb?this.thumb.height:0,n=t.$stageX-e/2,s=t.$stageY-i/2,r=this.track.globalToLocal(n,s,egret.$TempPoint),a=this.$Range,o=this.pointToValue(r.x,r.y);o=this.nearestValidValue(o,a[7]);var h=this.$SliderBase;if(o!=h[7])if(0!=h[6]){h[5]||(h[5]=new u.sys.Animation(this.$animationUpdateHandler,this),h[5].endFunction=this.animationEndHandler);var l=h[5];l.isPlaying&&this.stopAnimation(),h[8]=o,l.duration=h[6]*(Math.abs(h[7]-h[8])/(a[0]-a[2])),l.from=h[7],l.to=h[8],u.UIEvent.dispatchUIEvent(this,u.UIEvent.CHANGE_START),l.play()}else this.setValue(o),this.dispatchEventWith(egret.Event.CHANGE)},t}(u.Range);u.SliderBase=t,egret.registerClass(t,"eui.SliderBase")}(eui||(eui={})),function(t){var e=function(t){function e(){t.call(this)}__extends(e,t);__define;var i=e.prototype;return i.pointToValue=function(t,e){if(!this.thumb||!this.track)return 0;var i=this.$Range,n=i[0]-i[2],s=this.getThumbRange();return i[2]+(0!=s?t/s*n:0)},i.getThumbRange=function(){var t=egret.$TempRectangle;this.track.getLayoutBounds(t);var e=t.width;return this.thumb.getLayoutBounds(t),e-t.width},i.updateSkinDisplayList=function(){if(this.thumb&&this.track){var t=this.$Range,e=this.getThumbRange(),i=t[0]-t[2],n=0<i?(this.pendingValue-t[2])/i*e:0,s=this.track.localToGlobal(n,0,egret.$TempPoint),r=s.x,a=s.y,o=this.thumb.$parent.globalToLocal(r,a,egret.$TempPoint).x,h=egret.$TempRectangle;if(this.thumb.getLayoutBounds(h),this.thumb.setLayoutBoundsPosition(Math.round(o),h.y),this.trackHighlight&&this.trackHighlight.$parent){var l=this.trackHighlight.$parent.globalToLocal(r,a,egret.$TempPoint).x-n;this.trackHighlight.x=Math.round(l),this.trackHighlight.width=Math.round(n)}}},e}(t.SliderBase);t.HSlider=e,egret.registerClass(e,"eui.HSlider")}(eui||(eui={})),function(t){var h=[],l={},u={},e=function(){function t(){}__define;var e=t.prototype;return e.getAsset=function(t,e,i){var n=l[t];if(n)n.push([e,i]);else{var s=h.pop();s||(s=new egret.ImageLoader),l[t]=[[e,i]],u[s.$hashCode]=t,s.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),s.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this),s.load(t)}},e.onLoadFinish=function(t){var e,i=t.currentTarget;i.removeEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),i.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this),t.$type==egret.Event.COMPLETE&&((e=new egret.Texture)._setBitmapData(i.data),i.data=null),h.push(i);var n=u[i.$hashCode];delete u[i.$hashCode];var s=l[n];delete l[n];for(var r=s.length,a=0;a<r;a++){var o=s[a];o[0].call(o[1],e,n)}},t}();t.DefaultAssetAdapter=e,egret.registerClass(e,"eui.DefaultAssetAdapter",["eui.IAssetAdapter"])}(eui||(eui={})),function(s){var r=new s.DefaultAssetAdapter,t=function(i){function t(t){i.call(this),this.sourceChanged=!1,this._source=null,this.initializeUIValues(),t&&(this.source=t)}__extends(t,i);var e=__define,n=t.prototype;return e(n,"scale9Grid",function(){return this.$scale9Grid},function(t){this.$scale9Grid=t,this.$invalidateContentBounds(),this.invalidateDisplayList()}),e(n,"fillMode",function(){return this.$fillMode},function(t){t!=this.$fillMode&&(this.$fillMode=t,this.invalidateDisplayList())}),n.$setFillMode=function(t){var e=i.prototype.$setFillMode.call(this,t);return this.invalidateDisplayList(),e},e(n,"source",function(){return this._source},function(t){t!=this._source&&(this._source=t,this.$stage?this.parseSource():(this.sourceChanged=!0,this.invalidateProperties()))}),n.$setBitmapData=function(t){if(t==this.$Bitmap[0])return!1;var e=i.prototype.$setBitmapData.call(this,t);return this.sourceChanged=!1,this.invalidateSize(),this.invalidateDisplayList(),e},n.parseSource=function(){this.sourceChanged=!1;var t=this._source;if(t&&"string"==typeof t){var e=this.$stage.getImplementation("eui.IAssetAdapter");e||(e=r),e.getAsset(this._source,this.contentChanged,this)}else this.$setBitmapData(t)},n.contentChanged=function(t,e){e===this._source&&egret.is(t,"egret.Texture")&&(this.$setBitmapData(t),t?this.dispatchEventWith(egret.Event.COMPLETE):DEBUG&&egret.$warn(2301,e))},n.$measureContentBounds=function(t){this.$Bitmap;var e=this.$Bitmap[0];if(e){var i=this.$UIComponent,n=i[10],s=i[11];if(isNaN(n)||isNaN(s))return void t.setEmpty();"clip"==this.$fillMode&&(n>e.$getTextureWidth()&&(n=e.$getTextureWidth()),s>e.$getTextureHeight()&&(s=e.$getTextureHeight())),t.setTo(0,0,n,s)}else t.setEmpty()},n.$render=function(){if(this.$Bitmap[0]){var t=this.$UIComponent,e=t[10],i=t[11];if(0!==e&&0!==i){var n=this.$Bitmap;egret.Bitmap.$drawImage(this.$renderNode,n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],e,i,n[13],n[14],this.scale9Grid,this.$fillMode,n[10])}}},n.createChildren=function(){this.sourceChanged&&this.parseSource()},n.childrenCreated=function(){},n.commitProperties=function(){s.sys.UIComponentImpl.prototype.commitProperties.call(this),this.sourceChanged&&this.parseSource()},n.measure=function(){var t=this.$Bitmap[0];t?this.setMeasuredSize(t.$getTextureWidth(),t.$getTextureHeight()):this.setMeasuredSize(0,0)},n.updateDisplayList=function(t,e){this.$invalidateContentBounds()},n.invalidateParentLayout=function(){},n.setMeasuredSize=function(t,e){},n.invalidateProperties=function(){},n.validateProperties=function(){},n.invalidateSize=function(){},n.validateSize=function(t){},n.invalidateDisplayList=function(){},n.validateDisplayList=function(){},n.validateNow=function(){},n.setLayoutBoundsSize=function(t,e){},n.setLayoutBoundsPosition=function(t,e){},n.getLayoutBounds=function(t){},n.getPreferredBounds=function(t){},t}(egret.Bitmap);s.Image=t,egret.registerClass(t,"eui.Image",["eui.UIComponent"]),s.sys.implementUIComponent(t,egret.Bitmap),s.registerProperty(t,"scale9Grid","egret.Rectangle")}(eui||(eui={})),function(s){var t=function(t){function e(){t.call(this),this._data=null,this._selected=!1,this.itemIndex=-1,this.touchCaptured=!1,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this)}__extends(e,t);var i=__define,n=e.prototype;return i(n,"data",function(){return this._data},function(t){this._data=t,s.PropertyEvent.dispatchPropertyEvent(this,s.PropertyEvent.PROPERTY_CHANGE,"data"),this.dataChanged()}),n.dataChanged=function(){},i(n,"selected",function(){return this._selected},function(t){this._selected!=t&&(this._selected=t,this.invalidateState())}),n.onTouchCancle=function(t){this.touchCaptured=!1;var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.invalidateState()},n.onTouchBegin=function(t){this.$stage.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!0,this.invalidateState(),t.updateAfterEvent()},n.onStageTouchEnd=function(t){var e=t.$currentTarget;e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!1,this.invalidateState()},n.getCurrentState=function(){var t="up";if(this.touchCaptured&&(t="down"),this._selected){var e=t+"AndSelected",i=this.skin;return i&&i.hasState(e)?e:"disabled"==t?"disabled":"down"}return t},e}(s.Component);s.ItemRenderer=t,egret.registerClass(t,"eui.ItemRenderer",["eui.IItemRenderer","eui.UIComponent"]),s.registerBindable(t.prototype,"data")}(eui||(eui={})),function(i){var s=i.sys.UIComponentImpl,t=function(n){function t(t){n.call(this),this._widthConstraint=NaN,this.initializeUIValues(),this.text=t}__extends(t,n);__define;var e=t.prototype;return e.$invalidateContentBounds=function(){n.prototype.$invalidateContentBounds.call(this),this.invalidateSize()},e.$setWidth=function(t){var e=n.prototype.$setWidth.call(this,t),i=s.prototype.$setWidth.call(this,t);return e&&i},e.$setHeight=function(t){var e=n.prototype.$setHeight.call(this,t),i=s.prototype.$setHeight.call(this,t);return e&&i},e.$setText=function(t){var e=n.prototype.$setText.call(this,t);return i.PropertyEvent.dispatchPropertyEvent(this,i.PropertyEvent.PROPERTY_CHANGE,"text"),e},e.createChildren=function(){},e.childrenCreated=function(){},e.commitProperties=function(){},e.measure=function(){var t=this.$UIComponent,e=this.$TextField[3],i=NaN;isNaN(this._widthConstraint)?isNaN(t[8])?1e5!=t[13]&&(i=t[13]):i=t[8]:(i=this._widthConstraint,this._widthConstraint=NaN),n.prototype.$setWidth.call(this,i),this.setMeasuredSize(this.textWidth,this.textHeight),n.prototype.$setWidth.call(this,e)},e.updateDisplayList=function(t,e){n.prototype.$setWidth.call(this,t),n.prototype.$setHeight.call(this,e)},e.invalidateParentLayout=function(){},e.setMeasuredSize=function(t,e){},e.invalidateProperties=function(){},e.validateProperties=function(){},e.invalidateSize=function(){},e.validateSize=function(t){},e.invalidateDisplayList=function(){},e.validateDisplayList=function(){},e.validateNow=function(){},e.setLayoutBoundsSize=function(t,e){if(s.prototype.setLayoutBoundsSize.call(this,t,e),!isNaN(t)&&t!==this._widthConstraint&&0!=t){var i=this.$UIComponent;isNaN(i[9])&&t!=i[16]&&(this._widthConstraint=t,this.invalidateSize())}},e.setLayoutBoundsPosition=function(t,e){},e.getLayoutBounds=function(t){},e.getPreferredBounds=function(t){},t}(egret.TextField);i.Label=t,egret.registerClass(t,"eui.Label",["eui.UIComponent","eui.IDisplayText"]),i.sys.implementUIComponent(t,egret.TextField),i.registerBindable(t.prototype,"text")}(eui||(eui={})),function(o){var t=function(r){function a(){r.call(this),this.$ListBase={0:!1,1:!1,2:-2,3:-1,4:!1,5:void 0,6:!1,7:null,8:!1}}__extends(a,r);var t=__define,e=a.prototype;return t(e,"requireSelection",function(){return this.$ListBase[0]},function(t){t=!!t;var e=this.$ListBase;t!==e[0]&&(e[0]=t)&&(e[1]=!0,this.invalidateProperties())}),t(e,"selectedIndex",function(){return this.$getSelectedIndex()},function(t){t=0|+t,this.setSelectedIndex(t,!1)}),e.$getSelectedIndex=function(){var t=this.$ListBase;return t[2]!=a.NO_PROPOSED_SELECTION?t[2]:t[3]},e.setSelectedIndex=function(t,e){if(t!=this.selectedIndex){var i=this.$ListBase;e&&(i[4]=i[4]||e),i[2]=t,this.invalidateProperties()}},t(e,"selectedItem",function(){var t=this.$ListBase;if(void 0!==t[5])return t[5];var e=this.$getSelectedIndex();return e!=a.NO_SELECTION&&null!=this.$dataProvider&&this.$dataProvider.length>e?this.$dataProvider.getItemAt(e):void 0},function(t){this.setSelectedItem(t,!1)}),e.setSelectedItem=function(t,e){if(void 0===e&&(e=!1),this.selectedItem!==t){var i=this.$ListBase;e&&(i[4]=i[4]||e),i[5]=t,this.invalidateProperties()}},e.commitProperties=function(){var t=this.$dataProviderChanged;r.prototype.commitProperties.call(this);var e=this.$ListBase,i=this.$getSelectedIndex(),n=this.$dataProvider;t&&(0<=i&&n&&i<n.length?this.itemSelected(i,!0):this.requireSelection?e[2]=0:this.setSelectedIndex(-1,!1)),e[1]&&(e[1]=!1,e[0]&&i==a.NO_SELECTION&&n&&0<n.length&&(e[2]=0)),void 0!==e[5]&&(e[2]=n?n.getItemIndex(e[5]):a.NO_SELECTION,e[5]=void 0);var s=!1;e[2]!=a.NO_PROPOSED_SELECTION&&(s=this.commitSelection()),e[6]&&(e[6]=!1,s||o.PropertyEvent.dispatchPropertyEvent(this,o.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"))},e.updateRenderer=function(t,e,i){return this.itemSelected(e,this.$isItemIndexSelected(e)),r.prototype.updateRenderer.call(this,t,e,i)},e.itemSelected=function(t,e){var i=this.$indexToRenderer[t];i&&(i.selected=e)},e.$isItemIndexSelected=function(t){return t==this.selectedIndex},e.commitSelection=function(t){void 0===t&&(t=!0);var e=this.$dataProvider,i=this.$ListBase,n=e?e.length-1:-1,s=i[3],r=i[2];if(r<a.NO_SELECTION&&(r=a.NO_SELECTION),n<r&&(r=n),i[0]&&r==a.NO_SELECTION&&e&&0<e.length)return i[2]=a.NO_PROPOSED_SELECTION,i[4]=!1;if(i[4]&&!this.dispatchEventWith(egret.Event.CHANGING,!1,!0))return this.itemSelected(i[2],!1),i[2]=a.NO_PROPOSED_SELECTION,i[4]=!1;return i[3]=r,i[2]=a.NO_PROPOSED_SELECTION,s!=a.NO_SELECTION&&this.itemSelected(s,!1),i[3]!=a.NO_SELECTION&&this.itemSelected(i[3],!0),t&&(i[4]&&(this.dispatchEventWith(egret.Event.CHANGE),i[4]=!1),o.PropertyEvent.dispatchPropertyEvent(this,o.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"),o.PropertyEvent.dispatchPropertyEvent(this,o.PropertyEvent.PROPERTY_CHANGE,"selectedItem")),!0},e.adjustSelection=function(t,e){void 0===e&&(e=!1);var i=this.$ListBase;i[2]!=a.NO_PROPOSED_SELECTION?i[2]=t:i[3]=t,i[6]=!0,this.invalidateProperties()},e.itemAdded=function(t,e){r.prototype.itemAdded.call(this,t,e);var i=this.$getSelectedIndex();i==a.NO_SELECTION?this.$ListBase[0]&&this.adjustSelection(e,!0):e<=i&&this.adjustSelection(i+1,!0)},e.itemRemoved=function(t,e){if(r.prototype.itemRemoved.call(this,t,e),this.selectedIndex!=a.NO_SELECTION){var i=this.$getSelectedIndex();e==i?this.requireSelection&&this.$dataProvider&&0<this.$dataProvider.length?0==e?(this.$ListBase[2]=0,this.invalidateProperties()):this.setSelectedIndex(0,!1):this.adjustSelection(-1,!1):e<i&&this.adjustSelection(i-1,!1)}},e.onCollectionChange=function(t){r.prototype.onCollectionChange.call(this,t),t.kind==o.CollectionEventKind.RESET?0==this.$dataProvider.length&&this.setSelectedIndex(a.NO_SELECTION,!1):t.kind==o.CollectionEventKind.REFRESH&&this.dataProviderRefreshed()},e.dataProviderRefreshed=function(){this.setSelectedIndex(a.NO_SELECTION,!1)},e.rendererAdded=function(t,e,i){t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRendererTouchBegin,this),t.addEventListener(egret.TouchEvent.TOUCH_END,this.onRendererTouchEnd,this),t.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onRendererTouchCancle,this)},e.rendererRemoved=function(t,e,i){t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRendererTouchBegin,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onRendererTouchEnd,this),t.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onRendererTouchCancle,this)},e.onRendererTouchBegin=function(t){var e=this.$ListBase;t.$isDefaultPrevented||(e[8]=!1,e[7]=t.$currentTarget,this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.stage_touchEndHandler,this))},e.onRendererTouchCancle=function(t){var e=this.$ListBase;e[7]=null,e[8]=!0,this.$stage&&this.$stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.stage_touchEndHandler,this)},e.onRendererTouchEnd=function(t){var e=this.$ListBase,i=t.$currentTarget;i==e[7]&&(e[8]||(this.setSelectedIndex(i.itemIndex,!0),o.ItemTapEvent.dispatchItemTapEvent(this,o.ItemTapEvent.ITEM_TAP,i)),e[8]=!1)},e.stage_touchEndHandler=function(t){t.$currentTarget.removeEventListener(egret.TouchEvent.TOUCH_END,this.stage_touchEndHandler,this),this.$ListBase[7]=null},a.NO_SELECTION=-1,a.NO_PROPOSED_SELECTION=-2,a}(o.DataGroup);o.ListBase=t,egret.registerClass(t,"eui.ListBase"),o.registerBindable(t.prototype,"selectedIndex"),o.registerBindable(t.prototype,"selectedItem")}(eui||(eui={})),function(o){var t=function(a){function t(){var n=this;a.apply(this,arguments),this.allowMultipleSelection=!1,this._selectedIndices=[],this.isValidIndex=function(t,e,i){return n.$dataProvider&&0<=t&&t<n.$dataProvider.length&&t%1==0}}__extends(t,a);var e=__define,i=t.prototype;return e(i,"selectedIndices",function(){return this._proposedSelectedIndices?this._proposedSelectedIndices:this._selectedIndices},function(t){this.setSelectedIndices(t,!1)}),e(i,"selectedIndex",function(){return this._proposedSelectedIndices?0<this._proposedSelectedIndices.length?this._proposedSelectedIndices[0]:-1:this.$getSelectedIndex()},function(t){this.setSelectedIndex(t)}),e(i,"selectedItems",function(){var t=[],e=this.selectedIndices;if(e)for(var i=e.length,n=0;n<i;n++)t[n]=this.$dataProvider.getItemAt(e[n]);return t},function(t){var e=[];if(t)for(var i=t.length,n=0;n<i;n++){var s=this.$dataProvider.getItemIndex(t[n]);if(-1!=s&&e.splice(0,0,s),-1==s){e=[];break}}this.setSelectedIndices(e,!1)}),i.setSelectedIndices=function(t,e){var i=this.$ListBase;e&&(i[4]=i[4]||e),this._proposedSelectedIndices=t||[],this.invalidateProperties()},i.commitProperties=function(){a.prototype.commitProperties.call(this),this._proposedSelectedIndices&&this.commitSelection()},i.commitSelection=function(t){void 0===t&&(t=!0);var e=this.$ListBase,i=e[3];if(this._proposedSelectedIndices){if(this._proposedSelectedIndices=this._proposedSelectedIndices.filter(this.isValidIndex),!this.allowMultipleSelection&&0<this._proposedSelectedIndices.length){var n=[];n.push(this._proposedSelectedIndices[0]),this._proposedSelectedIndices=n}0<this._proposedSelectedIndices.length?e[2]=this._proposedSelectedIndices[0]:e[2]=-1}var s=a.prototype.commitSelection.call(this,!1);if(!s)return this._proposedSelectedIndices=null,!1;var r=this.$getSelectedIndex();return r>o.ListBase.NO_SELECTION&&(this._proposedSelectedIndices?-1==this._proposedSelectedIndices.indexOf(r)&&this._proposedSelectedIndices.push(r):this._proposedSelectedIndices=[r]),this._proposedSelectedIndices&&(-1!=this._proposedSelectedIndices.indexOf(i)&&this.itemSelected(i,!0),this.commitMultipleSelection()),t&&s&&(e[4]&&(this.dispatchEventWith(egret.Event.CHANGE),e[4]=!1),o.PropertyEvent.dispatchPropertyEvent(this,o.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"),o.PropertyEvent.dispatchPropertyEvent(this,o.PropertyEvent.PROPERTY_CHANGE,"selectedItem")),s},i.commitMultipleSelection=function(){var t,e,i=[],n=[],s=this._selectedIndices,r=this._proposedSelectedIndices;if(0<s.length&&0<r.length){for(e=r.length,t=0;t<e;t++)-1==s.indexOf(r[t])&&n.push(r[t]);for(e=s.length,t=0;t<e;t++)-1==r.indexOf(s[t])&&i.push(s[t])}else 0<s.length?i=s:0<r.length&&(n=r);if(this._selectedIndices=r,0<i.length)for(e=i.length,t=0;t<e;t++)this.itemSelected(i[t],!1);if(0<n.length)for(e=n.length,t=0;t<e;t++)this.itemSelected(n[t],!0);this._proposedSelectedIndices=null},i.$isItemIndexSelected=function(t){return this.allowMultipleSelection?-1!=this._selectedIndices.indexOf(t):a.prototype.$isItemIndexSelected.call(this,t)},i.dataProviderRefreshed=function(){this.allowMultipleSelection||a.prototype.dataProviderRefreshed.call(this)},i.calculateSelectedIndices=function(t){var e=[],i=this._selectedIndices,n=i.length;if(0<n){if(1==n&&i[0]==t)return this.$ListBase[0]&&e.splice(0,0,i[0]),e;for(var s=!1,r=0;r<n;r++)i[r]==t?s=!0:i[r]!=t&&e.splice(0,0,i[r]);return s||e.splice(0,0,t),e}return e.splice(0,0,t),e},i.onRendererTouchEnd=function(t){if(this.allowMultipleSelection){var e=t.currentTarget;if(e!=this.$ListBase[7])return;this.setSelectedIndices(this.calculateSelectedIndices(e.itemIndex),!0),o.ItemTapEvent.dispatchItemTapEvent(this,o.ItemTapEvent.ITEM_TAP,e)}else a.prototype.onRendererTouchEnd.call(this,t)},t}(o.ListBase);o.List=t,egret.registerClass(t,"eui.List")}(eui||(eui={})),function(s){var t=function(i){function t(){i.call(this),this.closeButton=null,this.moveArea=null,this.titleDisplay=null,this._title="",this.offsetPointX=0,this.offsetPointY=0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onWindowTouchBegin,this,!1,100)}__extends(t,i);var e=__define,n=t.prototype;return n.onWindowTouchBegin=function(t){this.$parent.addChild(this)},e(n,"elementsContent",void 0,function(t){if(t)for(var e=t.length,i=0;i<e;i++)this.addChild(t[i])}),e(n,"title",function(){return this._title},function(t){this._title=t,this.titleDisplay&&(this.titleDisplay.text=this.title)}),n.partAdded=function(t,e){i.prototype.partAdded.call(this,t,e),e==this.titleDisplay?this.titleDisplay.text=this._title:e==this.moveArea?this.moveArea.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this):e==this.closeButton&&this.closeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseButtonClick,this)},n.partRemoved=function(t,e){i.prototype.partRemoved.call(this,t,e),e==this.moveArea?this.moveArea.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this):e==this.closeButton&&this.closeButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseButtonClick,this)},n.onCloseButtonClick=function(t){s.UIEvent.dispatchUIEvent(this,s.UIEvent.CLOSING,!0,!0)&&this.close()},n.close=function(){this.$parent&&this.$parent.removeChild(this)},n.onTouchBegin=function(t){this.$includeInLayout=!1,this.offsetPointX=this.x-t.$stageX,this.offsetPointY=this.y-t.$stageY,this.$stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},n.onTouchMove=function(t){this.x=t.$stageX+this.offsetPointX,this.y=t.$stageY+this.offsetPointY},n.onTouchEnd=function(t){this.$stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.$stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},t}(s.Component);s.Panel=t,egret.registerClass(t,"eui.Panel"),s.registerProperty(t,"elementsContent","Array",!0)}(eui||(eui={})),function(u){var t=function(r){function t(){r.call(this),this.thumb=null,this.labelDisplay=null,this._labelFunction=null,this._slideDuration=500,this._direction=u.Direction.LTR,this.slideToValue=0,this.animationValue=0,this.animation=new u.sys.Animation(this.animationUpdateHandler,this)}__extends(t,r);var e=__define,i=t.prototype;return e(i,"labelFunction",function(){return this._labelFunction},function(t){this._labelFunction!=t&&(this._labelFunction=t,this.invalidateDisplayList())}),i.valueToLabel=function(t,e){return null!=this.labelFunction?this._labelFunction(t,e):t+" / "+e},e(i,"slideDuration",function(){return this._slideDuration},function(t){t=0|+t,this._slideDuration!==t&&(this._slideDuration=t,this.animation.isPlaying&&(this.animation.stop(),this.setValue(this.slideToValue)))}),e(i,"direction",function(){return this._direction},function(t){this._direction!=t&&(this._direction=t,this.invalidateDisplayList())}),i.$setValue=function(t){if(this.value===t)return!1;var e=this.$Range,i=r.prototype.$setValue.call(this,t);if(0<this._slideDuration&&this.$stage){this.validateProperties();var n=this.animation;if(n.isPlaying&&(this.animationValue=this.slideToValue,this.invalidateDisplayList(),n.stop()),this.slideToValue=this.nearestValidValue(t,e[7]),this.slideToValue===this.animationValue)return i;var s=this._slideDuration*(Math.abs(this.animationValue-this.slideToValue)/(e[0]-e[2]));n.duration=s===1/0?0:s,n.from=this.animationValue,n.to=this.slideToValue,n.play()}else this.animationValue=this.value;return i},i.animationUpdateHandler=function(t){var e=this.$Range,i=this.nearestValidValue(t.currentValue,e[7]);this.animationValue=Math.min(e[0],Math.max(e[2],i)),this.invalidateDisplayList()},i.partAdded=function(t,e){r.prototype.partAdded.call(this,t,e),e===this.thumb&&this.thumb.addEventListener(egret.Event.RESIZE,this.onThumbResize,this)},i.partRemoved=function(t,e){r.prototype.partRemoved.call(this,t,e),e===this.thumb&&this.thumb.removeEventListener(egret.Event.RESIZE,this.onThumbResize,this)},i.onThumbResize=function(t){this.updateSkinDisplayList()},i.updateSkinDisplayList=function(){var t=this.animation.isPlaying?this.animationValue:this.value,e=this.maximum,i=this.thumb;if(i){var n=i.width,s=i.height,r=Math.round(t/e*n);(r<0||r===1/0)&&(r=0);var a=Math.round(t/e*s);(a<0||a===1/0)&&(a=0);var o=i.$scrollRect;o||(o=egret.$TempRectangle),o.setTo(0,0,n,s);var h=i.x-o.x,l=i.y-o.y;switch(this._direction){case u.Direction.LTR:o.width=r,i.x=h;break;case u.Direction.RTL:o.width=r,o.x=n-r,i.x=o.x;break;case u.Direction.TTB:o.height=a,i.y=l;break;case u.Direction.BTT:o.height=a,o.y=s-a,i.y=o.y}i.scrollRect=o}this.labelDisplay&&(this.labelDisplay.text=this.valueToLabel(t,e))},t}(u.Range);u.ProgressBar=t,egret.registerClass(t,"eui.ProgressBar")}(eui||(eui={})),function(s){var r={},t=function(i){function t(){i.call(this),this.$indexNumber=0,this.$radioButtonGroup=null,this._group=null,this.groupChanged=!1,this._groupName="radioGroup",this._value=null,this.groupName="radioGroup"}__extends(t,i);var e=__define,n=t.prototype;return e(n,"enabled",function(){return!!this.$Component[3]&&(!this.$radioButtonGroup||this.$radioButtonGroup.$enabled)},function(t){this.$setEnabled(t)}),e(n,"group",function(){if(!this._group&&this._groupName){var t=r[this._groupName];t||((t=new s.RadioButtonGroup).$name=this._groupName,r[this._groupName]=t),this._group=t}return this._group},function(t){this._group!=t&&(this.$radioButtonGroup&&this.$radioButtonGroup.$removeInstance(this,!1),this._group=t,this._groupName=t?this.group.$name:"radioGroup",this.groupChanged=!0,this.invalidateProperties(),this.invalidateDisplayList())}),e(n,"groupName",function(){return this._groupName},function(t){t&&""!=t&&(this._groupName=t,this.$radioButtonGroup&&this.$radioButtonGroup.$removeInstance(this,!1),this._group=null,this.groupChanged=!0,this.invalidateProperties(),this.invalidateDisplayList())}),n.$setSelected=function(t){var e=i.prototype.$setSelected.call(this,t);return this.invalidateDisplayList(),e},e(n,"value",function(){return this._value},function(t){this._value!=t&&(this._value=t,this.$selected&&this.group&&s.PropertyEvent.dispatchPropertyEvent(this.group,s.PropertyEvent.PROPERTY_CHANGE,"selectedValue"))}),n.commitProperties=function(){this.groupChanged&&(this.addToGroup(),this.groupChanged=!1),i.prototype.commitProperties.call(this)},n.updateDisplayList=function(t,e){i.prototype.updateDisplayList.call(this,t,e),this.group&&(this.$selected?this._group.$setSelection(this,!1):this.group.selection==this&&this._group.$setSelection(null,!1))},n.buttonReleased=function(){this.enabled&&!this.selected&&(this.$radioButtonGroup||this.addToGroup(),i.prototype.buttonReleased.call(this),this.group.$setSelection(this,!0))},n.addToGroup=function(){var t=this.group;return t&&t.$addInstance(this),t},t}(s.ToggleButton);s.RadioButton=t,egret.registerClass(t,"eui.RadioButton")}(eui||(eui={})),function(s){var r=0;function h(t,e){var i=t.parent,n=e.parent;if(!i||!n)return 0;var s=t.$nestLevel,r=e.$nestLevel,a=0,o=0;return i==n&&(a=i.getChildIndex(t),o=n.getChildIndex(e)),r<s||o<a?1:s<r||a<o?-1:t==e?0:h(i,n)}var t=function(t){function e(){t.call(this),this.$name=null,this.radioButtons=[],this.$enabled=!0,this._selectedValue=null,this._selection=null,this.$name="_radioButtonGroup"+r++}__extends(e,t);var i=__define,n=e.prototype;return n.getRadioButtonAt=function(t){return this.radioButtons[t]},i(n,"enabled",function(){return this.$enabled},function(t){if(t=!!t,this.$enabled!==t){this.$enabled=t;for(var e=this.radioButtons,i=e.length,n=0;n<i;n++)e[n].invalidateState()}}),i(n,"numRadioButtons",function(){return this.radioButtons.length}),i(n,"selectedValue",function(){return this.selection?null!=this.selection.value?this.selection.value:this.selection.label:null},function(t){if(null!=(this._selectedValue=t))for(var e=this.numRadioButtons,i=0;i<e;i++){var n=this.radioButtons[i];if(n.value==t||n.label==t){this.changeSelection(i,!1),this._selectedValue=null,s.PropertyEvent.dispatchPropertyEvent(this,s.PropertyEvent.PROPERTY_CHANGE,"selectedValue");break}}else this.$setSelection(null,!1)}),i(n,"selection",function(){return this._selection},function(t){this._selection!=t&&this.$setSelection(t,!1)}),n.$addInstance=function(t){t.addEventListener(egret.Event.REMOVED,this.removedHandler,this);var e=this.radioButtons;e.push(t),e.sort(h);for(var i=e.length,n=0;n<i;n++)e[n].$indexNumber=n;this._selectedValue&&(this.selectedValue=this._selectedValue),1==t.selected&&(this.selection=t),t.$radioButtonGroup=this,t.invalidateState()},n.$removeInstance=function(t,e){if(t)for(var i=!1,n=this.radioButtons,s=n.length,r=0;r<s;r++){var a=n[r];i?a.$indexNumber=a.$indexNumber-1:a==t&&(e&&t.addEventListener(egret.Event.ADDED,this.addedHandler,this),t==this._selection&&(this._selection=null),t.$radioButtonGroup=null,t.invalidateState(),this.radioButtons.splice(r,1),i=!0,r--,s--)}},n.$setSelection=function(t,e){if(this._selection==t)return!1;if(t){for(var i=this.numRadioButtons,n=0;n<i;n++)if(t==this.getRadioButtonAt(n)){this.changeSelection(n,e);break}}else this._selection&&(this._selection.selected=!1,this._selection=null,e&&this.dispatchEventWith(egret.Event.CHANGE));return s.PropertyEvent.dispatchPropertyEvent(this,s.PropertyEvent.PROPERTY_CHANGE,"selectedValue"),!0},n.changeSelection=function(t,e){var i=this.getRadioButtonAt(t);i&&i!=this._selection&&(this._selection&&(this._selection.selected=!1),this._selection=i,this._selection.selected=!0,e&&this.dispatchEventWith(egret.Event.CHANGE))},n.addedHandler=function(t){var e=t.target;e&&(e.removeEventListener(egret.Event.ADDED,this.addedHandler,this),this.$addInstance(e))},n.removedHandler=function(t){var e=t.target;e&&(e.removeEventListener(egret.Event.REMOVED,this.removedHandler,this),this.$removeInstance(e,!0))},e}(egret.EventDispatcher);s.RadioButtonGroup=t,egret.registerClass(t,"eui.RadioButtonGroup"),s.registerBindable(t.prototype,"selectedValue"),DEBUG&&egret.$markReadOnly(t,"numRadioButtons")}(eui||(eui={})),function(t){var e=function(n){function t(t,e,i){n.call(this),this.$fillColor=0,this.$fillAlpha=1,this.$strokeColor=4473924,this.$strokeAlpha=1,this.$strokeWeight=0,this.$ellipseWidth=0,this.$ellipseHeight=0,this.touchChildren=!1,this.$graphics=new egret.Graphics,this.$graphics.$setTarget(this),this.width=t,this.height=e,this.fillColor=i}__extends(t,n);var e=__define,i=t.prototype;return e(i,"graphics",function(){return this.$graphics}),i.$measureContentBounds=function(t){this.$graphics&&t.setTo(0,0,this.width,this.height)},e(i,"fillColor",function(){return this.$fillColor},function(t){null!=t&&this.$fillColor!=t&&(this.$fillColor=t,this.invalidateDisplayList())}),e(i,"fillAlpha",function(){return this.$fillAlpha},function(t){this.$fillAlpha!=t&&(this.$fillAlpha=t,this.invalidateDisplayList())}),e(i,"strokeColor",function(){return this.$strokeColor},function(t){this.$strokeColor!=t&&(this.$strokeColor=t,this.invalidateDisplayList())}),e(i,"strokeAlpha",function(){return this.$strokeAlpha},function(t){this.$strokeAlpha!=t&&(this.$strokeAlpha=t,this.invalidateDisplayList())}),e(i,"strokeWeight",function(){return this.$strokeWeight},function(t){this.$strokeWeight!=t&&(this.$strokeWeight=t,this.invalidateDisplayList())}),e(i,"ellipseWidth",function(){return this.$ellipseWidth},function(t){this.$ellipseWidth!=t&&(this.$ellipseWidth=t,this.invalidateDisplayList())}),e(i,"ellipseHeight",function(){return this.$ellipseHeight},function(t){this.$ellipseHeight!=t&&(this.$ellipseHeight=t,this.invalidateDisplayList())}),i.updateDisplayList=function(t,e){var i=this.graphics;i.clear(),0<this.$strokeWeight&&(i.beginFill(this.$fillColor,0),i.lineStyle(this.$strokeWeight,this.$strokeColor,this.$strokeAlpha,!0,"normal","square","miter"),0==this.$ellipseWidth?i.drawRect(this.$strokeWeight/2,this.$strokeWeight/2,t-this.$strokeWeight,e-this.$strokeWeight):i.drawRoundRect(this.$strokeWeight/2,this.$strokeWeight/2,t-this.$strokeWeight,e-this.$strokeWeight,this.$ellipseWidth,0),i.endFill()),i.beginFill(this.$fillColor,this.$fillAlpha),i.lineStyle(this.$strokeWeight,this.$strokeColor,0,!0,"normal","square","miter"),0==this.$ellipseWidth?i.drawRect(this.$strokeWeight,this.$strokeWeight,t-2*this.$strokeWeight,e-2*this.$strokeWeight):i.drawRoundRect(this.$strokeWeight,this.$strokeWeight,t-2*this.$strokeWeight,e-2*this.$strokeWeight,this.$ellipseWidth,0),i.endFill(),this.$invalidateContentBounds()},t}(t.Component);t.Rect=e,egret.registerClass(e,"eui.Rect")}(eui||(eui={})),function(l){var i,t=function(n){function h(){n.call(this),this.$bounces=!0,this.horizontalScrollBar=null,this.verticalScrollBar=null;var t=new l.sys.TouchScroll(this.horizontalUpdateHandler,this.horizontalEndHandler,this),e=new l.sys.TouchScroll(this.verticalUpdateHandler,this.verticalEndHanlder,this);this.$Scroller={0:"auto",1:"auto",2:null,3:0,4:0,5:!1,6:!1,7:!1,8:t,9:e,10:null,11:!1,12:!1}}__extends(h,n);var t=__define,e=h.prototype;return t(e,"bounces",function(){return this.$bounces},function(t){this.$bounces=!!t;var e=this.$Scroller[8];e&&(e.$bounces=this.$bounces);var i=this.$Scroller[9];i&&(i.$bounces=this.$bounces)}),t(e,"throwSpeed",function(){return this.$Scroller[8].$scrollFactor},function(t){(t=+t)<0&&(t=0),this.$Scroller[8].$scrollFactor=t,this.$Scroller[9].$scrollFactor=t}),e.$getThrowInfo=function(t,e){return i?(i.currentPos=t,i.toPos=e):i=new l.ScrollerThrowEvent(l.ScrollerThrowEvent.THROW,!1,!1,t,e),i},t(e,"scrollPolicyV",function(){return this.$Scroller[0]},function(t){var e=this.$Scroller;e[0]!=t&&(e[0]=t,this.checkScrollPolicy())}),t(e,"scrollPolicyH",function(){return this.$Scroller[1]},function(t){var e=this.$Scroller;e[1]!=t&&(e[1]=t,this.checkScrollPolicy())}),e.stopAnimation=function(){var t=this.$Scroller,e=t[9],i=t[8];e.animation.isPlaying?l.UIEvent.dispatchUIEvent(this,l.UIEvent.CHANGE_END):i.animation.isPlaying&&l.UIEvent.dispatchUIEvent(this,l.UIEvent.CHANGE_END),e.stop(),i.stop();var n=this.verticalScrollBar,s=this.horizontalScrollBar;n&&n.autoVisibility&&(n.visible=!1),s&&s.autoVisibility&&(s.visible=!1)},t(e,"viewport",function(){return this.$Scroller[10]},function(t){var e=this.$Scroller;t!=e[10]&&(this.uninstallViewport(),e[10]=t,e[11]=!1,this.installViewport())}),e.installViewport=function(){var t=this.viewport;t&&(this.addChildAt(t,0),t.scrollEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginCapture,this,!0),t.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEndCapture,this,!0),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapCapture,this,!0),t.addEventListener(egret.Event.REMOVED,this.onViewPortRemove,this)),this.horizontalScrollBar&&(this.horizontalScrollBar.viewport=t),this.verticalScrollBar&&(this.verticalScrollBar.viewport=t)},e.uninstallViewport=function(){this.horizontalScrollBar&&(this.horizontalScrollBar.viewport=null),this.verticalScrollBar&&(this.verticalScrollBar.viewport=null);var t=this.viewport;t&&(t.scrollEnabled=!1,t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginCapture,this,!0),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEndCapture,this,!0),t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapCapture,this,!0),t.removeEventListener(egret.Event.REMOVED,this.onViewPortRemove,this),0==this.$Scroller[11]&&this.removeChild(t))},e.onViewPortRemove=function(t){t.target==this.viewport&&(this.$Scroller[11]=!0,this.viewport=null)},e.setSkin=function(t){n.prototype.setSkin.call(this,t);var e=this.viewport;e&&this.addChildAt(e,0)},e.onTouchBeginCapture=function(t){this.$Scroller[12]=!1,this.checkScrollPolicy()&&this.onTouchBegin(t)},e.onTouchEndCapture=function(t){this.$Scroller[12]&&(t.stopPropagation(),this.onTouchEnd(t))},e.onTouchTapCapture=function(t){this.$Scroller[12]&&t.stopPropagation()},e.checkScrollPolicy=function(){var t,e=this.$Scroller,i=e[10];if(!i)return!1;var n,s=i.$UIComponent;switch(e[1]){case"auto":t=i.contentWidth>s[10];break;case"on":t=!0;break;case"off":t=!1}switch(e[6]=t,e[0]){case"auto":n=i.contentHeight>s[11];break;case"on":n=!0;break;case"off":n=!1}return e[7]=n,t||n},e.onTouchBegin=function(t){if(!t.isDefaultPrevented()&&this.checkScrollPolicy()){this.downTarget=t.target;var e=this.$Scroller;this.stopAnimation(),e[3]=t.$stageX,e[4]=t.$stageY,e[6]&&e[8].start(t.$stageX),e[7]&&e[9].start(t.$stageY);var i=this.$stage;this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),i.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,!0),this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveListeners,this)}},e.onTouchMove=function(t){if(!t.isDefaultPrevented()){var e=this.$Scroller;if(!e[5]){if(Math.abs(e[3]-t.$stageX)<h.scrollThreshold)var i=!1;else i=!0;if(Math.abs(e[4]-t.$stageY)<h.scrollThreshold)var n=!1;else n=!0;if(!i&&!n)return;if(i&&"off"==e[1])return;if(n&&"off"==e[0])return;e[12]=!0,e[5]=!0,this.dispatchCancelEvent(t);var s=this.horizontalScrollBar,r=this.verticalScrollBar;s&&s.autoVisibility&&e[6]&&(s.visible=!0),r&&r.autoVisibility&&e[7]&&(r.visible=!0),e[2]&&e[2].reset(),l.UIEvent.dispatchUIEvent(this,l.UIEvent.CHANGE_START),this.$stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this)}t.preventDefault();var a=e[10],o=a.$UIComponent;e[6]&&e[8].update(t.$stageX,a.contentWidth-o[10],a.scrollH),e[7]&&e[9].update(t.$stageY,a.contentHeight-o[11],a.scrollV)}},e.onTouchCancel=function(t){this.$Scroller[5]||this.onRemoveListeners()},e.dispatchCancelEvent=function(t){var e=this.$Scroller[10];if(e){for(var i=new egret.TouchEvent(egret.TouchEvent.TOUCH_CANCEL,t.bubbles,t.cancelable),n=this.downTarget,s=this.$getPropagationList(n),r=s.length,a=.5*s.length,o=-1,h=0;h<r;h++)if(s[h]===e){o=h;break}s.splice(0,o+1),a-=o+1,this.$dispatchPropagationEvent(i,s,a),egret.Event.release(i)}},e.onTouchEnd=function(t){var e=this.$Scroller;e[5]=!1,this.onRemoveListeners();var i=e[10],n=i.$UIComponent;e[8].isStarted()&&e[8].finish(i.scrollH,i.contentWidth-n[10]),e[9].isStarted()&&e[9].finish(i.scrollV,i.contentHeight-n[11])},e.onRemoveListeners=function(){var t=this.$stage;this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,!0),t.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,!0),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveListeners,this)},e.horizontalUpdateHandler=function(t){this.dispatchEventWith(egret.Event.CHANGE),this.$Scroller[10].scrollH=t},e.verticalUpdateHandler=function(t){this.dispatchEventWith(egret.Event.CHANGE),this.$Scroller[10].scrollV=t},e.horizontalEndHandler=function(){this.$Scroller[9].isPlaying()||this.onChangeEnd()},e.verticalEndHanlder=function(){this.$Scroller[8].isPlaying()||this.onChangeEnd()},e.onChangeEnd=function(){var t=this.$Scroller,e=this.horizontalScrollBar,i=this.verticalScrollBar;(e&&e.visible||i&&i.visible)&&(t[2]||(t[2]=new egret.Timer(200,1),t[2].addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onAutoHideTimer,this)),t[2].reset(),t[2].start()),l.UIEvent.dispatchUIEvent(this,l.UIEvent.CHANGE_END)},e.onAutoHideTimer=function(t){var e=this.horizontalScrollBar,i=this.verticalScrollBar;e&&e.autoVisibility&&(e.visible=!1),i&&i.autoVisibility&&(i.visible=!1)},e.updateDisplayList=function(t,e){n.prototype.updateDisplayList.call(this,t,e);var i=this.viewport;i&&(i.setLayoutBoundsSize(t,e),i.setLayoutBoundsPosition(0,0))},e.partAdded=function(t,e){n.prototype.partAdded.call(this,t,e),e==this.horizontalScrollBar?(this.horizontalScrollBar.touchChildren=!1,this.horizontalScrollBar.touchEnabled=!1,this.horizontalScrollBar.viewport=this.viewport,this.horizontalScrollBar.autoVisibility&&(this.horizontalScrollBar.visible=!1)):e==this.verticalScrollBar&&(this.verticalScrollBar.touchChildren=!1,this.verticalScrollBar.touchEnabled=!1,this.verticalScrollBar.viewport=this.viewport,this.verticalScrollBar.autoVisibility&&(this.verticalScrollBar.visible=!1))},h.scrollThreshold=5,h}(l.Component);l.Scroller=t,egret.registerClass(t,"eui.Scroller"),l.registerProperty(t,"viewport","eui.IViewport",!0)}(eui||(eui={})),function(s){var t=function(t){function e(){t.apply(this,arguments),this.maxWidth=1e5,this.minWidth=0,this.maxHeight=1e5,this.minHeight=0,this.width=NaN,this.height=NaN,this.$elementsContent=[],this._hostComponent=null,this.$stateValues=new s.sys.StateValues}__extends(e,t);var i=__define,n=e.prototype;return i(n,"elementsContent",void 0,function(t){this.$elementsContent=t}),i(n,"hostComponent",function(){return this._hostComponent},function(t){this._hostComponent!=t&&(this._hostComponent&&this._hostComponent.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this),this._hostComponent=t,(this.$stateValues.parent=t)&&(this.commitCurrentState(),this.$stateValues.intialized||(t.$stage?this.initializeStates(t.$stage):t.once(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this))),s.PropertyEvent.dispatchPropertyEvent(this,s.PropertyEvent.PROPERTY_CHANGE,"hostComponent"))}),n.onAddedToStage=function(t){this.initializeStates(this._hostComponent.$stage)},e}(egret.EventDispatcher);s.Skin=t,egret.registerClass(t,"eui.Skin"),s.sys.mixin(t,s.sys.StateClient),s.registerProperty(t,"elementsContent","Array",!0),s.registerProperty(t,"states","State[]"),s.registerBindable(t.prototype,"hostComponent")}(eui||(eui={})),function(n){var t=function(i){function t(){i.call(this),this.indexBeingUpdated=!1,this.requireSelection=!0,this.useVirtualLayout=!1}__extends(t,i);__define;var e=t.prototype;return e.createChildren=function(){if(!this.$layout){var t=new n.HorizontalLayout;t.gap=0,t.horizontalAlign=n.JustifyAlign.JUSTIFY,t.verticalAlign=n.JustifyAlign.CONTENT_JUSTIFY,this.$setLayout(t)}i.prototype.createChildren.call(this)},e.$setDataProvider=function(t){var e=this.$dataProvider;return e&&e instanceof n.ViewStack&&(e.removeEventListener(n.PropertyEvent.PROPERTY_CHANGE,this.onViewStackIndexChange,this),this.removeEventListener(egret.Event.CHANGE,this.onIndexChanged,this)),t&&t instanceof n.ViewStack&&(t.addEventListener(n.PropertyEvent.PROPERTY_CHANGE,this.onViewStackIndexChange,this),this.addEventListener(egret.Event.CHANGE,this.onIndexChanged,this)),i.prototype.$setDataProvider.call(this,t)},e.onIndexChanged=function(t){this.indexBeingUpdated=!0,this.$dataProvider.selectedIndex=this.selectedIndex,this.indexBeingUpdated=!1},e.onViewStackIndexChange=function(t){"selectedIndex"!=t.property||this.indexBeingUpdated||this.setSelectedIndex(this.$dataProvider.selectedIndex,!1)},t}(n.ListBase);n.TabBar=t,egret.registerClass(t,"eui.TabBar")}(eui||(eui={})),function(s){var r=egret.FocusEvent,t=function(n){function t(){n.call(this),this.isFocus=!1,this.$TextInput={0:null,1:null,2:null,3:null,4:null,5:null,6:"",7:null}}__extends(t,n);var e=__define,i=t.prototype;return e(i,"prompt",function(){return this.promptDisplay?this.promptDisplay.text:this.$TextInput[0]},function(t){this.$TextInput[0]=t,this.promptDisplay&&(this.promptDisplay.text=t),this.invalidateProperties(),this.invalidateState()}),e(i,"displayAsPassword",function(){if(this.textDisplay)return this.textDisplay.displayAsPassword;var t=this.$TextInput[1];return t||!1},function(t){this.$TextInput[1]=t,this.textDisplay&&(this.textDisplay.displayAsPassword=t),this.invalidateProperties()}),e(i,"textColor",function(){return this.textDisplay?this.textDisplay.textColor:this.$TextInput[2]},function(t){this.$TextInput[2]=t,this.textDisplay&&(this.textDisplay.textColor=t),this.invalidateProperties()}),e(i,"maxChars",function(){if(this.textDisplay)return this.textDisplay.maxChars;var t=this.$TextInput[3];return t||0},function(t){this.$TextInput[3]=t,this.textDisplay&&(this.textDisplay.maxChars=t),this.invalidateProperties()}),e(i,"maxWidth",function(){if(this.textDisplay)return this.textDisplay.maxWidth;var t=this.$TextInput[4];return t||1e5},function(t){this.$TextInput[4]=t,this.textDisplay&&(this.textDisplay.maxWidth=t),this.invalidateProperties()}),e(i,"maxHeight",function(){this.textDisplay;var t=this.$TextInput[5];return t||1e5},function(t){this.$TextInput[5]=t,this.textDisplay&&(this.textDisplay.maxHeight=t),this.invalidateProperties()}),e(i,"text",function(){return this.textDisplay?this.textDisplay.text:this.$TextInput[6]},function(t){this.$TextInput[6]=t,this.textDisplay&&(this.textDisplay.text=t),this.invalidateProperties(),this.invalidateState()}),e(i,"restrict",function(){return this.textDisplay?this.textDisplay.restrict:this.$TextInput[7]},function(t){this.$TextInput[7]=t,this.textDisplay&&(this.textDisplay.restrict=t),this.invalidateProperties()}),i.focusInHandler=function(t){this.isFocus=!0,this.invalidateState()},i.focusOutHandler=function(t){this.isFocus=!1,this.invalidateState()},i.getCurrentState=function(){var t=this.skin;return!this.prompt||this.isFocus||this.text?this.enabled?"normal":"disabled":this.enabled&&t.hasState("normalWithPrompt")?"normalWithPrompt":!this.enabled&&t.hasState("disabledWithPrompt")?"disabledWithPrompt":void 0},i.partAdded=function(t,e){n.prototype.partAdded.call(this,t,e);var i=this.$TextInput;e==this.textDisplay?(this.textDisplayAdded(),this.textDisplay instanceof s.EditableText&&(this.textDisplay.addEventListener(r.FOCUS_IN,this.focusInHandler,this),this.textDisplay.addEventListener(r.FOCUS_OUT,this.focusOutHandler,this))):e==this.promptDisplay&&i[0]&&(this.promptDisplay.text=i[0])},i.partRemoved=function(t,e){n.prototype.partRemoved.call(this,t,e),e==this.textDisplay?(this.textDisplayRemoved(),this.textDisplay instanceof s.EditableText&&(this.textDisplay.removeEventListener(r.FOCUS_IN,this.focusInHandler,this),this.textDisplay.removeEventListener(r.FOCUS_OUT,this.focusOutHandler,this))):e==this.promptDisplay&&(this.$TextInput[0]=this.promptDisplay.text)},i.textDisplayAdded=function(){var t=this.$TextInput;t[1]&&(this.textDisplay.displayAsPassword=t[1]),t[2]&&(this.textDisplay.textColor=t[2]),t[3]&&(this.textDisplay.maxChars=t[3]),t[4]&&(this.textDisplay.maxWidth=t[4]),t[5]&&(this.textDisplay.maxHeight=t[5]),t[6]&&(this.textDisplay.text=t[6]),t[7]&&(this.textDisplay.restrict=t[7])},i.textDisplayRemoved=function(){var t=this.$TextInput;t[1]=this.textDisplay.displayAsPassword,t[2]=this.textDisplay.textColor,t[3]=this.textDisplay.maxChars,t[4]=this.textDisplay.maxWidth,t[5]=this.textDisplay.maxHeight,t[6]=this.textDisplay.text,t[7]=this.textDisplay.restrict},t}(s.Component);s.TextInput=t,egret.registerClass(t,"eui.TextInput")}(eui||(eui={})),function(t){var e=function(t){function e(){t.call(this)}__extends(e,t);__define;return e}(t.ToggleButton);t.ToggleSwitch=e,egret.registerClass(e,"eui.ToggleSwitch")}(eui||(eui={})),function(t){var e=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveFromStage,this)}__extends(e,t);__define;var i=e.prototype;return i.onAddToStage=function(t){this.$stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this.onResize()},i.onRemoveFromStage=function(t){this.$stage.removeEventListener(egret.Event.RESIZE,this.onResize,this)},i.onResize=function(t){var e=this.$stage;this.$setWidth(e.$stageWidth),this.$setHeight(e.$stageHeight)},e}(t.Group);t.UILayer=e,egret.registerClass(e,"eui.UILayer")}(eui||(eui={})),function(t){var e=function(c){function t(){c.apply(this,arguments)}__extends(t,c);__define;var e=t.prototype;return e.updateDisplayList=function(t,e){c.prototype.updateDisplayList.call(this,t,e);var i=this.thumb,n=this.$viewport;if(i&&n){var s=egret.$TempRectangle;i.getPreferredBounds(s);var r=s.height,a=s.x,o=n.scrollV,h=n.contentHeight,l=n.height;if(o<=0){var u=r*(1- -o/(.5*l));u=Math.max(5,Math.round(u)),i.setLayoutBoundsSize(NaN,u),i.setLayoutBoundsPosition(a,0)}else if(h-l<=o)u=r*(1-(o-h+l)/(.5*l)),u=Math.max(5,Math.round(u)),i.setLayoutBoundsSize(NaN,u),i.setLayoutBoundsPosition(a,e-u);else{var d=(e-r)*o/(h-l);i.setLayoutBoundsSize(NaN,NaN),i.setLayoutBoundsPosition(a,d)}}},e.onPropertyChanged=function(t){switch(t.property){case"scrollV":case"contentHeight":this.invalidateDisplayList()}},t}(t.ScrollBarBase);t.VScrollBar=e,egret.registerClass(e,"eui.VScrollBar")}(eui||(eui={})),function(t){var e=function(t){function e(){t.call(this)}__extends(e,t);__define;var i=e.prototype;return i.pointToValue=function(t,e){if(!this.thumb||!this.track)return 0;var i=this.$Range,n=i[0]-i[2],s=this.getThumbRange();return i[2]+(0!=s?(s-e)/s*n:0)},i.getThumbRange=function(){var t=egret.$TempRectangle;this.track.getLayoutBounds(t);var e=t.height;return this.thumb.getLayoutBounds(t),e-t.height},i.updateSkinDisplayList=function(){if(this.thumb&&this.track){var t=this.$Range,e=this.getThumbRange(),i=t[0]-t[2],n=0<i?e-(this.pendingValue-t[2])/i*e:0,s=this.track.localToGlobal(0,n,egret.$TempPoint),r=s.x,a=s.y,o=this.thumb.$parent.globalToLocal(r,a,egret.$TempPoint).y,h=egret.$TempRectangle,l=h.height;if(this.thumb.getLayoutBounds(h),this.thumb.setLayoutBoundsPosition(h.x,Math.round(o)),this.trackHighlight){var u=this.trackHighlight.$parent.globalToLocal(r,a,egret.$TempPoint).y;this.trackHighlight.y=Math.round(u+l),this.trackHighlight.height=Math.round(e-u)}}},e}(t.SliderBase);t.VSlider=e,egret.registerClass(e,"eui.VSlider")}(eui||(eui={})),function(s){var t=function(n){function t(){n.call(this),this._selectedChild=null,this.proposedSelectedIndex=s.ListBase.NO_PROPOSED_SELECTION,this._selectedIndex=-1}__extends(t,n);var e=__define,i=t.prototype;return e(i,"layout",function(){return this.$layout}),e(i,"selectedChild",function(){var t=this.selectedIndex;return 0<=t&&t<this.numChildren?this.getChildAt(t):null},function(t){var e=this.getChildIndex(t);0<=e&&e<this.numChildren&&this.setSelectedIndex(e)}),e(i,"selectedIndex",function(){return this.proposedSelectedIndex!=s.ListBase.NO_PROPOSED_SELECTION?this.proposedSelectedIndex:this._selectedIndex},function(t){t=0|+t,this.setSelectedIndex(t)}),i.setSelectedIndex=function(t){t!=this.selectedIndex&&(this.proposedSelectedIndex=t,this.invalidateProperties(),s.PropertyEvent.dispatchPropertyEvent(this,s.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"))},i.$childAdded=function(t,e){n.prototype.$childAdded.call(this,t,e),this.showOrHide(t,!1);var i=this.selectedIndex;-1==i?this.setSelectedIndex(e):e<=this.selectedIndex&&this.$stage&&this.setSelectedIndex(i+1),s.CollectionEvent.dispatchCollectionEvent(this,s.CollectionEvent.COLLECTION_CHANGE,s.CollectionEventKind.ADD,e,-1,[t.name])},i.$childRemoved=function(t,e){n.prototype.$childRemoved.call(this,t,e),this.showOrHide(t,!0);var i=this.selectedIndex;e==i?0<this.numChildren?0==e?(this.proposedSelectedIndex=0,this.invalidateProperties()):this.setSelectedIndex(0):this.setSelectedIndex(-1):e<i&&this.setSelectedIndex(i-1),s.CollectionEvent.dispatchCollectionEvent(this,s.CollectionEvent.COLLECTION_CHANGE,s.CollectionEventKind.REMOVE,e,-1,[t.name])},i.commitProperties=function(){n.prototype.commitProperties.call(this),this.proposedSelectedIndex!=s.ListBase.NO_PROPOSED_SELECTION&&(this.commitSelection(this.proposedSelectedIndex),this.proposedSelectedIndex=s.ListBase.NO_PROPOSED_SELECTION)},i.commitSelection=function(t){0<=t&&t<this.numChildren?(this._selectedIndex=t,this._selectedChild&&this.showOrHide(this._selectedChild,!1),this._selectedChild=this.getElementAt(this._selectedIndex),this.showOrHide(this._selectedChild,!0)):(this._selectedChild=null,this._selectedIndex=-1),this.invalidateSize(),this.invalidateDisplayList()},i.showOrHide=function(t,e){egret.is(t,"eui.UIComponent")&&(t.includeInLayout=e),t.visible=e},e(i,"length",function(){return this.$children.length}),i.getItemAt=function(t){var e=this.$children[t];return e?e.name:""},i.getItemIndex=function(t){for(var e=this.$children,i=e.length,n=0;n<i;n++)if(e[n].name==t)return n;return-1},t}(s.Group);s.ViewStack=t,egret.registerClass(t,"eui.ViewStack",["eui.ICollection","egret.IEventDispatcher"]),s.registerBindable(t.prototype,"selectedIndex"),DEBUG&&(egret.$markReadOnly(t,"length"),egret.$markReadOnly(t,"layout"))}(eui||(eui={})),function(t){!function(t){function i(t){return-.5*(Math.cos(Math.PI*t)-1)}var e=function(){function t(t,e){this.easerFunction=i,this.isPlaying=!1,this.duration=500,this.currentValue=0,this.from=0,this.to=0,this.startTime=0,this.endFunction=null,this.updateFunction=t,this.thisObject=e}__define;var e=t.prototype;return e.play=function(){this.stop(),this.start()},e.start=function(){this.isPlaying=!1,this.currentValue=0,this.startTime=egret.getTimer(),this.doInterval(this.startTime),egret.startTick(this.doInterval,this)},e.stop=function(){this.isPlaying=!1,this.startTime=0,egret.stopTick(this.doInterval,this)},e.doInterval=function(t){var e=t-this.startTime;this.isPlaying||(this.isPlaying=!0);var i=this.duration,n=0==i?1:Math.min(e,i)/i;this.easerFunction&&(n=this.easerFunction(n)),this.currentValue=this.from+(this.to-this.from)*n,this.updateFunction&&this.updateFunction.call(this.thisObject,this);var s=i<=e;return s&&this.stop(),s&&this.endFunction&&this.endFunction.call(this.thisObject,this),!0},t}();t.Animation=e,egret.registerClass(e,"eui.sys.Animation")}(t.sys||(t.sys={}))}(eui||(eui={})),function(t){var e=function(){function t(){}__define;return t.prototype.getTheme=function(t,i,e,n){var s=new egret.HttpRequest;s.addEventListener(egret.Event.COMPLETE,function(t){var e=t.target;i.call(n,e.response)},n),s.addEventListener(egret.IOErrorEvent.IO_ERROR,function(t){e.call(n)},n),s.responseType=egret.HttpResponseType.TEXT,s.open(t),s.send()},t}();t.DefaultThemeAdapter=e,egret.registerClass(e,"eui.DefaultThemeAdapter",["eui.IThemeAdapter"])}(eui||(eui={})),function(t){!function(n){var c=[1,1.33,1.66,2],p=Math.log(.998);function s(t){var e=t-1;return e*e*e+1}var t=function(){function t(t,e,i){this.$scrollFactor=1,this.previousTime=0,this.velocity=0,this.previousVelocity=[],this.currentPosition=0,this.previousPosition=0,this.currentScrollPos=0,this.maxScrollPos=0,this.offsetPoint=0,this.$bounces=!0,this.started=!0,DEBUG&&!t&&egret.$error(1003,"updateFunction"),this.updateFunction=t,this.endFunction=e,this.target=i,this.animation=new n.Animation(this.onScrollingUpdate,this),this.animation.endFunction=this.finishScrolling,this.animation.easerFunction=s}__define;var e=t.prototype;return e.isPlaying=function(){return this.animation.isPlaying},e.stop=function(){this.animation.stop(),egret.stopTick(this.onTick,this),this.started=!1},e.isStarted=function(){return this.started},e.start=function(t){this.started=!0,this.velocity=0,this.previousVelocity.length=0,this.previousTime=egret.getTimer(),this.previousPosition=this.currentPosition=t,this.offsetPoint=t,egret.startTick(this.onTick,this)},e.update=function(t,e,i){e=Math.max(e,0),this.currentPosition=t,this.maxScrollPos=e;var n=this.offsetPoint-t,s=n+i;this.offsetPoint=t,s<0&&(this.$bounces?s-=.5*n:s=0),e<s&&(this.$bounces?s-=.5*n:s=e),this.currentScrollPos=s,this.updateFunction.call(this.target,s)},e.finish=function(t,e){egret.stopTick(this.onTick,this),this.started=!1;for(var i=2.33*this.velocity,n=this.previousVelocity,s=n.length,r=2.33,a=0;a<s;a++){var o=c[a];i+=n[0]*o,r+=o}var h=i/r,l=Math.abs(h),u=0,d=0;if(.02<l)if((d=t+(h-.02)/p*2*this.$scrollFactor)<0||e<d)for(d=t;.02<Math.abs(h);)h*=(d-=h)<0||e<d?.998*.95:.998,u++;else u=Math.log(.02/l)/p;else d=t;this.target.$getThrowInfo&&(d=this.target.$getThrowInfo(t,d).toPos);0<u?(this.$bounces||(d<0?d=0:e<d&&(d=e)),this.throwTo(d,u)):this.finishScrolling()},e.onTick=function(t){var e=t-this.previousTime;if(10<e){var i=this.previousVelocity;4<=i.length&&i.shift(),this.velocity=(this.currentPosition-this.previousPosition)/e,i.push(this.velocity),this.previousTime=t,this.previousPosition=this.currentPosition}return!0},e.finishScrolling=function(t){var e=this.currentScrollPos,i=this.maxScrollPos,n=e;e<0&&(n=0),i<e&&(n=i),this.throwTo(n,300)},e.throwTo=function(t,e){void 0===e&&(e=500);var i=this.currentScrollPos;if(i!=t){var n=this.animation;n.duration=e,n.from=i,n.to=t,n.play()}else this.endFunction.call(this.target)},e.onScrollingUpdate=function(t){this.currentScrollPos=t.currentValue,this.updateFunction.call(this.target,t.currentValue)},t}();n.TouchScroll=t,egret.registerClass(t,"eui.sys.TouchScroll")}(t.sys||(t.sys={}))}(eui||(eui={})),function(t){var e=function(){function t(){}__define;return t.LTR="ltr",t.RTL="rtl",t.TTB="ttb",t.BTT="btt",t}();t.Direction=e,egret.registerClass(e,"eui.Direction")}(eui||(eui={})),function(t){var e=function(){function t(){}__define;return t.AUTO="auto",t.OFF="off",t.ON="on",t}();t.ScrollPolicy=e,egret.registerClass(e,"eui.ScrollPolicy")}(eui||(eui={})),function(n){var t=function(i){function t(t,e){i.call(this),this.delayList=[],this.skinMap={},this.initialized=!t,e&&(this.$stage=e,(EXML.$stage=e).registerImplementation("eui.Theme",this)),this.$configURL=t,this.load(t)}__extends(t,i);__define;var e=t.prototype;return e.load=function(t){var e=this.$stage?this.$stage.getImplementation("eui.IThemeAdapter"):null;e||(e=new n.DefaultThemeAdapter),e.getTheme(t,this.onConfigLoaded,this.onConfigLoaded,this)},e.onConfigLoaded=function(t){if(t)try{var e=JSON.parse(t)}catch(t){DEBUG&&egret.$error(3e3)}else DEBUG&&egret.$error(3e3,this.$configURL);if(e&&e.skins)for(var i=this.skinMap,n=e.skins,s=Object.keys(n),r=s.length,a=0;a<r;a++){var o=s[a];i[o]||this.mapSkin(o,n[o])}e.exmls&&0!=e.exmls.length?e.exmls[0].content?(e.exmls.forEach(function(t){return EXML.$parseURLContent(t.path,t.content)}),this.onLoaded()):EXML.$loadAll(e.exmls,this.onLoaded,this,!0):this.onLoaded()},e.onLoaded=function(t,e){this.initialized=!0,this.handleDelayList(),this.dispatchEventWith(egret.Event.COMPLETE)},e.handleDelayList=function(){for(var t=this.delayList,e=t.length,i=0;i<e;i++){var n=t[i];if(!n.$Component[5]){var s=this.getSkinName(n);s&&(n.$Component[1]=s,n.$parseSkinName())}}t.length=0},e.getSkinName=function(t){if(!this.initialized)return-1==this.delayList.indexOf(t)&&this.delayList.push(t),"";var e=this.skinMap[t.hostComponentKey];return e||(e=this.findSkinName(t)),e},e.findSkinName=function(t){if(!t)return"";var e=t.__class__;if(void 0===e)return"";var i=this.skinMap[e];return i||"eui.Component"==e?i:this.findSkinName(Object.getPrototypeOf(t))},e.mapSkin=function(t,e){DEBUG&&(t||egret.$error(1003,"hostComponentKey"),e||egret.$error(1003,"skinName")),this.skinMap[t]=e},t}(egret.EventDispatcher);n.Theme=t,egret.registerClass(t,"eui.Theme")}(eui||(eui={})),function(t){var e=function(h){function l(t,e,i,n,s,r,a,o){h.call(this,t,e,i),this.$initTo(n,s,r,a,o)}__extends(l,h);__define;var t=l.prototype;return t.$initTo=function(t,e,i,n,s){this.kind=t,this.location=0|+e,this.oldLocation=0|+i,this.items=n||[],this.oldItems=s||[]},t.clean=function(){h.prototype.clean.call(this),this.items=this.oldItems=null},l.dispatchCollectionEvent=function(t,e,i,n,s,r,a){if(!t.hasEventListener(e))return!0;var o=egret.Event.create(l,e);o.$initTo(i,n,s,r,a);var h=t.dispatchEvent(o);return egret.Event.release(o),h},l.COLLECTION_CHANGE="collectionChange",l}(egret.Event);t.CollectionEvent=e,egret.registerClass(e,"eui.CollectionEvent")}(eui||(eui={})),function(t){var e=function(){function t(){}__define;return t.ADD="add",t.REFRESH="refresh",t.REMOVE="remove",t.REPLACE="replace",t.RESET="reset",t.UPDATE="update",t}();t.CollectionEventKind=e,egret.registerClass(e,"eui.CollectionEventKind")}(eui||(eui={})),function(t){var e=function(t){function r(){t.apply(this,arguments),this.item=null,this.itemRenderer=null,this.itemIndex=-1}__extends(r,t);__define;return r.prototype.clean=function(){t.prototype.clean.call(this),this.item=this.itemRenderer=null},r.dispatchItemTapEvent=function(t,e,i){if(!t.hasEventListener(e))return!0;var n=egret.Event.create(r,e);n.item=i.data,n.itemIndex=i.itemIndex,n.itemRenderer=i;var s=t.dispatchEvent(n);return egret.Event.release(n),s},r.ITEM_TAP="itemTap",r}(egret.Event);t.ItemTapEvent=e,egret.registerClass(e,"eui.ItemTapEvent")}(eui||(eui={})),function(t){var e=function(s){function r(t,e,i,n){s.call(this,t,e,i),this.property=n}__extends(r,s);__define;return r.dispatchPropertyEvent=function(t,e,i){if(!t.hasEventListener(e))return!0;var n=egret.Event.create(r,e);n.property=i;var s=t.dispatchEvent(n);return egret.Event.release(n),s},r.PROPERTY_CHANGE="propertyChange",r}(egret.Event);t.PropertyEvent=e,egret.registerClass(e,"eui.PropertyEvent")}(eui||(eui={})),function(t){var e=function(r){function t(t,e,i,n,s){r.call(this,t,e,i),n=+n,s=+s,this.currentPos=n,this.toPos=s}__extends(t,r);__define;return t.THROW="throw",t}(egret.Event);t.ScrollerThrowEvent=e,egret.registerClass(e,"eui.ScrollerThrowEvent")}(eui||(eui={})),function(t){var e=function(n){function a(t,e,i){n.call(this,t,e,i)}__extends(a,n);__define;return a.dispatchUIEvent=function(t,e,i,n){if(!t.hasEventListener(e))return!0;var s=egret.Event.create(a,e,i,n),r=t.dispatchEvent(s);return egret.Event.release(s),r},a.CREATION_COMPLETE="creationComplete",a.CHANGE_END="changeEnd",a.CHANGE_START="changeStart",a.CLOSING="closing",a.MOVE="move",a}(egret.Event);t.UIEvent=e,egret.registerClass(e,"eui.UIEvent")}(eui||(eui={})),function(t){!function(t){var e=function(){function t(){this.indent=0}__define;var e=t.prototype;return e.toCode=function(){return""},e.getIndent=function(t){void 0===t&&(t=this.indent);for(var e="",i=0;i<t;i++)e+="\t";return e},t}();t.CodeBase=e,egret.registerClass(e,"eui.sys.CodeBase");var i=function(t){function e(){t.apply(this,arguments),this.className="",this.superClass="",this.innerClassBlock=[],this.variableBlock=[],this.functionBlock=[]}__extends(e,t);__define;var i=e.prototype;return i.addInnerClass=function(t){-1==this.innerClassBlock.indexOf(t)&&this.innerClassBlock.push(t)},i.addVariable=function(t){-1==this.variableBlock.indexOf(t)&&this.variableBlock.push(t)},i.getVariableByName=function(t){for(var e=this.variableBlock,i=e.length,n=0;n<i;n++){var s=e[n];if(s.name==t)return s}return null},i.addFunction=function(t){-1==this.functionBlock.indexOf(t)&&this.functionBlock.push(t)},i.getFuncByName=function(t){for(var e=this.functionBlock,i=e.length,n=0;n<i;n++){var s=e[n];if(s.name==t)return s}return null},i.toCode=function(){var t=this.indent,e=this.getIndent(t),i=this.getIndent(t+1),n=this.getIndent(t+2),s=e+"(function (";this.superClass?s+="_super) {\n"+i+"__extends("+this.className+", _super);\n":s+=") {\n";for(var r=this.innerClassBlock,a=r.length,o=0;o<a;o++){var h=r[o];h.indent=t+1,s+=i+"var "+h.className+" = "+h.toCode()+"\n\n"}s+=i+"function "+this.className+"() {\n",this.superClass&&(s+=n+"_super.call(this);\n");var l=this.variableBlock;for(a=l.length,o=0;o<a;o++){var u=l[o];u.defaultValue&&(s+=n+u.toCode()+"\n")}if(this.constructCode){var d=this.constructCode.toCode().split("\n");for(a=d.length,o=0;o<a;o++){s+=n+d[o]+"\n"}}s+=i+"}\n",s+=i+"var _proto = "+this.className+".prototype;\n\n";var c=this.functionBlock;for(a=c.length,o=0;o<a;o++){var p=c[o];p.indent=t+1,s+=p.toCode()+"\n"}return s+=i+"return "+this.className+";\n"+e,this.superClass?s+="})("+this.superClass+");":s+="})();",s},e}(e);t.EXClass=i,egret.registerClass(i,"eui.sys.EXClass");var n=function(t){function e(){t.apply(this,arguments),this.lines=[]}__extends(e,t);__define;var i=e.prototype;return i.addVar=function(t,e){var i=e?" = "+e:"";this.addCodeLine("var "+t+i+";")},i.addAssignment=function(t,e,i){var n=i?"."+i:"";this.addCodeLine(t+n+" = "+e+";")},i.addReturn=function(t){this.addCodeLine("return "+t+";")},i.addEmptyLine=function(){this.addCodeLine("")},i.startIf=function(t){this.addCodeLine("if("+t+")"),this.startBlock()},i.startElse=function(){this.addCodeLine("else"),this.startBlock()},i.startElseIf=function(t){this.addCodeLine("else if("+t+")"),this.startBlock()},i.startBlock=function(){this.addCodeLine("{"),this.indent++},i.endBlock=function(){this.indent--,this.addCodeLine("}")},i.doFunction=function(t,e){var i=e.join(",");this.addCodeLine(t+"("+i+")")},i.addCodeLine=function(t){this.lines.push(this.getIndent()+t)},i.addCodeLineAt=function(t,e){this.lines.splice(e,0,this.getIndent()+t)},i.containsCodeLine=function(t){return-1!=this.lines.indexOf(t)},i.concat=function(t){this.lines=this.lines.concat(t.lines)},i.toCode=function(){return this.lines.join("\n")},e}(e);t.EXCodeBlock=n,egret.registerClass(n,"eui.sys.EXCodeBlock");var s=function(t){function e(){t.apply(this,arguments),this.codeBlock=null,this.isGet=!1,this.name=""}__extends(e,t);__define;return e.prototype.toCode=function(){var t,e=this.getIndent(),i=this.getIndent(this.indent+1),n=e;if(this.isGet?(t=this.getIndent(this.indent+2),n+='Object.defineProperty(_proto, "skinParts", {\n',n+=i+"get: function () {\n"):(t=i,n+="_proto."+this.name+" = function () {\n"),this.codeBlock)for(var s=this.codeBlock.toCode().split("\n"),r=s.length,a=0;a<r;a++){n+=t+s[a]+"\n"}return this.isGet?n+=i+"},\n"+i+"enumerable: true,\n"+i+"configurable: true\n"+e+"});":n+=e+"};",n},e}(e);t.EXFunction=s,egret.registerClass(s,"eui.sys.EXFunction");var r=function(i){function t(t,e){i.call(this),this.indent=2,this.name=t,this.defaultValue=e}__extends(t,i);__define;return t.prototype.toCode=function(){return this.defaultValue?"this."+this.name+" = "+this.defaultValue+";":""},t}(e);t.EXVariable=r,egret.registerClass(r,"eui.sys.EXVariable");var a=function(i){function t(t,e){i.call(this),this.name="",this.stateGroups=[],this.addItems=[],this.setProperty=[],this.name=t,e&&(this.stateGroups=e)}__extends(t,i);__define;var e=t.prototype;return e.addOverride=function(t){t instanceof o?this.addItems.push(t):this.setProperty.push(t)},e.toCode=function(){for(var t=this.getIndent(1),e='new eui.State ("'+this.name+'",\n'+t+"[\n",i=0,n=!0,s=this.addItems.concat(this.setProperty);i<s.length;){n?n=!1:e+=",\n";for(var r=s[i].toCode().split("\n"),a=r.length,o=0;o<a;o++){var h=r[o];r[o]=t+t+h}e+=r.join("\n"),i++}return e+="\n"+t+"])"},t}(e);t.EXState=a,egret.registerClass(a,"eui.sys.EXState");var o=function(s){function t(t,e,i,n){s.call(this),this.target=t,this.property=e,this.position=i,this.relativeTo=n}__extends(t,s);__define;return t.prototype.toCode=function(){return'new eui.AddItems("'+this.target+'","'+this.property+'",'+this.position+',"'+this.relativeTo+'")'},t}(e);t.EXAddItems=o,egret.registerClass(o,"eui.sys.EXAddItems");var h=function(n){function t(t,e,i){n.call(this),this.target=t,this.name=e,this.value=i}__extends(t,n);__define;return t.prototype.toCode=function(){return'new eui.SetProperty("'+this.target+'","'+this.name+'",'+this.value+")"},t}(e);t.EXSetProperty=h,egret.registerClass(h,"eui.sys.EXSetProperty");var l=function(n){function t(t,e,i){n.call(this),this.target=t,this.property=e,this.expression=i}__extends(t,n);__define;return t.prototype.toCode=function(){return"new eui.SetStateProperty(this, ["+this.expression.split(".").join('","')+"], this."+this.target+',"'+this.property+'")'},t}(e);t.EXSetStateProperty=l,egret.registerClass(l,"eui.sys.EXSetStateProperty");var u=function(n){function t(t,e,i){n.call(this),this.target=t,this.property=e,this.expression=i}__extends(t,n);__define;return t.prototype.toCode=function(){return'eui.Binding.bindProperty(this, ["'+this.expression.split(".").join('","')+'"], this.'+this.target+',"'+this.property+'")'},t}(e);t.EXBinding=u,egret.registerClass(u,"eui.sys.EXBinding")}(t.sys||(t.sys={}))}(eui||(eui={})),function(eui){var sys;!function(sys){var exmlParserPool=[],parsedClasses={},innerClassCount=1,HOST_COMPONENT="hostComponent",SKIN_CLASS="eui.Skin",DECLARATIONS="Declarations",RECTANGLE="egret.Rectangle",TYPE_CLASS="Class",TYPE_ARRAY="Array",TYPE_STATE="State[]",SKIN_NAME="skinName",ELEMENTS_CONTENT="elementsContent",basicTypes=[TYPE_ARRAY,"boolean","string","number"],wingKeys=["id","locked","includeIn","excludeFrom"],htmlEntities=[["<","&lt;"],[">","&gt;"],["&","&amp;"],['"',"&quot;"],["'","&apos;"]],EXMLParser=function(){function EXMLParser(){this.delayAssignmentDic={},DEBUG&&(this.repeatedIdMap={},this.getRepeatedIds=getRepeatedIds,this.getIds=getIds,this.checkDeclarations=checkDeclarations)}var d=__define,c=EXMLParser,p=c.prototype;return p.parse=function(text){DEBUG&&(text||egret.$error(1003,"text"));try{var xmlData=egret.XML.parse(text)}catch(t){DEBUG&&egret.$error(2002,text+"\n"+t.message)}var className="",hasClass=!1;xmlData.attributes.class?(className=xmlData.attributes.class,delete xmlData.attributes.class,hasClass=!!className):className="$exmlClass"+innerClassCount++;var exClass=this.parseClass(xmlData,className),code=exClass.toCode();try{var clazz=eval(code)}catch(t){return DEBUG&&egret.log(code),null}if(hasClass&&clazz){egret.registerClass(clazz,className);for(var paths=className.split("."),length=paths.length,definition=__global,i=0;i<length-1;i++){var path=paths[i];definition=definition[path]||(definition[path]={})}definition[paths[length-1]]?DEBUG&&!parsedClasses[className]&&egret.$warn(2101,className,toXMLString(xmlData)):(DEBUG&&(parsedClasses[className]=!0),definition[paths[length-1]]=clazz)}return clazz},p.parseClass=function(t,e){sys.exmlConfig||(sys.exmlConfig=new sys.EXMLConfig),this.currentXML=t,this.currentClassName=e,this.delayAssignmentDic={},this.idDic={},this.stateCode=[],this.stateNames=[],this.skinParts=[],this.bindings=[],this.declarations=null,this.currentClass=new sys.EXClass,this.stateIds=[];var i=e.lastIndexOf(".");this.currentClass.className=-1!=i?e.substring(i+1):e,this.startCompile();var n=this.currentClass;return this.currentClass=null,n},p.startCompile=function(){if(DEBUG){var t=this.getRepeatedIds(this.currentXML);0<t.length&&egret.$error(2004,this.currentClassName,t.join("\n"))}var e=this.getClassNameOfNode(this.currentXML);this.isSkinClass=e==SKIN_CLASS,this.currentClass.superClass=e,this.getStateNames();var i=this.currentXML.children;if(i)for(var n=i.length,s=0;s<n;s++){var r=i[s];if(1===r.nodeType&&r.namespace==sys.NS_W&&r.localName==DECLARATIONS){this.declarations=r;break}}if(DEBUG){var a=[];this.checkDeclarations(this.declarations,a),0<a.length&&egret.$error(2020,this.currentClassName,a.join("\n"))}this.currentXML.namespace?(this.addIds(this.currentXML.children),this.createConstructFunc()):DEBUG&&egret.$error(2017,this.currentClassName,toXMLString(this.currentXML))},p.addIds=function(t){if(t)for(var e=t.length,i=0;i<e;i++){var n=t[i];if(1==n.nodeType)if(n.namespace){if(!this.isInnerClass(n))if(this.addIds(n.children),n.namespace!=sys.NS_W&&n.localName){if(this.isProperty(n)){var s=n.localName.indexOf("."),r=n.children;if(-1==s||!r||0==r.length)continue;var a=r[0];this.stateIds.push(a.attributes.id)}else if(1===n.nodeType){var o=n.attributes.id;o?(-1==this.skinParts.indexOf(o)&&this.skinParts.push(o),this.createVarForNode(n),this.isStateNode(n)&&this.stateIds.push(o)):(this.createIdForNode(n),this.isStateNode(n)&&this.stateIds.push(n.attributes.id))}}else;}else DEBUG&&egret.$error(2017,this.currentClassName,toXMLString(n))}},p.isInnerClass=function(t){if(t.hasOwnProperty("isInnerClass"))return t.isInnerClass;var e="Skin"==t.localName&&t.namespace==sys.NS_S;if(!e)if(this.isProperty(t))e=!1;else{var i=t.parent;if(this.isProperty(i)){var n=i.localName,s=n.indexOf(".");if(-1!=s){n.substring(s+1);n=n.substring(0,s)}i=i.parent}else n=sys.exmlConfig.getDefaultPropById(i.localName,i.namespace);var r=sys.exmlConfig.getClassNameById(i.localName,i.namespace);e=sys.exmlConfig.getPropertyType(n,r)==TYPE_CLASS}return t.isInnerClass=e},p.containsState=function(t){var e=t.attributes;if(e.includeIn)return!0;for(var i=Object.keys(e),n=i.length,s=0;s<n;s++){if(-1!=i[s].indexOf("."))return!0}return!1},p.createIdForNode=function(t){var e=this.getNodeId(t);this.idDic[e]?this.idDic[e]++:this.idDic[e]=1,e+=this.idDic[e],t.attributes.id=e},p.getNodeId=function(t){return t.attributes.id?t.attributes.id:"_"+t.localName},p.createVarForNode=function(t){""!=this.getClassNameOfNode(t)&&(this.currentClass.getVariableByName(t.attributes.id)||this.currentClass.addVariable(new sys.EXVariable(t.attributes.id)))},p.createFuncForNode=function(t){var e=t.localName;if(this.isBasicTypeData(e))return this.createBasicTypeForNode(t);var i=this.getClassNameOfNode(t),n=new sys.EXFunction,s=t.attributes.id;n.name=s+"_i",this.currentClass.addFunction(n);var r=new sys.EXCodeBlock;n.codeBlock=r;"Object"==e?r.addVar("t","{}"):r.addVar("t","new "+i+"()"),!!this.currentClass.getVariableByName(s)&&r.addAssignment("this."+s,"t"),this.addAttributesToCodeBlock(r,"t",t),this.initlizeChildNode(t,r,"t");var a=this.delayAssignmentDic[s];if(a)for(var o=a.length,h=0;h<o;h++){var l=a[h];r.concat(l)}return r.addReturn("t"),"this."+n.name+"()"},p.isBasicTypeData=function(t){return-1!=basicTypes.indexOf(t)},p.createBasicTypeForNode=function(t){var e=t.localName,i="",n=this.currentClass.getVariableByName(t.attributes.id),s=t.children,r="";if(s&&0<s.length){var a=s[0];3==a.nodeType&&(r=a.text.trim())}switch(e){case TYPE_ARRAY:var o=[];if(s)for(var h=s.length,l=0;l<h;l++){var u=s[l];1==u.nodeType&&o.push(this.createFuncForNode(u))}i="["+o.join(",")+"]";break;case"boolean":i="false"!=r&&r?"true":"false";break;case"number":-1!=(i=r).indexOf("%")&&(i=i.substring(0,i.length-1));break;case"string":i=this.formatString(r)}return n&&(n.defaultValue=i),i},p.addAttributesToCodeBlock=function(t,e,i){var n,s,r=i.attributes,a=Object.keys(r);a.sort();for(var o=a.length,h=0;h<o;h++)if(n=a[h],this.isNormalKey(n)&&(s=r[n],n=this.formatKey(n,s),s=this.formatValue(n,s,i))){if(this.currentClass.getVariableByName(s)){var l="this.",u=r.id,d=l+u+" = t;";this.currentClass.getVariableByName(u)||this.createVarForNode(i),t.containsCodeLine(d)||t.addCodeLineAt(d,1);var c=new sys.EXCodeBlock;"this"==e?c.addAssignment(e,l+s,n):(c.startIf(l+u),c.addAssignment(l+u,l+s,n),c.endBlock()),this.delayAssignmentDic[s]||(this.delayAssignmentDic[s]=[]),this.delayAssignmentDic[s].push(c),s=l+s}t.addAssignment(e,s,n)}},p.initlizeChildNode=function(t,e,i){var n=t.children;if(n&&0!=n.length){for(var s=sys.exmlConfig.getClassNameById(t.localName,t.namespace),r=[],a=n.length,o=[],h=0;h<a;h++){var l=n[h];if(1==l.nodeType&&l.namespace!=sys.NS_W)if(this.isInnerClass(l)){if("Skin"==l.localName){var u=this.parseInnerClass(l);(c=sys.exmlConfig.getPropertyType(SKIN_NAME,s))?e.addAssignment(i,u,SKIN_NAME):egret.$error(2005,this.currentClassName,SKIN_NAME,getPropertyStr(l))}}else{var d=l.localName;if(this.isProperty(l)){if(!this.isNormalKey(d))continue;var c;if(!(c=sys.exmlConfig.getPropertyType(l.localName,s))){DEBUG&&egret.$error(2005,this.currentClassName,l.localName,getPropertyStr(l));continue}if(!l.children||0==l.children.length){DEBUG&&egret.$warn(2102,this.currentClassName,getPropertyStr(l));continue}if(DEBUG)var p=getPropertyStr(l);this.addChildrenToProp(l.children,c,d,e,i,p,o,t)}else r.push(l)}}if(0!=r.length){var g=sys.exmlConfig.getDefaultPropById(t.localName,t.namespace),f=sys.exmlConfig.getPropertyType(g,s);if(DEBUG)p=getPropertyStr(r[0]);g&&f?this.addChildrenToProp(r,f,g,e,i,p,o,t):DEBUG&&egret.$error(2012,this.currentClassName,p)}}},p.parseInnerClass=function(t){var e=exmlParserPool.pop();e||(e=new EXMLParser);var i=this.currentClass.className+"$"+t.localName+innerClassCount++,n=e.parseClass(t,i);return this.currentClass.addInnerClass(n),exmlParserPool.push(e),i},p.addChildrenToProp=function(t,e,i,n,s,r,a,o){var h="",l=t.length;if(1<l){if(e!=TYPE_ARRAY)return void(DEBUG&&egret.$error(2011,this.currentClassName,i,r));for(var u=[],d=0;d<l;d++){var c=t[d];if(1==c.nodeType){h=this.createFuncForNode(c);this.getClassNameOfNode(c);this.isStateNode(c)||u.push(h)}}h="["+u.join(",")+"]"}else{var p=t[0];if(e==TYPE_ARRAY)if(p.localName==TYPE_ARRAY){if(u=[],p.children)for(var g=p.children.length,f=0;f<g;f++)1==(c=p.children[f]).nodeType&&(h=this.createFuncForNode(c),this.getClassNameOfNode(c),this.isStateNode(c)||u.push(h));h="["+u.join(",")+"]"}else{h=this.createFuncForNode(p);this.getClassNameOfNode(p);h=this.isStateNode(p)?"[]":"["+h+"]"}else if(1==p.nodeType)if(e==TYPE_CLASS){if(1<l)return void(DEBUG&&egret.$error(2011,this.currentClassName,i,r));h=this.parseInnerClass(t[0])}else{this.getClassNameOfNode(p);h=this.createFuncForNode(p)}else h=this.formatValue(i,p.text,o)}""!=h&&(-1==h.indexOf("()")&&(i=this.formatKey(i,h)),-1==a.indexOf(i)?a.push(i):DEBUG&&egret.$warn(2103,this.currentClassName,i,r),n.addAssignment(s,h,i))},p.isProperty=function(t){if(t.hasOwnProperty("isProperty"))return t.isProperty;var e,i=t.localName;if(i&&1===t.nodeType&&t.parent&&!this.isBasicTypeData(i)){var n=t.parent,s=i.indexOf(".");-1!=s&&(i=i.substr(0,s));var r=sys.exmlConfig.getClassNameById(n.localName,n.namespace);e=!!sys.exmlConfig.getPropertyType(i,r)}else e=!1;return t.isProperty=e},p.isNormalKey=function(t){return!(!t||-1!=t.indexOf(".")||-1!=wingKeys.indexOf(t))},p.formatKey=function(t,e){return-1!=e.indexOf("%")&&("height"==t?t="percentHeight":"width"==t&&(t="percentWidth")),t},p.formatValue=function(t,e,i,n,s){void 0===n&&(n=!1),void 0===s&&(s=null),e||(e="");var r=e;e=e.trim();var a=this.getClassNameOfNode(i),o=sys.exmlConfig.getPropertyType(t,a);if(DEBUG&&!o&&egret.$error(2005,this.currentClassName,t,toXMLString(i)),"{"==e.charAt(0)&&"}"==e.charAt(e.length-1)){0==(e=e.substr(1,e.length-2).trim()).indexOf("this.")&&(e=e.substring(5)),this.checkIdForState(i);var h=e.split(".")[0];h!=HOST_COMPONENT&&-1==this.skinParts.indexOf(h)&&(e=HOST_COMPONENT+"."+e),n?s&&s(!0):(this.bindings.push(new sys.EXBinding(i.attributes.id,t,e)),e="")}else if(o==RECTANGLE){if(DEBUG){var l=e.split(",");(4!=l.length||isNaN(parseInt(l[0]))||isNaN(parseInt(l[1]))||isNaN(parseInt(l[2]))||isNaN(parseInt(l[3])))&&egret.$error(2016,this.currentClassName,toXMLString(i))}e="new "+RECTANGLE+"("+e+")"}else{switch(o){case TYPE_CLASS:t==SKIN_NAME&&(e=this.formatString(r));break;case"number":0==e.indexOf("#")?e="0x"+e.substring(1):-1!=e.indexOf("%")&&(e=parseFloat(e.substr(0,e.length-1)).toString());break;case"boolean":e="false"!=e&&e?"true":"false";break;case"string":case"any":e=this.formatString(r);break;default:DEBUG&&egret.$error(2008,this.currentClassName,"string",t+":"+o,toXMLString(i))}}return e},p.formatString=function(t){return t='"'+(t=(t=(t=(t=this.unescapeHTMLEntity(t)).split("\n").join("\\n")).split("\r").join("\\n")).split('"').join('\\"'))+'"'},p.unescapeHTMLEntity=function(t){if(!t)return"";for(var e=htmlEntities.length,i=0;i<e;i++){var n=htmlEntities[i],s=n[0],r=n[1];t=t.split(r).join(s)}return t},p.createConstructFunc=function(){var t=new sys.EXCodeBlock;t.addEmptyLine();var e;if(this.addAttributesToCodeBlock(t,"this",this.currentXML),this.declarations){var i=this.declarations.children;if(i&&0<i.length)for(var n=i.length,s=0;s<n;s++){var r=i[s];if(1==r.nodeType){var a=this.createFuncForNode(r);a&&t.addCodeLine(a+";")}}}this.initlizeChildNode(this.currentXML,t,"this");var o=this.stateIds;if(0<o.length){n=o.length;for(s=0;s<n;s++)e=o[s],t.addCodeLine("this."+e+"_i();");t.addEmptyLine()}var h=this.skinParts,l="[]";if(0<(n=h.length)){for(s=0;s<n;s++)h[s]='"'+h[s]+'"';l="["+h.join(",")+"]"}var u=new sys.EXFunction;u.name="skinParts",u.isGet=!0;var d,c=new sys.EXCodeBlock;c.addReturn(l),u.codeBlock=c,this.currentClass.addFunction(u),this.currentXML.attributes.id="",this.createStates(this.currentXML);for(var p=this.currentXML,g=(this.getClassNameOfNode(p),p.attributes),f=Object.keys(g),v=f.length,m=0;m<v;m++){var y=f[m],$=g[y],E=y.indexOf(".");if(-1!=E){var C=y.substring(0,E);C=this.formatKey(C,$);var _=this.formatValue(C,$,p);if(!_)continue;var T=y.substr(E+1),S=(d=this.getStateByName(T,p)).length;if(0<S)for(s=0;s<S;s++){var I=d[s];I.addOverride(new sys.EXSetProperty("",C,_))}}}var x=this.stateCode;if(0<(n=x.length)){t.addCodeLine("this.states = [");var L=!0;for(s=0;s<n;s++){I=x[s],L?L=!1:t.addCodeLine("\t,");for(var N=I.toCode().split("\n"),P=0;P<N.length;){var B=N[P];B&&t.addCodeLine("\t"+B),P++}}t.addCodeLine("];")}var D=this.bindings;if(0<(n=D.length))for(t.addEmptyLine(),s=0;s<n;s++){var R=D[s];t.addCodeLine(R.toCode())}this.currentClass.constructCode=t},p.isStateNode=function(t){var e=t.attributes;return e.hasOwnProperty("includeIn")||e.hasOwnProperty("excludeFrom")},p.getStateNames=function(){var t=this.currentXML,e=sys.exmlConfig.getClassNameById(t.localName,t.namespace);if(sys.exmlConfig.getPropertyType("states",e)==TYPE_STATE){var i=t.attributes.states;i&&delete t.attributes.states;var n,s=this.stateNames,r=t.children;if(r)for(var a=r.length,o=0;o<a;o++){var h=r[o];if(1==h.nodeType&&"states"==h.localName){h.namespace=sys.NS_W,n=h.children;break}}if(n||i)if(DEBUG&&(n&&0==n.length&&egret.$warn(2102,this.currentClassName,getPropertyStr(h)),n&&i&&egret.$warn(2103,this.currentClassName,"states",getPropertyStr(h))),i){var l=i.split(",");a=l.length;for(o=0;o<a;o++){var u=l[o].trim();u&&(-1==s.indexOf(u)&&s.push(u),this.stateCode.push(new sys.EXState(u)))}}else for(a=n.length,o=0;o<a;o++){var d=n[o];if(1==d.nodeType){var c=[],p=d.attributes;if(p.stateGroups)for(var g=p.stateGroups.split(","),f=g.length,v=0;v<f;v++){var m=g[v].trim();m&&(-1==s.indexOf(m)&&s.push(m),c.push(m))}u=p.name,-1==s.indexOf(u)&&s.push(u),this.stateCode.push(new sys.EXState(u,c))}}}},p.createStates=function(t){var e=t.children;if(e)for(var i=e.length,n=0;n<i;n++){var s=e[n];if(1==s.nodeType&&!this.isInnerClass(s)&&(this.createStates(s),s.namespace!=sys.NS_W&&s.localName))if(this.isProperty(s)){var r=s.localName,a=r.indexOf("."),o=s.children;if(-1==a||!o||0==o.length)continue;var h=r.substring(a+1);r=r.substring(0,a);var l=this.getClassNameOfNode(t),u=sys.exmlConfig.getPropertyType(r,l);DEBUG&&(u==TYPE_ARRAY&&egret.$error(2013,this.currentClassName,getPropertyStr(s)),1<o.length&&egret.$error(2011,this.currentClassName,r,getPropertyStr(s)));var d=o[0];if(1==d.nodeType?(this.createFuncForNode(d),this.checkIdForState(d),B="this."+d.attributes.id):B=this.formatValue(r,d.text,t),0<(x=(p=this.getStateByName(h,s)).length))for(var c=0;c<x;c++)(g=p[c]).addOverride(new sys.EXSetProperty(t.attributes.id,r,B))}else if(this.containsState(s)){var p,g,f=s.attributes,v=f.id;this.getClassNameOfNode(s);if(this.checkIdForState(s),this.isStateNode(s)){var m="",y=s.parent;y.localName==TYPE_ARRAY&&(y=y.parent),y&&y.parent&&this.isProperty(y)&&(y=y.parent),y&&y!=this.currentXML&&(m=y.attributes.id,this.checkIdForState(y));var $=this.findNearNodeId(s),E=[];if(f.includeIn)E=f.includeIn.split(",");else{var C=f.excludeFrom.split(","),_=C.length;for(c=0;c<_;c++){var T=C[c];this.getStateByName(T,s)}for(_=this.stateCode.length,c=0;c<_;c++)g=this.stateCode[c],-1==C.indexOf(g.name)&&E.push(g.name)}for(var S=E.length,I=0;I<S;I++)if(h=E[I],0<(p=this.getStateByName(h,s)).length){var x=p.length;for(c=0;c<x;c++)(g=p[c]).addOverride(new sys.EXAddItems(v,m,$.position,$.relativeTo))}}for(var L=Object.keys(f),N=L.length,P=0;P<N;P++){var B=f[T=L[P]];if(-1!=(a=T.indexOf("."))){var D=T.substring(0,a);D=this.formatKey(D,B);var R=!1;if(!(B=this.formatValue(D,B,s,!0,function(t){R=t})))continue;if(h=T.substr(a+1),0<(x=(p=this.getStateByName(h,s)).length))for(c=0;c<x;c++)g=p[c],R?g.addOverride(new sys.EXSetStateProperty(v,D,'"'+B+'"')):g.addOverride(new sys.EXSetProperty(v,D,B))}}}}},p.checkIdForState=function(t){if(t&&!this.currentClass.getVariableByName(t.attributes.id)){this.createVarForNode(t);var e=t.attributes.id,i=e+"_i",n=this.currentClass.getFuncByName(i);if(n){var s="this."+e+" = t;",r=n.codeBlock;r&&(r.containsCodeLine(s)||r.addCodeLineAt(s,1))}}},p.getStateByName=function(t,e){for(var i=[],n=this.stateCode,s=n.length,r=0;r<s;r++){var a=n[r];if(a.name==t)-1==i.indexOf(a)&&i.push(a);else if(0<a.stateGroups.length){for(var o=!1,h=a.stateGroups.length,l=0;l<h;l++){if(a.stateGroups[l]==t){o=!0;break}}o&&-1==i.indexOf(a)&&i.push(a)}}return DEBUG&&0==i.length&&egret.$error(2006,this.currentClassName,t,toXMLString(e)),i},p.findNearNodeId=function(t){for(var e,i,n="",s=-1,r=!1,a=t.parent.children,o=a.length,h=0;h<o;h++){var l=a[h];this.isProperty(l)||(l==t?(r=!0,s=h):!r||i||this.isStateNode(l)||(i=l),r||this.isStateNode(l)||l)}return 0==s?{position:e=0,relativeTo:n}:s==o-1?{position:e=1,relativeTo:n}:i&&(e=2,n=i.attributes.id)?(this.checkIdForState(i),{position:e,relativeTo:n}):{position:1,relativeTo:n}},p.getClassNameOfNode=function(t){var e=sys.exmlConfig.getClassNameById(t.localName,t.namespace);return DEBUG&&!e&&egret.$error(2003,this.currentClassName,toXMLString(t)),e},EXMLParser}();if(sys.EXMLParser=EXMLParser,egret.registerClass(EXMLParser,"eui.sys.EXMLParser"),DEBUG){function getRepeatedIds(t){var e=[];return this.repeatedIdMap={},this.getIds(t,e),e}function getIds(t,e){if(t.namespace!=sys.NS_W&&t.attributes.id){var i=t.attributes.id;this.repeatedIdMap[i]?e.push(toXMLString(t)):this.repeatedIdMap[i]=!0}var n=t.children;if(n)for(var s=n.length,r=0;r<s;r++){var a=n[r];this.isInnerClass(a)||this.getIds(a,e)}}function toXMLString(t){if(!t)return"";for(var e="  at <"+t.name,i=t.attributes,n=Object.keys(i),s=n.length,r=0;r<s;r++){var a=n[r],o=i[a];"id"==a&&"__"==o.substring(0,2)||(e+=" "+a+'="'+o+'"')}return 0==t.children.length?e+="/>":e+=">",e}function checkDeclarations(t,e){if(t){var i=t.children;if(i)for(var n=i.length,s=0;s<n;s++){var r=i[s];1==r.nodeType&&(r.attributes.includeIn&&e.push(toXMLString(r)),r.attributes.excludeFrom&&e.push(toXMLString(r)),checkDeclarations(r,e))}}}function getPropertyStr(t){return toXMLString(t.parent)+"\n      \t"+toXMLString(t).substring(5)}}}(sys=eui.sys||(eui.sys={}))}(eui||(eui={})),function(t){!function(n){n.NS_S="http://ns.egret.com/eui",n.NS_W="http://ns.egret.com/wing";var s=["Point","Matrix","Rectangle"],g=["Array","boolean","string","number"],f=0,v={},t=function(){function t(){}__define;var e=t.prototype;return e.$describe=function(t){if(!t)return null;var e,i=Object.getPrototypeOf(t);if(!i)return null;if(i.hasOwnProperty("__hashCode__")&&(e=v[i.__hashCode__]))return e;var n=Object.getPrototypeOf(i);if(!n)return null;var s=m(n.constructor),r=this.$describe(s);if(r){function a(){}a.prototype=r,e=new a}else e={};DEBUG&&(e.__class__=i.constructor.name);for(var o,h=Object.keys(i).concat(Object.keys(t)),l=h.length,u=t.__meta__,d=0;d<l;d++){var c=h[d];if("constructor"!=c&&"_"!=c.charAt(0)&&"$"!=c.charAt(0)){var p;if(u&&u[c])p=u[c];else if(o=t[c],"[object Array]"===Object.prototype.toString.call(o))p="Array";else{if("function"==(p=typeof t[c]))continue;-1==g.indexOf(p)&&(p="any")}e[c]=p}}return Object.getPrototypeOf(n)&&(i.__hashCode__=f++,v[i.__hashCode__]=e),e},e.getClassNameById=function(t,e){if(e==n.NS_S){if("Object"==t)return t;if(-1!=s.indexOf(t))return"egret."+t}var i="";return-1!=g.indexOf(t)?t:(e==n.NS_W||(i=e&&e!=n.NS_S?e.substring(0,e.length-1)+t:"eui."+t),a(i)||(i=""),i)},e.getDefaultPropById=function(t,e){var i,n=a(this.getClassNameById(t,e));return n&&(i=n.__defaultProperty__),i||""},e.getPropertyType=function(t,e){if("Object"==e)return"any";var i="",n=a(e);if(n){if(!n.hasOwnProperty("__hashCode__")){var s=m(egret.getDefinitionByName(e));if(!s)return DEBUG&&egret.$warn(2104,e),i;this.$describe(s)}var r=v[n.__hashCode__];r&&(i=r[t])}return i},t}();function a(t){var e=egret.getDefinitionByName(t);return e?e.prototype:null}function m(t){if(!t)return null;try{var e=new t}catch(t){return egret.error(t),null}return e}n.EXMLConfig=t,egret.registerClass(t,"eui.sys.EXMLConfig")}(t.sys||(t.sys={}))}(eui||(eui={})),function(r){var e=new eui.sys.EXMLParser,o={},d={},a="";function h(t){return e.parse(t)}function c(t,e){if(e)var i=h(e);if(t){d[t]=i;var n=o[t];delete o[t];for(var s=n?n.length:0,r=0;r<s;r++){var a=n[r];a[0]&&a[1]&&a[0].call(a[1],i,t)}}return i}function p(e,i){var t=e;-1==e.indexOf("://")&&(t=a+e);var n=function(t){t||(t=""),i(e,t)},s=r.$stage?r.$stage.getImplementation("eui.IThemeAdapter"):null;s||(s=new eui.DefaultThemeAdapter),s.getTheme(t,n,n,this)}Object.defineProperty(r,"prefixURL",{get:function(){return a},set:function(t){a=t},enumerable:!0,configurable:!0}),r.parse=h,r.load=function(t,e,i,n){if(void 0===n&&(n=!1),DEBUG&&(t||egret.$error(1003,"url")),n&&t in d)e&&e.call(i,d[t],t);else{var s=o[t];s?s.push([e,i]):(o[t]=[[e,i]],p(t,c))}},r.$loadAll=function(o,h,l,e){if(void 0===e&&(e=!1),o&&0!=o.length){var u=[];o.forEach(function(t){if(e&&t in d)return u[t]="",void u.push(t);p(t,function(t,e){var i,s,n,r,a;u[t]=e,u.push(t),u.length==o.length&&(s=u,n=h,r=l,a=[],(i=o).forEach(function(t,e){if(t in d&&!s[t])a[e]=d[t];else{var i=s[t],n=c(t,i);a[e]=n}}),n&&n.call(r,a,i))})})}else h&&h.call(l,[],o)},r.$parseURLContent=c}(EXML||(EXML={})),function(t){egret.$locale_strings=egret.$locale_strings||{},egret.$locale_strings.en_US=egret.$locale_strings.en_US||{};var e=egret.$locale_strings.en_US;e[2001]="EXML parsing error {0}: EXML file can't be found ",e[2002]="EXML parsing error : invalid XML file:\n{0}",e[2003]="EXML parsing error {0}: the class definitions corresponding to nodes can't be found  \n {1}",e[2004]="EXML parsing error {0}: nodes cannot contain id property with the same name \n {1}",e[2005]="EXML parsing error {0}: property with the name of '{1}' does not exist on the node, or the property does not have a default value: \n {2}",e[2006]="EXML parsing error {0}: undefined view state name: '{1}' \n {2}",e[2007]="EXML parsing error {0}: only UIComponent objects within the container can use the includeIn and excludeFrom properties\n {1}",e[2008]="EXML parsing error {0}: fail to assign values of '{1}' class to property: '{2}' \n {3}",e[2009]="EXML parsing error {0}: only one ID can be referenced in the node property value '{}' label; and complex expression is not allowed to use \n {1}",e[2010]="EXML parsing error {0}: ID referenced by property: '{1}':  '{2}' does not exist \n {3}",e[2011]="EXML parsing error {0}: fail to assign more than one child nodes to the same property: '{1}' \n {2}",e[2012]="EXML parsing error {0}: no default property exists on the node; and you must explicitly declare the property name that the child node  is assigned to \n {1}",e[2013]="EXML parsing error {0}: view state grammar is not allowed to use on property nodes of Array class \n {1} ",e[2014]="EXML parsing error {0}: assigning the skin class itself to the node property is not allowed \n {1}",e[2015]="EXML parsing error {0}: class definition referenced by node: {1} does not exist \n {2}",e[2016]="EXML parsing error {0}: format error of 'scale9Grid' property value on the node: {1}",e[2017]="EXML parsing error {0}: namespace prefix missing on the node: {1}",e[2018]="EXML parsing error {0}: format error of 'skinName' property value on the node: {1}",e[2019]="EXML parsing error {0}: the containers child item must be visible nodes: {1}",e[2020]="EXML parsing error {0}: for child nodes in w: Declarations, the includeIn and excludeFrom properties are not allowed to use \n {1}",e[2101]="EXML parsing warnning : fail to register the class property : {0},there is already a class with the same name in the global,please try to rename the class name for the exml. \n {1}",e[2102]="EXML parsing warnning {0}: no child node can be found on the property code \n {1}",e[2103]="EXML parsing warnning {0}: the same property '{1}' on the node is assigned multiple times \n {2}",e[2104]="EXML parsing warnning, Instantiate class {0} errorthe parameters of its constructor method must be empty.",e[2201]="BasicLayout doesn't support virtualization.",e[2202]="parse skinName errorthe parsing result of skinName must be a instance of eui.Skin.",e[2203]="Could not find the skin class '{0}'",e[2301]="parse source failedcould not find asset from URL{0} ."}(eui||(eui={})),function(t){egret.$locale_strings=egret.$locale_strings||{},egret.$locale_strings.zh_CN=egret.$locale_strings.zh_CN||{};var e=egret.$locale_strings.zh_CN;e[2001]="EXML {0}: EXML",e[2002]="EXML: XML:\n{0}",e[2003]="EXML {0}: \n{1}",e[2004]="EXML {0}: id\n{1}",e[2005]="EXML {0}: '{1}':\n{2}",e[2006]="EXML {0}: :'{1}'\n{2}",e[2007]="EXML {0}:  UIComponent includeInexcludeFrom\n{1}",e[2008]="EXML {0}: '{1}':'{2}'\n{3}",e[2009]="EXML {0}: {}ID\n{1}",e[2010]="EXML {0}: :'{1}'ID: '{2}'\n{3}",e[2011]="EXML {0}: :'{1}'\n{2}",e[2012]="EXML {0}: \n{1}",e[2013]="EXML {0}: Array\n{1}",e[2014]="EXML {0}: \n{1}",e[2015]="EXML {0}: :{1}\n{2}",e[2016]="EXML {0}: 'scale9Grid':{1}",e[2017]="EXML {0}: :{1}",e[2018]="EXML {0}: 'skinName':{1}",e[2019]="EXML {0}: :{1}",e[2020]="EXML {0}: w:DeclarationsincludeInexcludeFrom\n{1}",e[2101]="EXML: EXML class : {0} \n{1}",e[2102]="EXML {0}: \n{1}",e[2103]="EXML {0}: '{1}'\n{2}",e[2104]="EXML{0} EXMLEXML",e[2201]="BasicLayout ",e[2202]=" skinName  eui.Skin ",e[2203]=" '{0}'",e[2301]="URL{0} "}(eui||(eui={})),function(t){var e=function(t){function e(){t.call(this),this.$target=null,this.$useVirtualLayout=!1,this.$typicalWidth=71,this.$typicalHeight=22}__extends(e,t);var i=__define,n=e.prototype;return i(n,"target",function(){return this.$target},function(t){this.$target!==t&&(this.$target=t,this.clearVirtualLayoutCache())}),i(n,"useVirtualLayout",function(){return this.$useVirtualLayout},function(t){t=!!t,this.$useVirtualLayout!=t&&(this.$useVirtualLayout=t,this.dispatchEventWith("useVirtualLayoutChanged"),this.$useVirtualLayout&&!t&&this.clearVirtualLayoutCache(),this.target&&this.target.invalidateDisplayList())}),n.setTypicalSize=function(t,e){e=+e||22,(t=+t||71)===this.$typicalWidth&&e===this.$typicalHeight||(this.$typicalWidth=t,this.$typicalHeight=e,this.$target&&this.$target.invalidateSize())},n.scrollPositionChanged=function(){},n.clearVirtualLayoutCache=function(){},n.elementAdded=function(t){},n.elementRemoved=function(t){},n.getElementIndicesInView=function(){return null},n.measure=function(){},n.updateDisplayList=function(t,e){},e}(egret.EventDispatcher);t.LayoutBase=e,egret.registerClass(e,"eui.LayoutBase")}(eui||(eui={})),function(r){var t=function(s){function t(){s.call(this)}__extends(t,s);__define;var e=t.prototype;return e.measure=function(){s.prototype.measure.call(this),r.sys.measure(this.$target)},e.updateDisplayList=function(t,e){s.prototype.updateDisplayList.call(this,t,e);var i=this.$target,n=r.sys.updateDisplayList(i,t,e);i.setContentSize(Math.ceil(n.x),Math.ceil(n.y))},t}(r.LayoutBase);r.BasicLayout=t,egret.registerClass(t,"eui.BasicLayout"),DEBUG&&Object.defineProperty(t.prototype,"useVirtualLayout",{get:function(){return this.$useVirtualLayout},set:function(t){egret.$error(2201)},enumerable:!0,configurable:!0})}(eui||(eui={})),function(t){var e,S;e=t.sys||(t.sys={}),S="eui.UIComponent",e.measure=function(t){if(t){for(var e=0,i=0,n=egret.$TempRectangle,s=t.numChildren,r=0;r<s;r++){var a=t.getChildAt(r);if(egret.is(a,S)&&a.$includeInLayout){var o,h,l=a.$UIComponent,u=l[4],d=l[5],c=l[0],p=l[1],g=l[2],f=l[3];a.getPreferredBounds(n),isNaN(c)||isNaN(p)?isNaN(u)?isNaN(c)&&isNaN(p)?o=n.x:(o=isNaN(c)?0:c,o+=isNaN(p)?0:p):o=2*Math.abs(u):o=c+p,isNaN(g)||isNaN(f)?isNaN(d)?isNaN(g)&&isNaN(f)?h=n.y:(h=isNaN(g)?0:g,h+=isNaN(f)?0:f):h=2*Math.abs(d):h=g+f;var v=n.width,m=n.height;e=Math.ceil(Math.max(e,o+v)),i=Math.ceil(Math.max(i,h+m))}}t.setMeasuredSize(e,i)}},e.updateDisplayList=function(t,e,i){if(t){for(var n=t.numChildren,s=0,r=0,a=egret.$TempRectangle,o=0;o<n;o++){var h=t.getChildAt(o);if(egret.is(h,S)&&h.$includeInLayout){var l=h.$UIComponent,u=l[4],d=l[5],c=l[0],p=l[1],g=l[2],f=l[3],v=l[6],m=l[7],y=NaN,$=NaN;isNaN(c)||isNaN(p)?isNaN(v)||(y=Math.round(e*Math.min(.01*v,1))):y=e-p-c,isNaN(g)||isNaN(f)?isNaN(m)||($=Math.round(i*Math.min(.01*m,1))):$=i-f-g,h.setLayoutBoundsSize(y,$),h.getLayoutBounds(a);var E=a.width,C=a.height,_=NaN,T=NaN;_=isNaN(u)?isNaN(c)?isNaN(p)?a.x:e-E-p:c:Math.round((e-E)/2+u),T=isNaN(d)?isNaN(g)?isNaN(f)?a.y:i-C-f:g:Math.round((i-C)/2+d),h.setLayoutBoundsPosition(_,T),s=Math.max(s,_+E),r=Math.max(r,T+C)}}return egret.$TempPoint.setTo(s,r)}}}(eui||(eui={})),function(t){var e=function(){function t(){}__define;return t.LEFT="left",t.JUSTIFY_USING_GAP="justifyUsingGap",t.JUSTIFY_USING_WIDTH="justifyUsingWidth",t}();t.ColumnAlign=e,egret.registerClass(e,"eui.ColumnAlign")}(eui||(eui={})),function(t){var e=function(e){function t(){e.apply(this,arguments),this.$horizontalAlign="left",this.$verticalAlign="top",this.$gap=6,this.$paddingLeft=0,this.$paddingRight=0,this.$paddingTop=0,this.$paddingBottom=0,this.elementSizeTable=[],this.startIndex=-1,this.endIndex=-1,this.indexInViewCalculated=!1,this.maxElementSize=0}__extends(t,e);var i=__define,n=t.prototype;return i(n,"horizontalAlign",function(){return this.$horizontalAlign},function(t){this.$horizontalAlign!=t&&(this.$horizontalAlign=t,this.$target&&this.$target.invalidateDisplayList())}),i(n,"verticalAlign",function(){return this.$verticalAlign},function(t){this.$verticalAlign!=t&&(this.$verticalAlign=t,this.$target&&this.$target.invalidateDisplayList())}),i(n,"gap",function(){return this.$gap},function(t){t=+t||0,this.$gap!==t&&(this.$gap=t,this.invalidateTargetLayout())}),i(n,"paddingLeft",function(){return this.$paddingLeft},function(t){t=+t||0,this.$paddingLeft!==t&&(this.$paddingLeft=t,this.invalidateTargetLayout())}),i(n,"paddingRight",function(){return this.$paddingRight},function(t){t=+t||0,this.$paddingRight!==t&&(this.$paddingRight=t,this.invalidateTargetLayout())}),i(n,"paddingTop",function(){return this.$paddingTop},function(t){t=+t||0,this.$paddingTop!==t&&(this.$paddingTop=t,this.invalidateTargetLayout())}),i(n,"paddingBottom",function(){return this.$paddingBottom},function(t){t=+t||0,this.$paddingBottom!==t&&(this.$paddingBottom=t,this.invalidateTargetLayout())}),n.invalidateTargetLayout=function(){var t=this.$target;t&&(t.invalidateSize(),t.invalidateDisplayList())},n.measure=function(){this.$target&&(this.$useVirtualLayout?this.measureVirtual():this.measureReal())},n.measureReal=function(){},n.measureVirtual=function(){},n.updateDisplayList=function(t,e){var i=this.$target;i&&(0!=i.numElements?this.$useVirtualLayout?this.updateDisplayListVirtual(t,e):this.updateDisplayListReal(t,e):i.setContentSize(Math.ceil(this.$paddingLeft+this.$paddingRight),Math.ceil(this.$paddingTop+this.$paddingBottom)))},n.getStartPosition=function(t){return 0},n.getElementSize=function(t){return 0},n.getElementTotalSize=function(){return 0},n.elementRemoved=function(t){this.$useVirtualLayout&&(e.prototype.elementRemoved.call(this,t),this.elementSizeTable.splice(t,1))},n.clearVirtualLayoutCache=function(){this.$useVirtualLayout&&(this.elementSizeTable=[],this.maxElementSize=0)},n.findIndexAt=function(t,e,i){var n=.5*(e+i)|0,s=this.getStartPosition(n),r=this.getElementSize(n);return s<=t&&t<s+r+this.$gap?n:e==i?-1:t<s?this.findIndexAt(t,e,Math.max(e,n-1)):this.findIndexAt(t,Math.min(n+1,i),i)},n.scrollPositionChanged=function(){(e.prototype.scrollPositionChanged.call(this),this.$useVirtualLayout)&&(this.getIndexInView()&&(this.indexInViewCalculated=!0,this.target.invalidateDisplayList()))},n.getIndexInView=function(){return!1},n.updateDisplayListVirtual=function(t,e){},n.updateDisplayListReal=function(t,e){},n.flexChildrenProportionally=function(t,e,i,n){var s,r=n.length;do{s=!0;var a=e-t*i/100;0<a?e-=a:a=0;for(var o=e/i,h=0;h<r;h++){var l=n[h],u=l.percent*o;if(u<l.min){var d=l.min;l.size=d,n[h]=n[--r],i-=(n[r]=l).percent,d<=a?a-=d:(e-=d-a,a=0),s=!1;break}if(u>l.max){var c=l.max;l.size=c,n[h]=n[--r],i-=(n[r]=l).percent,c<=a?a-=c:(e-=c-a,a=0),s=!1;break}l.size=u}}while(!s)},t}(t.LayoutBase);t.LinearLayoutBase=e,egret.registerClass(e,"eui.LinearLayoutBase")}(eui||(eui={})),function(t){var e,i;e=t.sys||(t.sys={}),i=function(){function t(){this.layoutElement=null,this.size=0,this.percent=NaN,this.min=NaN,this.max=NaN}__define;return t}(),e.ChildInfo=i,egret.registerClass(i,"eui.sys.ChildInfo")}(eui||(eui={})),function(F){var W="eui.UIComponent",t=function(e){function t(){e.apply(this,arguments)}__extends(t,e);__define;var i=t.prototype;return i.measureReal=function(){for(var t=this.$target,e=t.numElements,i=e,n=0,s=0,r=egret.$TempRectangle,a=0;a<e;a++){var o=t.getElementAt(a);egret.is(o,W)&&o.$includeInLayout?(o.getPreferredBounds(r),n+=r.width,s=Math.max(s,r.height)):i--}n+=(i-1)*this.$gap;var h=this.$paddingLeft+this.$paddingRight,l=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(n+h,s+l)},i.measureVirtual=function(){for(var t=this.$target,e=this.$typicalWidth,i=this.getElementTotalSize(),n=Math.max(this.maxElementSize,this.$typicalHeight),s=egret.$TempRectangle,r=this.endIndex,a=this.elementSizeTable,o=this.startIndex;o<r;o++){var h=t.getElementAt(o);egret.is(h,W)&&h.$includeInLayout&&(h.getPreferredBounds(s),i+=s.width,i-=isNaN(a[o])?e:a[o],n=Math.max(n,s.height))}var l=this.$paddingLeft+this.$paddingRight,u=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(i+l,n+u)},i.updateDisplayListReal=function(t,e){var i=this.$target,n=this.$paddingLeft,s=this.$paddingRight,r=this.$paddingTop,a=this.$paddingBottom,o=this.$gap,h=Math.max(0,t-n-s),l=Math.max(0,e-r-a),u=this.$horizontalAlign==F.JustifyAlign.JUSTIFY,d=this.$verticalAlign==F.JustifyAlign.JUSTIFY||this.$verticalAlign==F.JustifyAlign.CONTENT_JUSTIFY,c=0;d||(this.$verticalAlign==egret.VerticalAlign.MIDDLE?c=.5:this.$verticalAlign==egret.VerticalAlign.BOTTOM&&(c=1));var p,g,f=i.numElements,v=f,m=n,y=r,$=0,E=0,C=[],_=h,T=this.maxElementSize,S=egret.$TempRectangle;for(p=0;p<f;p++){var I=i.getElementAt(p);if(egret.is(I,W)&&I.$includeInLayout)if(I.getPreferredBounds(S),T=Math.max(T,S.height),u)$+=S.width;else{var x=I.$UIComponent;isNaN(x[6])?_-=S.width:(E+=x[6],(g=new F.sys.ChildInfo).layoutElement=I,g.percent=x[6],g.min=x[12],g.max=x[13],C.push(g))}else v--}_=0<(_-=o*(v-1))?_:0;var L,N=h-$-o*(v-1),P=v,B={};if(u){if(N<0){for(L=_/v,p=0;p<f;p++)I=i.getElementAt(p),egret.is(I,W)&&I.$includeInLayout&&(I.getPreferredBounds(S),S.width<=L&&(_-=S.width,P--));_=0<_?_:0}}else if(0<E){this.flexChildrenProportionally(h,_,E,C);var D=0,R=C.length;for(p=0;p<R;p++){g=C[p];var b=Math.round(g.size+D);D+=g.size-b,_-=B[g.layoutElement.$hashCode]=b}_=0<_?_:0}this.$horizontalAlign==egret.HorizontalAlign.CENTER?m=n+.5*_:this.$horizontalAlign==egret.HorizontalAlign.RIGHT&&(m=n+_);var A,O,M=n,w=r,U=0,V=0,H=Math.ceil(l);for(this.$verticalAlign==F.JustifyAlign.CONTENT_JUSTIFY&&(H=Math.ceil(Math.max(l,T))),p=D=0;p<f;p++){var z=0;if(I=i.getElementAt(p),egret.is(I,W)&&I.$includeInLayout){if(I.getPreferredBounds(S),A=NaN,u?(O=NaN,0<N?O=_*S.width/$:N<0&&S.width>L&&(O=_/P),isNaN(O)||(D+=O-(A=Math.round(O+D)))):A=B[I.$hashCode],d)y=r,I.setLayoutBoundsSize(A,H),I.getLayoutBounds(S);else{var k=NaN;x=I.$UIComponent;if(!isNaN(I.percentHeight)){var G=Math.min(100,x[7]);k=Math.round(l*G*.01)}I.setLayoutBoundsSize(A,k),I.getLayoutBounds(S),y=r+(z=0<(z=(l-S.height)*c)?z:0)}I.setLayoutBoundsPosition(Math.round(m),Math.round(y)),U=Math.ceil(S.width),V=Math.ceil(S.height),M=Math.max(M,m+U),w=Math.max(w,y+V),m+=U+o}}this.maxElementSize=T,i.setContentSize(M+s,w+a)},i.updateDisplayListVirtual=function(t,e){var i=this.$target;this.indexInViewCalculated?this.indexInViewCalculated=!1:this.getIndexInView();var n,s=this.$paddingRight,r=this.$paddingTop,a=this.$paddingBottom,o=this.$gap,h=i.numElements;if(-1==this.startIndex||-1==this.endIndex)return n=this.getStartPosition(h)-o+s,void i.setContentSize(n,i.contentHeight);var l=this.endIndex;i.setVirtualElementIndicesInView(this.startIndex,l);var u=this.$verticalAlign==F.JustifyAlign.JUSTIFY||this.$verticalAlign==F.JustifyAlign.CONTENT_JUSTIFY,d=this.$verticalAlign==F.JustifyAlign.CONTENT_JUSTIFY,c=0;u||(this.$verticalAlign==egret.VerticalAlign.MIDDLE?c=.5:this.$verticalAlign==egret.VerticalAlign.BOTTOM&&(c=1));var p,g=egret.$TempRectangle,f=Math.max(0,e-r-a),v=Math.ceil(f),m=this.$typicalHeight,y=this.$typicalWidth,$=this.maxElementSize,E=Math.max(m,this.maxElementSize);if(d){for(var C=this.startIndex;C<=l;C++)p=i.getVirtualElementAt(C),egret.is(p,W)&&p.$includeInLayout&&(p.getPreferredBounds(g),$=Math.max($,g.height));v=Math.ceil(Math.max(f,$))}for(var _=0,T=0,S=0,I=!1,x=this.elementSizeTable,L=this.startIndex;L<=l;L++){var N=0;p=i.getVirtualElementAt(L),egret.is(p,W)&&p.$includeInLayout&&(p.getPreferredBounds(g),d||($=Math.max($,g.height)),u?(T=r,p.setLayoutBoundsSize(NaN,v),p.getLayoutBounds(g)):(p.getLayoutBounds(g),T=r+(N=0<(N=(f-g.height)*c)?N:0)),S=Math.max(S,g.height),I||(isNaN(x[L])?y:x[L])!=g.width&&(I=!0),x[L]=g.width,_=this.getStartPosition(L),p.setLayoutBoundsPosition(Math.round(_),Math.round(T)))}S+=r+a,n=this.getStartPosition(h)-o+s,this.maxElementSize=$,i.setContentSize(n,S),(I||E<this.maxElementSize)&&i.invalidateSize()},i.getStartPosition=function(t){if(!this.$useVirtualLayout&&this.$target){var e=this.$target.getElementAt(t);if(e)return e.x}for(var i=this.$typicalWidth,n=this.$paddingLeft,s=this.$gap,r=this.elementSizeTable,a=0;a<t;a++){var o=r[a];isNaN(o)&&(o=i),n+=o+s}return n},i.getElementSize=function(t){if(this.$useVirtualLayout){var e=this.elementSizeTable[t];return isNaN(e)&&(e=this.$typicalWidth),e}return this.$target?this.$target.getElementAt(t).width:0},i.getElementTotalSize=function(){for(var t=this.$typicalWidth,e=this.$gap,i=0,n=this.$target.numElements,s=this.elementSizeTable,r=0;r<n;r++){var a=s[r];isNaN(a)&&(a=t),i+=a+e}return i-=e},i.elementAdded=function(t){this.useVirtualLayout&&(e.prototype.elementAdded.call(this,t),this.elementSizeTable.splice(t,0,this.$typicalWidth))},i.getIndexInView=function(){var t=this.$target;if(!t||0==t.numElements)return this.startIndex=this.endIndex=-1,!1;var e=t.$UIComponent;if(e[10]<=0||e[11]<=0)return this.startIndex=this.endIndex=-1,!1;var i=t.numElements,n=this.getStartPosition(i-1)+this.elementSizeTable[i-1]+this.$paddingRight,s=t.scrollH;if(s>n-this.$paddingRight)return this.startIndex=-1,!(this.endIndex=-1);var r=t.scrollH+e[10];if(r<this.$paddingLeft)return this.startIndex=-1,!(this.endIndex=-1);var a=this.startIndex,o=this.endIndex;return this.startIndex=this.findIndexAt(s,0,i-1),-1==this.startIndex&&(this.startIndex=0),this.endIndex=this.findIndexAt(r,0,i-1),-1==this.endIndex&&(this.endIndex=i-1),a!=this.startIndex||o!=this.endIndex},t}(F.LinearLayoutBase);F.HorizontalLayout=t,egret.registerClass(t,"eui.HorizontalLayout")}(eui||(eui={})),function(t){var e=function(){function t(){}__define;return t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.JustifyAlign=e,egret.registerClass(e,"eui.JustifyAlign")}(eui||(eui={})),function(t){var e=function(){function t(){}__define;return t.TOP="top",t.JUSTIFY_USING_GAP="justifyUsingGap",t.JUSTIFY_USING_HEIGHT="justifyUsingHeight",t}();t.RowAlign=e,egret.registerClass(e,"eui.RowAlign")}(eui||(eui={})),function(L){var N="eui.UIComponent",t=function(x){function t(){x.call(this),this.explicitHorizontalGap=NaN,this._horizontalGap=6,this.explicitVerticalGap=NaN,this._verticalGap=6,this._columnCount=-1,this._requestedColumnCount=0,this._rowCount=-1,this._requestedRowCount=0,this.explicitColumnWidth=NaN,this._columnWidth=NaN,this.explicitRowHeight=NaN,this._rowHeight=NaN,this._paddingLeft=0,this._paddingRight=0,this._paddingTop=0,this._paddingBottom=0,this._horizontalAlign=L.JustifyAlign.JUSTIFY,this._verticalAlign=L.JustifyAlign.JUSTIFY,this._columnAlign=L.ColumnAlign.LEFT,this._rowAlign=L.RowAlign.TOP,this._orientation=L.TileOrientation.ROWS,this.maxElementWidth=0,this.maxElementHeight=0,this.startIndex=-1,this.endIndex=-1,this.indexInViewCalculated=!1}__extends(t,x);var e=__define,i=t.prototype;return e(i,"horizontalGap",function(){return this._horizontalGap},function(t){(t=+t)!==this._horizontalGap&&(this.explicitHorizontalGap=t,this._horizontalGap=t,this.invalidateTargetLayout())}),e(i,"verticalGap",function(){return this._verticalGap},function(t){(t=+t)!==this._verticalGap&&(this.explicitVerticalGap=t,this._verticalGap=t,this.invalidateTargetLayout())}),e(i,"columnCount",function(){return this._columnCount}),e(i,"requestedColumnCount",function(){return this._requestedColumnCount},function(t){t=+t||0,this._requestedColumnCount!==t&&(this._requestedColumnCount=t,this._columnCount=t,this.invalidateTargetLayout())}),e(i,"rowCount",function(){return this._rowCount}),e(i,"requestedRowCount",function(){return this._requestedRowCount},function(t){t=+t||0,this._requestedRowCount!=t&&(this._requestedRowCount=t,this._rowCount=t,this.invalidateTargetLayout())}),e(i,"columnWidth",function(){return this._columnWidth},function(t){(t=+t)!==this._columnWidth&&(this.explicitColumnWidth=t,this._columnWidth=t,this.invalidateTargetLayout())}),e(i,"rowHeight",function(){return this._rowHeight},function(t){(t=+t)!==this._rowHeight&&(this.explicitRowHeight=t,this._rowHeight=t,this.invalidateTargetLayout())}),e(i,"paddingLeft",function(){return this._paddingLeft},function(t){t=+t||0,this._paddingLeft!=t&&(this._paddingLeft=t,this.invalidateTargetLayout())}),e(i,"paddingRight",function(){return this._paddingRight},function(t){t=+t||0,this._paddingRight!==t&&(this._paddingRight=t,this.invalidateTargetLayout())}),e(i,"paddingTop",function(){return this._paddingTop},function(t){t=+t||0,this._paddingTop!=t&&(this._paddingTop=t,this.invalidateTargetLayout())}),e(i,"paddingBottom",function(){return this._paddingBottom},function(t){t=+t||0,this._paddingBottom!==t&&(this._paddingBottom=t,this.invalidateTargetLayout())}),e(i,"horizontalAlign",function(){return this._horizontalAlign},function(t){this._horizontalAlign!=t&&(this._horizontalAlign=t,this.invalidateTargetLayout())}),e(i,"verticalAlign",function(){return this._verticalAlign},function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.invalidateTargetLayout())}),e(i,"columnAlign",function(){return this._columnAlign},function(t){this._columnAlign!=t&&(this._columnAlign=t,this.invalidateTargetLayout())}),e(i,"rowAlign",function(){return this._rowAlign},function(t){this._rowAlign!=t&&(this._rowAlign=t,this.invalidateTargetLayout())}),e(i,"orientation",function(){return this._orientation},function(t){this._orientation!=t&&(this._orientation=t,this.invalidateTargetLayout())}),i.invalidateTargetLayout=function(){var t=this.$target;t&&(t.invalidateSize(),t.invalidateDisplayList())},i.measure=function(){var t=this.$target;if(t){var e=this._columnCount,i=this._rowCount,n=this._columnWidth,s=this._rowHeight,r=0,a=0,o=t.$UIComponent;this.calculateRowAndColumn(o[8],o[9]);var h=0<this._requestedColumnCount?this._requestedColumnCount:this._columnCount,l=0<this._requestedRowCount?this._requestedRowCount:this._rowCount,u=isNaN(this._horizontalGap)?0:this._horizontalGap,d=isNaN(this._verticalGap)?0:this._verticalGap;0<h&&(r=h*(this._columnWidth+u)-u),0<l&&(a=l*(this._rowHeight+d)-d);var c=this._paddingLeft+this._paddingRight,p=this._paddingTop+this._paddingBottom;t.setMeasuredSize(r+c,a+p),this._columnCount=e,this._rowCount=i,this._columnWidth=n,this._rowHeight=s}},i.calculateRowAndColumn=function(t,e){var i=this.$target,n=isNaN(this._horizontalGap)?0:this._horizontalGap,s=isNaN(this._verticalGap)?0:this._verticalGap;this._rowCount=this._columnCount=-1;for(var r=i.numElements,a=r,o=0;o<a;o++){var h=i.getElementAt(o);!h||egret.is(h,N)&&h.$includeInLayout||r--}if(0!=r){(isNaN(this.explicitColumnWidth)||isNaN(this.explicitRowHeight))&&this.updateMaxElementSize(),isNaN(this.explicitColumnWidth)?this._columnWidth=this.maxElementWidth:this._columnWidth=this.explicitColumnWidth,isNaN(this.explicitRowHeight)?this._rowHeight=this.maxElementHeight:this._rowHeight=this.explicitRowHeight;var l=this._columnWidth+n;l<=0&&(l=1);var u=this._rowHeight+s;u<=0&&(u=1);var d=this._orientation==L.TileOrientation.COLUMNS,c=!isNaN(t),p=!isNaN(e),g=this._paddingLeft,f=this._paddingRight,v=this._paddingTop,m=this._paddingBottom;if(0<this._requestedColumnCount||0<this._requestedRowCount)0<this._requestedRowCount&&(this._rowCount=Math.min(this._requestedRowCount,r)),0<this._requestedColumnCount&&(this._columnCount=Math.min(this._requestedColumnCount,r));else if(c||p)if(!c||p&&d){var y=Math.max(0,e-v-m);this._rowCount=Math.floor((y+s)/u),this._rowCount=Math.max(1,Math.min(this._rowCount,r))}else{var $=Math.max(0,t-g-f);this._columnCount=Math.floor(($+n)/l),this._columnCount=Math.max(1,Math.min(this._columnCount,r))}else{var E=Math.sqrt(r*l*u);d?this._rowCount=Math.max(1,Math.round(E/u)):this._columnCount=Math.max(1,Math.round(E/l))}-1==this._rowCount&&(this._rowCount=Math.max(1,Math.ceil(r/this._columnCount))),-1==this._columnCount&&(this._columnCount=Math.max(1,Math.ceil(r/this._rowCount))),0<this._requestedColumnCount&&0<this._requestedRowCount&&(this._orientation==L.TileOrientation.ROWS?this._rowCount=Math.max(1,Math.ceil(r/this._requestedColumnCount)):this._columnCount=Math.max(1,Math.ceil(r/this._requestedRowCount)))}else this._rowCount=this._columnCount=0},i.updateMaxElementSize=function(){this.$target&&(this.$useVirtualLayout?(this.maxElementWidth=Math.max(this.maxElementWidth,this.$typicalWidth),this.maxElementHeight=Math.max(this.maxElementHeight,this.$typicalHeight),this.doUpdateMaxElementSize(this.startIndex,this.endIndex)):this.doUpdateMaxElementSize(0,this.$target.numElements-1))},i.doUpdateMaxElementSize=function(t,e){var i=this.maxElementWidth,n=this.maxElementHeight,s=egret.$TempRectangle,r=this.$target;if(-1!=t&&-1!=e)for(var a=t;a<=e;a++){var o=r.getVirtualElementAt(a);egret.is(o,N)&&o.$includeInLayout&&(o.getPreferredBounds(s),i=Math.max(i,s.width),n=Math.max(n,s.height))}this.maxElementWidth=i,this.maxElementHeight=n},i.clearVirtualLayoutCache=function(){x.prototype.clearVirtualLayoutCache.call(this),this.maxElementWidth=0,this.maxElementHeight=0},i.scrollPositionChanged=function(){this.$useVirtualLayout&&(this.getIndexInView()&&(this.indexInViewCalculated=!0,this.$target.invalidateDisplayList()))},i.getIndexInView=function(){if(!this.$target||0==this.$target.numElements)return this.startIndex=this.endIndex=-1,!1;var t=this.$target,e=t.numElements;if(!this.$useVirtualLayout)return this.startIndex=0,this.endIndex=e-1,!1;var i=t.$UIComponent;if(0==i[10]||0==i[11])return this.startIndex=this.endIndex=-1,!1;var n=this.startIndex,s=this.endIndex,r=this._paddingLeft,a=this._paddingTop,o=isNaN(this._horizontalGap)?0:this._horizontalGap,h=isNaN(this._verticalGap)?0:this._verticalGap;if(this._orientation==L.TileOrientation.COLUMNS){var l=this._columnWidth+o;if(l<=0)return this.startIndex=0,this.endIndex=e-1,!1;var u=t.scrollH,d=u+i[10],c=Math.floor((u-r)/l);c<0&&(c=0);var p=Math.ceil((d-r)/l);p<0&&(p=0),this.startIndex=Math.min(e-1,Math.max(0,c*this._rowCount)),this.endIndex=Math.min(e-1,Math.max(0,p*this._rowCount-1))}else{var g=this._rowHeight+h;if(g<=0)return this.startIndex=0,this.endIndex=e-1,!1;var f=t.scrollV,v=f+i[11],m=Math.floor((f-a)/g);m<0&&(m=0);var y=Math.ceil((v-a)/g);y<0&&(y=0),this.startIndex=Math.min(e-1,Math.max(0,m*this._columnCount)),this.endIndex=Math.min(e-1,Math.max(0,y*this._columnCount-1))}return this.startIndex!=n||this.endIndex!=s},i.updateDisplayList=function(t,e){if(x.prototype.updateDisplayList.call(this,t,e),this.$target){var i=this.$target,n=this._paddingLeft,s=this._paddingRight,r=this._paddingTop,a=this._paddingBottom;if(this.indexInViewCalculated)this.indexInViewCalculated=!1;else{if(this.calculateRowAndColumn(t,e),0==this._rowCount||0==this._columnCount)return void i.setContentSize(n+s,r+a);this.adjustForJustify(t,e),this.getIndexInView()}if(this.$useVirtualLayout&&(this.calculateRowAndColumn(t,e),this.adjustForJustify(t,e)),-1!=this.startIndex&&-1!=this.endIndex){var o,h,l,u,d,c=this.endIndex;i.setVirtualElementIndicesInView(this.startIndex,c);for(var p=this._orientation==L.TileOrientation.COLUMNS,g=this.startIndex,f=isNaN(this._horizontalGap)?0:this._horizontalGap,v=isNaN(this._verticalGap)?0:this._verticalGap,m=this._rowCount,y=this._columnCount,$=this._columnWidth,E=this._rowHeight,C=this.startIndex;C<=c;C++)o=this.$useVirtualLayout?this.target.getVirtualElementAt(C):this.target.getElementAt(C),egret.is(o,N)&&o.$includeInLayout&&(p?(u=Math.ceil((g+1)/m)-1,-1==(d=Math.ceil((g+1)%m)-1)&&(d=m-1)):(-1==(u=Math.ceil((g+1)%y)-1)&&(u=y-1),d=Math.ceil((g+1)/y)-1),h=u*($+f)+n,l=d*(E+v)+r,this.sizeAndPositionElement(o,h,l,$,E),g++);var _=n+s,T=r+a,S=($+f)*y-f,I=(E+v)*m-v;i.setContentSize(S+_,I+T)}else i.setContentSize(0,0)}},i.sizeAndPositionElement=function(t,e,i,n,s){var r=NaN,a=NaN,o=t.$UIComponent;this._horizontalAlign==L.JustifyAlign.JUSTIFY?r=n:isNaN(o[6])||(r=n*o[6]*.01),this._verticalAlign==L.JustifyAlign.JUSTIFY?a=s:isNaN(o[7])||(a=s*o[7]*.01),t.setLayoutBoundsSize(Math.round(r),Math.round(a));var h=e,l=egret.$TempRectangle;switch(t.getLayoutBounds(l),this._horizontalAlign){case egret.HorizontalAlign.RIGHT:h+=n-l.width;break;case egret.HorizontalAlign.CENTER:h=e+(n-l.width)/2}var u=i;switch(this._verticalAlign){case egret.VerticalAlign.BOTTOM:u+=s-l.height;break;case egret.VerticalAlign.MIDDLE:u+=(s-l.height)/2}t.setLayoutBoundsPosition(Math.round(h),Math.round(u))},i.adjustForJustify=function(t,e){var i=this._paddingLeft,n=this._paddingRight,s=this._paddingTop,r=this._paddingBottom,a=Math.max(0,t-i-n),o=Math.max(0,e-s-r);isNaN(this.explicitVerticalGap)||(this._verticalGap=this.explicitVerticalGap),isNaN(this.explicitHorizontalGap)||(this._horizontalGap=this.explicitHorizontalGap),this._verticalGap=isNaN(this._verticalGap)?0:this._verticalGap,this._horizontalGap=isNaN(this._horizontalGap)?0:this._horizontalGap;var h,l=o-this._rowHeight*this._rowCount,u=a-this._columnWidth*this._columnCount;0<l&&(this._rowAlign==L.RowAlign.JUSTIFY_USING_GAP?(h=Math.max(1,this._rowCount-1),this._verticalGap=l/h):this._rowAlign==L.RowAlign.JUSTIFY_USING_HEIGHT&&0<this._rowCount&&(this._rowHeight+=(l-(this._rowCount-1)*this._verticalGap)/this._rowCount)),0<u&&(this._columnAlign==L.ColumnAlign.JUSTIFY_USING_GAP?(h=Math.max(1,this._columnCount-1),this._horizontalGap=u/h):this._columnAlign==L.ColumnAlign.JUSTIFY_USING_WIDTH&&0<this._columnCount&&(this._columnWidth+=(u-(this._columnCount-1)*this._horizontalGap)/this._columnCount))},t}(L.LayoutBase);L.TileLayout=t,egret.registerClass(t,"eui.TileLayout"),DEBUG&&(egret.$markReadOnly(t,"columnCount"),egret.$markReadOnly(t,"rowCount"))}(eui||(eui={})),function(t){var e=function(){function t(){}__define;return t.ROWS="rows",t.COLUMNS="columns",t}();t.TileOrientation=e,egret.registerClass(e,"eui.TileOrientation")}(eui||(eui={})),function(F){var W="eui.UIComponent",t=function(e){function t(){e.apply(this,arguments)}__extends(t,e);__define;var i=t.prototype;return i.measureReal=function(){for(var t=this.$target,e=t.numElements,i=e,n=0,s=0,r=egret.$TempRectangle,a=0;a<e;a++){var o=t.getElementAt(a);egret.is(o,W)&&o.$includeInLayout?(o.getPreferredBounds(r),s+=r.height,n=Math.max(n,r.width)):i--}s+=(i-1)*this.$gap;var h=this.$paddingLeft+this.$paddingRight,l=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(n+h,s+l)},i.measureVirtual=function(){for(var t=this.$target,e=this.$typicalHeight,i=this.getElementTotalSize(),n=Math.max(this.maxElementSize,this.$typicalWidth),s=egret.$TempRectangle,r=this.endIndex,a=this.elementSizeTable,o=this.startIndex;o<r;o++){var h=t.getElementAt(o);egret.is(h,W)&&h.$includeInLayout&&(h.getPreferredBounds(s),i+=s.height,i-=isNaN(a[o])?e:a[o],n=Math.max(n,s.width))}var l=this.$paddingLeft+this.$paddingRight,u=this.$paddingTop+this.$paddingBottom;t.setMeasuredSize(n+l,i+u)},i.updateDisplayListReal=function(t,e){var i=this.$target,n=this.$paddingLeft,s=this.$paddingRight,r=this.$paddingTop,a=this.$paddingBottom,o=this.$gap,h=Math.max(0,t-n-s),l=Math.max(0,e-r-a),u=this.$verticalAlign==F.JustifyAlign.JUSTIFY,d=this.$horizontalAlign==F.JustifyAlign.JUSTIFY||this.$horizontalAlign==F.JustifyAlign.CONTENT_JUSTIFY,c=0;d||(this.$horizontalAlign==egret.HorizontalAlign.CENTER?c=.5:this.$horizontalAlign==egret.HorizontalAlign.RIGHT&&(c=1));var p,g,f=i.numElements,v=f,m=n,y=r,$=0,E=0,C=[],_=l,T=this.maxElementSize,S=egret.$TempRectangle;for(p=0;p<f;p++){var I=i.getElementAt(p);if(egret.is(I,W)&&I.$includeInLayout)if(I.getPreferredBounds(S),T=Math.max(T,S.width),u)$+=S.height;else{var x=I.$UIComponent;isNaN(x[7])?_-=S.height:(E+=x[7],(g=new F.sys.ChildInfo).layoutElement=I,g.percent=x[7],g.min=x[14],g.max=x[15],C.push(g))}else v--}_=0<(_-=o*(v-1))?_:0;var L,N=l-$-o*(v-1),P=v,B={};if(u){if(N<0){for(L=_/v,p=0;p<f;p++)I=i.getElementAt(p),egret.is(I,W)&&I.$includeInLayout&&(I.getPreferredBounds(S),S.height<=L&&(_-=S.height,P--));_=0<_?_:0}}else if(0<E){this.flexChildrenProportionally(l,_,E,C);var D=0,R=C.length;for(p=0;p<R;p++){g=C[p];var b=Math.round(g.size+D);D+=g.size-b,_-=B[g.layoutElement.$hashCode]=b}_=0<_?_:0}this.$verticalAlign==egret.VerticalAlign.MIDDLE?y=r+.5*_:this.$verticalAlign==egret.VerticalAlign.BOTTOM&&(y=r+_);var A,O,M=n,w=r,U=0,V=0,H=Math.ceil(h);for(this.$horizontalAlign==F.JustifyAlign.CONTENT_JUSTIFY&&(H=Math.ceil(Math.max(h,T))),p=D=0;p<f;p++){var z=0;if(I=i.getElementAt(p),egret.is(I,W)&&I.$includeInLayout){if(I.getPreferredBounds(S),A=NaN,u?(O=NaN,0<N?O=_*S.height/$:N<0&&S.height>L&&(O=_/P),isNaN(O)||(D+=O-(A=Math.round(O+D)))):A=B[I.$hashCode],d)m=n,I.setLayoutBoundsSize(H,A),I.getLayoutBounds(S);else{var k=NaN;x=I.$UIComponent;if(!isNaN(x[6])){var G=Math.min(100,x[6]);k=Math.round(h*G*.01)}I.setLayoutBoundsSize(k,A),I.getLayoutBounds(S),m=n+(z=0<(z=(h-S.width)*c)?z:0)}I.setLayoutBoundsPosition(Math.round(m),Math.round(y)),U=Math.ceil(S.width),V=Math.ceil(S.height),M=Math.max(M,m+U),w=Math.max(w,y+V),y+=V+o}}this.maxElementSize=T,i.setContentSize(M+s,w+a)},i.updateDisplayListVirtual=function(t,e){var i=this.$target;this.indexInViewCalculated?this.indexInViewCalculated=!1:this.getIndexInView();var n,s=this.$paddingBottom,r=this.$paddingLeft,a=this.$paddingRight,o=this.$gap,h=i.numElements;if(-1==this.startIndex||-1==this.endIndex)return n=this.getStartPosition(h)-o+s,void i.setContentSize(i.contentWidth,n);var l=this.endIndex;i.setVirtualElementIndicesInView(this.startIndex,l);var u=this.$horizontalAlign==F.JustifyAlign.JUSTIFY||this.$horizontalAlign==F.JustifyAlign.CONTENT_JUSTIFY,d=this.$horizontalAlign==F.JustifyAlign.CONTENT_JUSTIFY,c=0;u||(this.$horizontalAlign==egret.HorizontalAlign.CENTER?c=.5:this.$horizontalAlign==egret.HorizontalAlign.RIGHT&&(c=1));var p,g=egret.$TempRectangle,f=Math.max(0,t-r-a),v=Math.ceil(f),m=this.$typicalHeight,y=this.$typicalWidth,$=this.maxElementSize,E=Math.max(y,this.maxElementSize);if(d){for(var C=this.startIndex;C<=l;C++)p=i.getVirtualElementAt(C),egret.is(p,W)&&p.$includeInLayout&&(p.getPreferredBounds(g),$=Math.max($,g.width));v=Math.ceil(Math.max(f,$))}for(var _=0,T=0,S=0,I=!1,x=this.elementSizeTable,L=this.startIndex;L<=l;L++){var N=0;p=i.getVirtualElementAt(L),egret.is(p,W)&&p.$includeInLayout&&(p.getPreferredBounds(g),d||($=Math.max($,g.width)),u?(_=r,p.setLayoutBoundsSize(v,NaN),p.getLayoutBounds(g)):(p.getLayoutBounds(g),_=r+(N=0<(N=(f-g.width)*c)?N:0)),S=Math.max(S,g.width),I||(isNaN(x[L])?m:x[L])!=g.height&&(I=!0),x[L]=g.height,T=this.getStartPosition(L),p.setLayoutBoundsPosition(Math.round(_),Math.round(T)))}S+=r+a,n=this.getStartPosition(h)-o+s,this.maxElementSize=$,i.setContentSize(S,n),(I||E<this.maxElementSize)&&i.invalidateSize()},i.getStartPosition=function(t){if(!this.$useVirtualLayout&&this.$target){var e=this.$target.getElementAt(t);if(e)return e.y}for(var i=this.$typicalHeight,n=this.$paddingTop,s=this.$gap,r=this.elementSizeTable,a=0;a<t;a++){var o=r[a];isNaN(o)&&(o=i),n+=o+s}return n},i.getElementSize=function(t){if(this.$useVirtualLayout){var e=this.elementSizeTable[t];return isNaN(e)&&(e=this.$typicalHeight),e}return this.$target?this.$target.getElementAt(t).height:0},i.getElementTotalSize=function(){for(var t=this.$typicalHeight,e=this.$gap,i=0,n=this.$target.numElements,s=this.elementSizeTable,r=0;r<n;r++){var a=s[r];isNaN(a)&&(a=t),i+=a+e}return i-=e},i.elementAdded=function(t){this.$useVirtualLayout&&(e.prototype.elementAdded.call(this,t),this.elementSizeTable.splice(t,0,this.$typicalHeight))},i.getIndexInView=function(){var t=this.$target;if(!t||0==t.numElements)return this.startIndex=this.endIndex=-1,!1;var e=t.$UIComponent;if(0==e[10]||0==e[11])return this.startIndex=this.endIndex=-1,!1;var i=t.numElements,n=this.getStartPosition(i-1)+this.elementSizeTable[i-1]+this.$paddingBottom,s=t.scrollV;if(s>n-this.$paddingBottom)return this.startIndex=-1,!(this.endIndex=-1);var r=t.scrollV+e[11];if(r<this.$paddingTop)return this.startIndex=-1,!(this.endIndex=-1);var a=this.startIndex,o=this.endIndex;return this.startIndex=this.findIndexAt(s,0,i-1),-1==this.startIndex&&(this.startIndex=0),this.endIndex=this.findIndexAt(r,0,i-1),-1==this.endIndex&&(this.endIndex=i-1),a!=this.startIndex||o!=this.endIndex},t}(F.LinearLayoutBase);F.VerticalLayout=t,egret.registerClass(t,"eui.VerticalLayout")}(eui||(eui={})),function(t){var e=function(){function t(t,e,i,n){this.target=t,this.propertyName=e,this.position=i,this.relativeTo=n}__define;var e=t.prototype;return e.apply=function(t,e){var i,n=t[this.relativeTo],s=t[this.target],r=this.propertyName?t[this.propertyName]:e;if(s&&r){switch(this.position){case 0:i=0;break;case 1:i=-1;break;case 2:i=r.getChildIndex(n);break;case 3:i=r.getChildIndex(n)+1}-1==i&&(i=r.numChildren),egret.is(r,"eui.Component")&&r.$Component[8].$elementsContent.push(s),r.addChildAt(s,i)}},e.remove=function(t,e){var i=this.propertyName?t[this.propertyName]:e,n=t[this.target];if(n&&i&&(n.$parent===i&&i.removeChild(n),egret.is(i,"eui.Component"))){var s=i.$Component[8].$elementsContent,r=s.indexOf(n);-1<r&&s.splice(r,1)}},t}();t.AddItems=e,egret.registerClass(e,"eui.AddItems",["eui.IOverride"])}(eui||(eui={})),function(t){var e=function(){function t(t,e,i){this.target=t,this.name=e,this.value=i}__define;var e=t.prototype;return e.apply=function(t,e){var i=this.target?t[this.target]:t;i&&(this.oldValue=i[this.name],this.setPropertyValue(i,this.name,this.value,this.oldValue))},e.remove=function(t,e){var i=this.target?t[this.target]:t;i&&(this.setPropertyValue(i,this.name,this.oldValue,this.oldValue),this.oldValue=null)},e.setPropertyValue=function(t,e,i,n){t[e]=null==i?i:"number"==typeof n?+i:"boolean"==typeof n?this.toBoolean(i):i},e.toBoolean=function(t){return"string"==typeof t?"true"==t.toLowerCase():0!=t},t}();t.SetProperty=e,egret.registerClass(e,"eui.SetProperty",["eui.IOverride"])}(eui||(eui={})),function(a){var t=function(){function t(t,e,i,n){this.host=t,this.chain=e,this.target=i,this.prop=n}__define;var e=t.prototype;return e.apply=function(t,e){if(this.target){var i=this.target[this.prop];this.oldValue&&this.setPropertyValue(this.target,this.prop,this.oldValue,this.oldValue),i&&(this.oldValue=i);for(var n=[],s=0,r=this.chain.length;s<r;s++)n[s]=this.chain[s];a.Binding.bindProperty(this.host,n,this.target,this.prop)}},e.remove=function(t,e){if(this.target){var i=this.oldValue;this.target[this.prop]&&(this.oldValue=this.target[this.prop]),i&&this.setPropertyValue(this.target,this.prop,i,i)}},e.setPropertyValue=function(t,e,i,n){t[e]=null==i?i:"number"==typeof n?+i:"boolean"==typeof n?this.toBoolean(i):i},e.toBoolean=function(t){return"string"==typeof t?"true"==t.toLowerCase():0!=t},t}();a.SetStateProperty=t,egret.registerClass(t,"eui.SetStateProperty",["eui.IOverride"])}(eui||(eui={})),function(t){!function(t){var e=function(){function t(){}__define;return t.fitBounds=function(t,e,i,n,s,r,a,o,h,l,u){if(isNaN(t)&&isNaN(e))return egret.Point.create(r,a);var d,c=o<.1?0:o-.1,p=h<.1?0:h-.1,g=l+.1,f=u+.1;if(isNaN(t)||isNaN(e))return isNaN(t)?$(e,i,n,s,r,a,c,p,g,f):y(t,i,n,s,r,a,c,p,g,f);if(!(d=function(t,e,i,n,s,r,a){var o=i.a,h=i.b,l=i.c,u=i.d;-1e-9<o&&o<1e-9&&(o=0);-1e-9<h&&h<1e-9&&(h=0);-1e-9<l&&l<1e-9&&(l=0);-1e-9<u&&u<1e-9&&(u=0);if(0==h&&0==l)return 0==o||0==u?null:egret.Point.create(t/Math.abs(o),e/Math.abs(u));if(0==o&&0==u)return 0==h||0==l?null:egret.Point.create(e/Math.abs(h),t/Math.abs(l));var d=0<=o*l?l:-l,c=0<=h*u?u:-u,p=o*c-h*d;if(Math.abs(p)<1e-9)return 0==d||0==o||o==-d?null:1e-9<Math.abs(o*e-h*t)?null:E(o,d,t,n,n,r,a,h,c);var g,f=1/p;return(g=_(o,d,h,c,t*=f,e*=f))&&n<=g.x&&g.x<=r&&s<=g.y&&g.y<=a&&0<=o*g.x+d*g.x&&0<=h*g.x+c*g.y?g:(g=_(o,d,h,c,t,-e))&&n<=g.x&&g.x<=r&&s<=g.y&&g.y<=a&&0<=o*g.x+d*g.x&&h*g.x+c*g.y<0?g:(g=_(o,d,h,c,-t,e))&&n<=g.x&&g.x<=r&&s<=g.y&&g.y<=a&&o*g.x+d*g.x<0&&0<=h*g.x+c*g.y?g:(g=_(o,d,h,c,-t,-e))&&n<=g.x&&g.x<=r&&s<=g.y&&g.y<=a&&o*g.x+d*g.x<0&&h*g.x+c*g.y<0?g:(egret.Point.release(g),null)}(t,e,i,c,p,g,f))){var v,m;if(v=y(t,i,n,s,r,a,c,p,g,f))e<C(v.x,v.y,i).height-.1&&(egret.Point.release(v),v=null);if(m=$(e,i,n,s,r,a,c,p,g,f))t<C(m.x,m.y,i).width-.1&&(egret.Point.release(m),m=null);d=v&&m?v.x*v.y>m.x*m.y?v:m:v||m,egret.Point.release(v),egret.Point.release(m)}return d},t}();function y(t,e,i,n,s,r,a,o,h,l){var u;if(!isNaN(i)&&isNaN(n)){if(u=c(t,e,i,r,i,o,i,l))return u}else if(isNaN(i)&&!isNaN(n)&&(u=c(t,e,s,n,a,n,h,n)))return u;return u=c(t,e,s,r,a,o,h,l)}function $(t,e,i,n,s,r,a,o,h,l){var u;if(!isNaN(i)&&isNaN(n)){if(u=d(t,e,i,r,i,o,i,l))return u}else if(isNaN(i)&&!isNaN(n)&&(u=d(t,e,s,n,a,n,h,n)))return u;return u=d(t,e,s,r,a,o,h,l)}function d(t,e,i,n,s,r,a,o){var h=e.b,l=e.d;if(-1e-9<h&&h<1e-9&&(h=0),-1e-9<l&&l<1e-9&&(l=0),0==h&&0==l)return null;if(0==h&&0==l)return null;if(0==h)return egret.Point.create(i,t/Math.abs(l));if(0==l)return egret.Point.create(t/Math.abs(h),n);var u,d,c,p=0<=h*l?l:-l;if(0!=p&&0<i){var g=1/p;r<=(c=(t-h*(d=i=Math.max(s,Math.min(a,i))))*g)&&c<=o&&0<=h*d+p*c&&(u=egret.Point.create(d,c)),r<=(c=(-t-h*d)*g)&&c<=o&&h*d+p*c<0&&(!u||C(u.x,u.y,e).width>C(d,c,e).width)&&(egret.Point.release(u),u=egret.Point.create(d,c))}if(0!=h&&0<n){var f=1/h;s<=(d=(t-p*(c=n=Math.max(r,Math.min(o,n))))*f)&&d<=a&&0<=h*d+p*c&&(!u||C(u.x,u.y,e).width>C(d,c,e).width)&&(u=egret.Point.create(d,c)),s<=(d=(-t-p*c)*f)&&d<=a&&h*d+p*c<0&&(!u||C(u.x,u.y,e).width>C(d,c,e).width)&&(egret.Point.release(u),u=egret.Point.create(d,c))}if(u)return u;var v=e.a,m=e.c;return E(h,p,t,s,r,a,o,v,0<=v*m?m:-m)}function c(t,e,i,n,s,r,a,o){var h=e.a,l=e.c;if(-1e-9<h&&h<1e-9&&(h=0),-1e-9<l&&l<1e-9&&(l=0),0==h&&0==l)return null;if(0==h)return egret.Point.create(i,t/Math.abs(l));if(0==l)return egret.Point.create(t/Math.abs(h),n);var u,d,c,p=0<=h*l?l:-l;if(0!=p&&0<i){var g=1/p;r<=(c=(t-h*(d=i=Math.max(s,Math.min(a,i))))*g)&&c<=o&&0<=h*d+p*c&&(u=egret.Point.create(d,c)),r<=(c=(-t-h*d)*g)&&c<=o&&h*d+p*c<0&&(!u||C(u.x,u.y,e).height>C(d,c,e).height)&&(egret.Point.release(u),u=egret.Point.create(d,c))}if(0!=h&&0<n){var f=1/h;s<=(d=(t-p*(c=n=Math.max(r,Math.min(o,n))))*f)&&d<=a&&0<=h*d+p*c&&(!u||C(u.x,u.y,e).height>C(d,c,e).height)&&(egret.Point.release(u),u=egret.Point.create(d,c)),s<=(d=(-t-p*c)*f)&&d<=a&&h*d+p*c<0&&(!u||C(u.x,u.y,e).height>C(d,c,e).height)&&(egret.Point.release(u),u=egret.Point.create(d,c))}if(u)return u;var v=e.b,m=e.d;return E(h,p,t,s,r,a,o,v,0<=v*m?m:-m)}function E(t,e,i,n,s,r,a,o,h){if(0==t||0==e)return null;var l,u,d=(i-n*t)/e,c=(i-r*t)/e,p=Math.max(s,Math.min(d,c)),g=Math.min(a,Math.max(d,c)),f=o*e-t*h;return p<=g?(u=Math.abs(f)<1e-9?i/(t+e):o*i/f,l=(i-e*(u=Math.max(p,Math.min(u,g))))/t,egret.Point.create(l,u)):(d=-(n*t+i)/e,c=-(r*t+i)/e,(p=Math.max(s,Math.min(d,c)))<=(g=Math.min(a,Math.max(d,c)))?(u=Math.abs(f)<1e-9?-i/(t+e):-o*i/f,l=(-i-e*(u=Math.max(p,Math.min(u,g))))/t,egret.Point.create(l,u)):null)}function C(t,e,i){var n=egret.$TempRectangle.setTo(0,0,t,e);return i.$transformBounds(n),n}function _(t,e,i,n,s,r){return egret.Point.create(n*s-e*r,t*r-i*s)}t.MatrixUtil=e,egret.registerClass(e,"eui.sys.MatrixUtil")}(t.sys||(t.sys={}))}(eui||(eui={}));